<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"simuty.com","root":"/","scheme":"Gemini","version":"8.0.0-rc.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":10,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
<meta property="og:type" content="website">
<meta property="og:title" content="ç®€å•å³æ˜¯ç¾">
<meta property="og:url" content="https://simuty.com/page/5/index.html">
<meta property="og:site_name" content="ç®€å•å³æ˜¯ç¾">
<meta property="og:description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Howard">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://simuty.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>ç®€å•å³æ˜¯ç¾</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168603273-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-168603273-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7b295d599a09ce76e6f5d95b315b3519";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ç®€å•å³æ˜¯ç¾</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/06/02/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/02/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹--é˜¶æ®µæ€»ç»“ä¸è¡¥å……ã€16ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-02 10:38:59" itemprop="dateCreated datePublished" datetime="2019-06-02T10:38:59+08:00">2019-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.8k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>å›é¡¾Pythoné¢å‘å¯¹è±¡</li>
<li>âœ…æŒæ¡<strong>pipenvè™šæ‹Ÿç¯å¢ƒ</strong>çš„åŸºæœ¬ä½¿ç”¨</li>
</ul>
<p><img data-src="0.jpg" alt="0"></p>
<p>åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°ä¸€äº›ç–‘æƒ‘ï¼Œæ‘¸ç´¢äº†ä¸åŒçš„å½¢å¼ã€æ–¹æ³•ï¼Œæœ‰äº†ä¸€äº›ç»“è®ºï¼Œè¯¸å¦‚ï¼š</p>
<ol>
<li>æ–‡ç« çš„é¢å‘ç¾¤ä½“â€“æœ‰ä¸€å®šç¼–ç¨‹åŸºç¡€çš„ï¼›å±äºä¸ªäººå­¦ä¹ ğŸ“ï¼Œä¸å¯èƒ½é¢é¢ä¿±åˆ°ï¼›</li>
<li>æ–‡ç« çš„å½¢å¼â€“å¦‚æœæ²¡æœ‰é€’è¿›æ·±å…¥ä¸å®ä¾‹ï¼Œä»…åœç•™åœ¨åŸºæœ¬ï¼›é‚£æ˜¯åˆ·æµæ°“ï¼›</li>
<li>å­¦ä¹ çš„ç›®æ ‡ä¾æ—§æ˜¯â€“å‘æœºå™¨å­¦ä¹ é æ‹¢ï¼Œå‡ºäºå¥½å¥‡ï¼ŒæŒ‘æˆ˜ä¸‹è‡ªæˆ‘ã€‚</li>
</ol>
<blockquote>
<p>ä¹Ÿè®¸å¥½å¥‡æ‰æ˜¯çœŸæ­£è®©æˆ‘å­¦ä¹ Pythonçš„åŸæœ‰ï¼›</p>
<blockquote>
<p>ä¸è®ºå¯¹é”™ï¼Œè¿‡ç¨‹ä¸­æ¸æ¸åŸ¹å…»äº†ä¸“æ³¨ã€æ€è€ƒã€æ¢ç´¢ã€æ€»ç»“ï¼Œæƒ³å¿…æ˜¯å€¼å¾—ã€‚<br>å‹‡æ•¢èµ°å‡ºèˆ’é€‚åŒºï¼Œå»åšæœ‰æ„æ€çš„äº‹ï¼Œå¥½å¥½å­¦æ•°å­¦ ğŸ˜†</p>
</blockquote>
</blockquote>
<p>PythonåŸºç¡€ç³»åˆ—åˆ°æ­¤å°±è¦å‘Šä¸€æ®µè½äº†ï¼Œè¯¥éƒ¨åˆ†ä¸»è¦åŒ…å«äº†ä»¥ä¸‹å‡ ä»¶äº‹</p>
<ol>
<li>è¿ˆå‡ºäº†å¼€å§‹å­¦ä¹ Pythonçš„ç¬¬ä¸€æ­¥ï¼›</li>
<li>å½’çº³æ€»ç»“å¸¸ç”¨çš„æ•°æ®ç±»å‹ã€æ–¹æ³•ã€å‡½æ•°ç­‰ï¼Œå¯èƒ½ä¼šç©¿æ’äº›ç¨å¾®æ·±å…¥äº›çš„çŸ¥è¯†ç‚¹ï¼›</li>
<li>æŸ¥æ¼è¡¥ç¼ºï¼Œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æ›´åŠ æ·±å…¥äº†ç†è§£ä¸€äº›æ¦‚å¿µã€åŸç†ã€‚</li>
</ol>
<blockquote>
<p>æ¥ä¸‹æ¥çš„å®‰æ’</p>
<blockquote>
<p>å› ä¸ºNode.jså±äºæ—¥å¸¸å·¥ä½œèŒƒç•´ï¼Œå·¥ä½œä¹‹ä½™æ¢ç§å¿ƒæƒ…ğŸ˜†</p>
</blockquote>
</blockquote>
<ol>
<li>ç»§ç»­å­¦ä¹ Pythonç›¸å…³çŸ¥è¯†ï¼Œæ¨¡å—ã€æ¡†æ¶ï¼›</li>
<li>å¼€å§‹è¯•ç€å†™é¡¹ç›®ï¼Œè‡³äºç±»å‹ï¼Œåœ¨è¿‡ç¨‹ä¸­å†ç¡®å®šå§ï¼›</li>
<li>å¼€å§‹<strong>è¿˜</strong>æ›¾ç»è½ä¸‹çš„<strong>æ•°å­¦ğŸ“š</strong>ï¼Œå¯èƒ½ä¼šåˆ†äº«ç›¸å…³å†…å®¹ï¼Œåªæ˜¯å†™æ–‡ç« å¤ªè´¹æ—¶é—´äº†ã€‚ã€‚ã€‚ï¼›</li>
<li>å¸Œæœ›åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œå¼€å§‹è¯•ç€å­¦ä¹ æœºå™¨å­¦ä¹ ã€‚</li>
</ol>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-Python-é¢å‘å¯¹è±¡"><a href="#ç¬¬ä¸€éƒ¨åˆ†-Python-é¢å‘å¯¹è±¡" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† Python é¢å‘å¯¹è±¡"></a>ç¬¬ä¸€éƒ¨åˆ† Python é¢å‘å¯¹è±¡</h3><h3 id="ç¬¬äºŒéƒ¨åˆ†-pipenvè™šæ‹Ÿç¯å¢ƒ"><a href="#ç¬¬äºŒéƒ¨åˆ†-pipenvè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† pipenvè™šæ‹Ÿç¯å¢ƒ"></a>ç¬¬äºŒéƒ¨åˆ† pipenvè™šæ‹Ÿç¯å¢ƒ</h3><h4 id="1-pipenv-æ˜¯ä»€ä¹ˆ"><a href="#1-pipenv-æ˜¯ä»€ä¹ˆ" class="headerlink" title="1. pipenv æ˜¯ä»€ä¹ˆ"></a>1. pipenv æ˜¯ä»€ä¹ˆ</h4><p><a href="https://github.com/pypa/pipenv" target="_blank" rel="noopener">å®˜ç½‘åœ°å€</a><br>Pipenv is a production-ready tool that aims to bring the best of all <code>packaging</code> worlds to the Python world. It harnesses <strong>Pipfile, pip, and virtualenv</strong> into one single command.</p>
<p>å¤§æ¦‚æ„æ€å°±æ˜¯ï¼š<code>Pipenv å¯ä»¥ä¸ºä½ çš„é¡¹ç›®è‡ªåŠ¨åœ°åˆ›å»ºå’Œç®¡ç†ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚</code></p>
<p>å¦‚æœå¯¹Nodeç†Ÿæ‚‰çš„è¯ï¼Œåº”è¯¥äº†è§£:</p>
<ol>
<li>nvm ç®¡ç†nodejsçš„ç‰ˆæœ¬ï¼Œå¯è‡ªç”±åˆ‡æ¢ï¼›</li>
<li>npm: ç®¡ç†å·¥å…·ï¼Œå¯æ–¹ä¾¿ä¸‹è½½ç¬¬ä¸‰æ–¹æ¨¡å—ï¼›</li>
<li>package.json: é¡¹ç›®æ–‡ä»¶ï¼Œè®°å½•ä¸€äº›æ¨¡å—ä¾èµ–ä¿¡æ¯ã€é…ç½®ä¿¡æ¯ç­‰</li>
</ol>
<p>å¤§æ¦‚å¯ä»¥ç†è§£ä¸ºï¼šå¯¹æ¯”pipenv: </p>
<blockquote>
<p>pipenv = nvm + npm;</p>
</blockquote>
<p>å½“ç„¶è¿™åªæ˜¯ä¸ªç®€å•çš„ã€‚ä¾¿äºå­¦ä¹ çš„å¯¹æ¯”ï¼›</p>
<p><strong>å¦‚æœ‰ä¸å¯¹âŒï¼Œæ•¬è¯·æŒ‡å‡º</strong></p>
<h4 id="2-pipenv-èƒ½è§£å†³ä»€ä¹ˆâ“"><a href="#2-pipenv-èƒ½è§£å†³ä»€ä¹ˆâ“" class="headerlink" title="2. pipenv èƒ½è§£å†³ä»€ä¹ˆâ“"></a>2. pipenv èƒ½è§£å†³ä»€ä¹ˆâ“</h4><ol>
<li>ä½ ä¸å†éœ€è¦æ‰‹åŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ŒPipenv ä¸ºä½ è‡ªåŠ¨åˆ›å»ºã€‚ç®€å•åœ°è¯´å°±æ˜¯ pipenv å’Œ virtualenv ä¸€èµ·å·¥ä½œã€‚</li>
<li>ç®¡ç† requirements.txt æ–‡ä»¶ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥ Pipenv ç”¨ Pipfile å’Œ Pipfile.lock æ›¿ä»£ requirements.txtï¼Œæ›´é€‚åˆäºä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯ã€‚</li>
<li>å®‰å…¨ã€‚å¹¿æ³›åœ°ä½¿ç”¨ Hash æ ¡éªŒï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ›éœ²å®‰å…¨æ¼æ´ã€‚</li>
<li>éšæ—¶æŸ¥çœ‹å›¾å½¢åŒ–çš„ä¾èµ–å…³ç³»ã€‚</li>
<li>é€šè¿‡åŠ è½½ .env æ–‡ä»¶ç®€åŒ–å¼€å‘æµç¨‹ã€‚</li>
</ol>
<h4 id="3-å®‰è£…ä½¿ç”¨"><a href="#3-å®‰è£…ä½¿ç”¨" class="headerlink" title="3. å®‰è£…ä½¿ç”¨"></a>3. å®‰è£…ä½¿ç”¨</h4><p><a href="https://github.com/pypa/pipenv" target="_blank" rel="noopener">å®˜ç½‘åœ°å€</a>æœ‰å¯¹åº”çš„å®‰è£…æ–¹æ³•ï¼Œä¸‹è¾¹ä»¥Macä¸ºä¾‹;</p>
<p>å‰ä½“æ˜¯å·²ç»å®‰è£…è¿‡Pythonã€pip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install pipenv</span><br></pre></td></tr></table></figure>

<h4 id="4-å®ä¾‹ä¸€"><a href="#4-å®ä¾‹ä¸€" class="headerlink" title="4. å®ä¾‹ä¸€"></a>4. å®ä¾‹ä¸€</h4><p>ç›®æ ‡</p>
<ul>
<li>åˆè¯†ç¯å¢ƒ</li>
<li>æŒæ¡åŸºæœ¬çš„æ“ä½œ</li>
</ul>
<p>å¤šä½™ä»£ç å¤ªå¤šï¼Œå®ä¾‹ä¸€å…±åŒ…å«ä»¥ä¸‹å‡ æ­¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. åˆå§‹åŒ–ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼›</span><br><span class="line">2. äº†è§£ä¸‹è™šæ‹Ÿç¯å¢ƒå†…å®¹ï¼›</span><br><span class="line">3. æ–°å»ºæ–‡ä»¶ï¼Œå¹¶è¿è¡Œï¼›</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. åˆå§‹åŒ–ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼›</span></span><br><span class="line">hhw<span class="number">-4</span>:pythonEnv hhw$ pipenv install</span><br><span class="line">Creating a virtualenv <span class="keyword">for</span> this projectâ€¦</span><br><span class="line">Pipfile: /Users/hhw/Desktop/pythonEnv/Pipfile</span><br><span class="line">Using /usr/local/Cellar/pipenv/<span class="number">2018.11</span><span class="number">.26</span>_2/libexec/bin/python3<span class="number">.7</span> (<span class="number">3.7</span><span class="number">.3</span>) to create virtualenvâ€¦</span><br><span class="line">â ‹ Creating virtual environment...Already using interpreter /usr/local/Cellar/pipenv/<span class="number">2018.11</span><span class="number">.26</span>_2/libexec/bin/python3<span class="number">.7</span></span><br><span class="line">Using real prefix <span class="string">'/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7'</span></span><br><span class="line">New python executable <span class="keyword">in</span> /Users/hhw/.local/share/virtualenvs/pythonEnv-Vx1xxtfj/bin/python3<span class="number">.7</span></span><br><span class="line">Also creating executable <span class="keyword">in</span> /Users/hhw/.local/share/virtualenvs/pythonEnv-Vx1xxtfj/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...</span><br><span class="line">done.</span><br><span class="line"></span><br><span class="line">âœ” Successfully created virtual environment!</span><br><span class="line">Virtualenv location: /Users/hhw/.local/share/virtualenvs/pythonEnv-Vx1xxtfj</span><br><span class="line">Creating a Pipfile <span class="keyword">for</span> this projectâ€¦</span><br><span class="line">Pipfile.lock <span class="keyword">not</span> found, creatingâ€¦</span><br><span class="line">Locking [dev-packages] dependenciesâ€¦</span><br><span class="line">Locking [packages] dependenciesâ€¦</span><br><span class="line">Updated Pipfile.lock (a65489)!</span><br><span class="line">Installing dependencies <span class="keyword">from</span> Pipfile.lock (a65489)â€¦</span><br><span class="line">  ğŸ   â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ <span class="number">0</span>/<span class="number">0</span> â€” <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">To activate this project<span class="string">'s virtualenv, run pipenv shell.</span></span><br><span class="line"><span class="string">Alternatively, run a command inside the virtualenv with pipenv run.</span></span><br><span class="line"><span class="string">hhw-4:pythonEnv hhw$</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. æ–°å»ºæ–‡ä»¶ï¼Œå¹¶è¿è¡Œï¼›</span></span><br><span class="line"><span class="comment"># ä¸‹è½½requestsæ¨¡å—</span></span><br><span class="line">hhw<span class="number">-4</span>:pythonEnv hhw$  pipenv install requests</span><br><span class="line">Installing requestsâ€¦</span><br><span class="line">Adding requests to Pipfile<span class="string">'s [packages]â€¦</span></span><br><span class="line"><span class="string">âœ” Installation Succeeded</span></span><br><span class="line"><span class="string">Pipfile.lock (444a6d) out of date, updating to (a65489)â€¦</span></span><br><span class="line"><span class="string">Locking [dev-packages] dependenciesâ€¦</span></span><br><span class="line"><span class="string">Locking [packages] dependenciesâ€¦</span></span><br><span class="line"><span class="string">âœ” Success!</span></span><br><span class="line"><span class="string">Updated Pipfile.lock (444a6d)!</span></span><br><span class="line"><span class="string">Installing dependencies from Pipfile.lock (444a6d)â€¦</span></span><br><span class="line"><span class="string">  ğŸ   â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 5/5 â€” 00:00:02</span></span><br><span class="line"><span class="string">To activate this project'</span>s virtualenv, run pipenv shell.</span><br><span class="line">Alternatively, run a command inside the virtualenv <span class="keyword">with</span> pipenv run.</span><br><span class="line">hhw<span class="number">-4</span>:pythonEnv hhw$ vim test.py</span><br></pre></td></tr></table></figure>

<p>ç”¨ ls å‘½ä»¤æŸ¥çœ‹å½“å‰é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>Pipfile å’Œ Pipfile.lock ã€‚</code></p>
<p>Pipfile é‡Œæœ‰æœ€æ–°å®‰è£…çš„åŒ…æ–‡ä»¶çš„ä¿¡æ¯ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬ç­‰ã€‚ç”¨æ¥ åœ¨é‡æ–°å®‰è£…é¡¹ç›®ä¾èµ–æˆ–ä¸ä»–äººå…±äº«é¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥ç”¨ Pipfile æ¥è·Ÿè¸ªé¡¹ç›®ä¾èµ–ã€‚<br>Pipfile.lock åˆ™åŒ…å«ä½ çš„ç³»ç»Ÿä¿¡æ¯ï¼Œæ‰€æœ‰å·²å®‰è£…åŒ…çš„ä¾èµ–åŒ…åŠå…¶ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠæ‰€æœ‰å®‰è£…åŒ…åŠå…¶ä¾èµ–åŒ…çš„ Hash æ ¡éªŒä¿¡æ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test.py å†…å®¹</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">'https://httpbin.org/ip'</span>)</span><br><span class="line">print(<span class="string">'ä½ çš„ IP åœ°å€æ˜¯ &#123;0&#125;'</span>.format(response.json()[<span class="string">'origin'</span>]))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pipenv run python main.py</span><br><span class="line">ä½ çš„ IP åœ°å€æ˜¯ <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br></pre></td></tr></table></figure>

<p><strong>å®ä¾‹ä¸€ æ€»ç»“</strong></p>
<p>ä»¥ä¸Šå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€å¦‚ä½•ä¸‹è½½ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œï¼›</p>
<p>ä¹Ÿè®¸ä¸å¤ªç›´è§‚ï¼Œç”»äº†ä¸¤ä¸ªå›¾ï¼Œè™šæ‹Ÿç¯å¢ƒè‡ªå·±ç©å„¿è‡ªå·±çš„ã€‚</p>
<p><img data-src="1.jpg" alt=""></p>
<p><img data-src="2.jpg" alt="è™šæ‹Ÿç¯å¢ƒ"></p>
<p>æŒ‰å®é™…éœ€æ±‚æ¥</p>
<ol>
<li>ä½ çš„ä»£ç ç»™åˆ«äººï¼Œåˆ«äººæ€ä¹ˆæ­£å¸¸è¿è¡Œï¼Ÿ</li>
<li>pipenv å¸¸ç”¨å‘½ä»¤æœ‰å“ªäº›ï¼Ÿ</li>
</ol>
<p>é—®é¢˜ä¸€ï¼šå†»ç»“Pipfileï¼›ç±»æ¯”<code>package-lock.json</code></p>
<p>å†»ç»“å°±ç›¸å½“äºå°†é¡¹ç›®æ‰€ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“åˆ—è¡¨è¿›è¡Œæ‰“åŒ…è¾“å‡º,ç±»æ¯”<code>package-lock.json</code><br>é€šè¿‡æ›´æ–°Pipfile.lockæ¥å†»ç»“åº“åç§°åŠå…¶ç‰ˆæœ¬ï¼Œä»¥åŠå…¶ä¾èµ–å…³ç³»çš„åˆ—è¡¨ã€‚éœ€è¦ä½¿ç”¨lockå‚æ•°ï¼š<code>pipenv lock</code></p>
<p>è¢«äººæ€ä¹ˆç”¨ï¼Ÿç±»æ¯” <code>npm install</code><br><code>pipenv install</code><br>Pipenvä¼šåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹è‡ªåŠ¨å¯»æ‰¾Pipfileå’ŒPipfile.lockæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ã€‚</p>
<p>é—®é¢˜äºŒï¼š å¯é€‰å‚æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ pipenv</span><br><span class="line">Usage: pipenv [OPTIONS] COMMAND [ARGS]...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --update         æ›´æ–°Pipenv &amp; pip</span><br><span class="line">  --where          æ˜¾ç¤ºé¡¹ç›®æ–‡ä»¶æ‰€åœ¨è·¯å¾„</span><br><span class="line">  --venv           æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒå®é™…æ–‡ä»¶æ‰€åœ¨è·¯å¾„</span><br><span class="line">  --py             æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒPythonè§£é‡Šå™¨æ‰€åœ¨è·¯å¾„</span><br><span class="line">  --envs           æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒçš„é€‰é¡¹å˜é‡</span><br><span class="line">  --rm             åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">  --bare           æœ€å°åŒ–è¾“å‡º</span><br><span class="line">  --completion     å®Œæ•´è¾“å‡º</span><br><span class="line">  --man            æ˜¾ç¤ºå¸®åŠ©é¡µé¢</span><br><span class="line">  --three &#x2F; --two  ä½¿ç”¨Python 3&#x2F;2åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ³¨æ„æœ¬æœºå·²å®‰è£…çš„Pythonç‰ˆæœ¬ï¼‰</span><br><span class="line">  --python TEXT    æŒ‡å®šæŸä¸ªPythonç‰ˆæœ¬ä½œä¸ºè™šæ‹Ÿç¯å¢ƒçš„å®‰è£…æº</span><br><span class="line">  --site-packages  é™„å¸¦å®‰è£…åŸPythonè§£é‡Šå™¨ä¸­çš„ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">  --jumbotron      ä¸çŸ¥é“å•¥ç©æ„....</span><br><span class="line">  --version        ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">  -h, --help       å¸®åŠ©ä¿¡æ¯</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># å‘½ä»¤å‚æ•°</span><br><span class="line">Commands:</span><br><span class="line">  check      æ£€æŸ¥å®‰å…¨æ¼æ´</span><br><span class="line">  graph      æ˜¾ç¤ºå½“å‰ä¾èµ–å…³ç³»å›¾ä¿¡æ¯</span><br><span class="line">  install    å®‰è£…è™šæ‹Ÿç¯å¢ƒæˆ–è€…ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">  lock       é”å®šå¹¶ç”ŸæˆPipfile.lockæ–‡ä»¶</span><br><span class="line">  open       åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹ä¸€ä¸ªåº“</span><br><span class="line">  run        åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œå‘½ä»¤</span><br><span class="line">  shell      è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">  uninstall  å¸è½½ä¸€ä¸ªåº“</span><br><span class="line">  update     å¸è½½å½“å‰æ‰€æœ‰çš„åŒ…ï¼Œå¹¶å®‰è£…å®ƒä»¬çš„æœ€æ–°ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½é¡¹ç›®è·¯å¾„</span></span><br><span class="line">$ pipenv --where</span><br><span class="line"><span class="comment"># å®šä½è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ pipenv --venv</span><br><span class="line"><span class="comment"># å®šä½Pythonè§£é‡Šå™¨</span></span><br><span class="line">$ pipenv --py</span><br><span class="line"><span class="comment"># å®‰è£…åŒ…</span></span><br><span class="line">$ pipenv install</span><br><span class="line"><span class="comment"># å¸è½½æ‰€æœ‰çš„åŒ…ï¼š</span></span><br><span class="line">$ pipenv uninstall --all</span><br><span class="line"><span class="comment"># ä¾èµ–å…³ç³»</span></span><br><span class="line">$ pipenv graph</span><br><span class="line"><span class="comment"># ç”Ÿæˆlockæ–‡ä»¶</span></span><br><span class="line">$ pipenv lock</span><br><span class="line"><span class="comment"># å®‰è£…å¼€å‘ç¯å¢ƒä¾èµ–ï¼š</span></span><br><span class="line">$ pipenv install pytest --dev</span><br></pre></td></tr></table></figure>

<h4 id="5-å®ä¾‹äºŒ"><a href="#5-å®ä¾‹äºŒ" class="headerlink" title="5 å®ä¾‹äºŒ"></a>5 å®ä¾‹äºŒ</h4><p>ç›®æ ‡</p>
<ul>
<li>vscode é…ç½®</li>
</ul>
<p>å®ä¾‹ä¸€ä¸­ç›´æ¥è¿è¡Œï¼Œå·²ç»å®Œå…¨okï¼Œä½†æ˜¯å†™ä»£ç ï¼Œæˆ‘è¿˜æ˜¯ä¸ä¼šé€‰æ‹©æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œï¼Œï¼Œ</p>
<p>æ‰“å¼€vscodeï¼Œãƒ¾(ï½¡ï½€Ğ”Â´ï½¡)æˆ‘æ“¦ï¼Œæ‰¾ä¸åˆ°requests,æ€è€ƒç‰‡åˆ»ï¼Œå› ä¸ºsetting.jsonä¸­å·²ç»é…ç½®äº†pythonè§£é‡Šå™¨ã€ç³»ç»Ÿçº§åˆ«çš„ã€‘ï¼›<br>ä½†æ˜¯<strong>ä¹‹åæˆ‘ä»¬éƒ½ä¸åœ¨è¿™ä¹ˆç©å„¿äº†ï¼Œæ¯•ç«Ÿä¼šä¹±çš„</strong><br>åŒæ ·å»ºè®®å†é¡¹ç›®ç›®å½•ä¸­é…ç½®å„è‡ªçš„é…ç½®é¡¹ç›®</p>
<p><img data-src="3.jpg" alt=""><br><img data-src="4.jpg" alt=""><br><img data-src="5.jpg" alt=""><br><img data-src="6.jpg" alt=""></p>
<p><strong>é…ç½®å®Œæ¯•</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hhw-4:pythonEnv hhw$ python3 test.py </span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;test.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    import requests</span><br><span class="line">ModuleNotFoundError: No module named &#39;requests&#39;</span><br><span class="line">hhw-4:pythonEnv hhw$ pipenv run python test.py </span><br><span class="line">ä½ çš„ IP åœ°å€æ˜¯ 112.64.61.61, 112.64.61.61</span><br></pre></td></tr></table></figure>

<p>ä¸€ç›´æ²¡æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å›¾æ¥æè¿°pipenvâ€¦</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/06/01/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/01/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹å°è£…ç»§æ‰¿å¤šæ€ã€15ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-06-01 10:38:59" itemprop="dateCreated datePublished" datetime="2019-06-01T10:38:59+08:00">2019-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>æ¸©æ•…é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§<ul>
<li>Pythonçš„ç§æœ‰æ˜¯çœŸçš„å—ï¼Ÿ</li>
<li>Pythonçš„å¤šç»§æ‰¿æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
</li>
<li>äº†è§£ä¸‹é­”æ–¹æ–¹æ³•</li>
</ul>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-é­”æ³•æ–¹æ³•"><a href="#ç¬¬ä¸€éƒ¨åˆ†-é­”æ³•æ–¹æ³•" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† é­”æ³•æ–¹æ³•"></a>ç¬¬ä¸€éƒ¨åˆ† é­”æ³•æ–¹æ³•</h3><p>ç›¸ä¿¡æˆ‘ä»¬åˆå­¦è€…éƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸‹è¾¹çš„æ„æ€æ˜¯å•¥ï¼Ÿï¼Ÿä¸ºå•¥è¦å†™è¿™ä¸ªï¼Ÿ</p>
<blockquote>
<p>åæ­£æˆ‘æ˜¯å…ˆå¿½ç•¥è¿™ä¸ªé—®é¢˜ï¼Œæ‰“ç®—åœ¨å­¦çš„è¿‡ç¨‹ä¸­æ…¢æ…¢æ˜ç™½ğŸ˜†</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span> :</span><br></pre></td></tr></table></figure>

<p><a href="https://www.zhihu.com/question/49136398/answer/114438004" target="_blank" rel="noopener">çŸ¥ä¹çš„å›ç­”</a>ï¼š<br><code>__name__</code> æ˜¯å½“å‰æ¨¡å—åï¼Œå½“æ¨¡å—è¢«ç›´æ¥è¿è¡Œæ—¶æ¨¡å—åä¸º <code>__main__</code> ã€‚è¿™å¥è¯çš„æ„æ€å°±æ˜¯ï¼Œ<strong>å½“æ¨¡å—è¢«ç›´æ¥è¿è¡Œæ—¶ï¼Œä»¥ä¸‹ä»£ç å—å°†è¢«è¿è¡Œï¼Œå½“æ¨¡å—æ˜¯è¢«å¯¼å…¥æ—¶ï¼Œä»£ç å—ä¸è¢«è¿è¡Œã€‚</strong></p>
<p>è¿˜æœ‰å¾ˆå¤šç±»ä¼¼çš„ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">__init__ :      æ„é€ å‡½æ•°ï¼Œåœ¨ç”Ÿæˆå¯¹è±¡æ—¶è°ƒç”¨</span><br><span class="line">__del__ :       ææ„å‡½æ•°ï¼Œé‡Šæ”¾å¯¹è±¡æ—¶ä½¿ç”¨</span><br><span class="line">__repr__ :      æ‰“å°ï¼Œè½¬æ¢</span><br><span class="line">__setitem__ :   æŒ‰ç…§ç´¢å¼•èµ‹å€¼</span><br><span class="line">__getitem__:    æŒ‰ç…§ç´¢å¼•è·å–å€¼</span><br><span class="line">__len__:        è·å¾—é•¿åº¦</span><br><span class="line">__cmp__:        æ¯”è¾ƒè¿ç®—</span><br><span class="line">__call__:       è°ƒç”¨</span><br><span class="line">__add__:        åŠ è¿ç®—</span><br><span class="line">__sub__:        å‡è¿ç®—</span><br><span class="line">__mul__:        ä¹˜è¿ç®—</span><br><span class="line">__div__:        é™¤è¿ç®—</span><br><span class="line">__mod__:        æ±‚ä½™è¿ç®—</span><br><span class="line">__pow__:        å¹‚</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å®ä¾‹ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">'ABC'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ABC'</span>.__len__()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"æˆ‘è¢«å›æ”¶äº†ï¼"</span>)</span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="keyword">del</span> obj</span><br></pre></td></tr></table></figure>


<blockquote>
<p>ç­‰ç”¨åˆ°äº†ï¼Œå†çœ‹ä¸‹ ğŸ˜†</p>
</blockquote>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-å°è£…ç»§æ‰¿å¤šæ€"><a href="#ç¬¬äºŒéƒ¨åˆ†-å°è£…ç»§æ‰¿å¤šæ€" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† å°è£…ç»§æ‰¿å¤šæ€"></a>ç¬¬äºŒéƒ¨åˆ† å°è£…ç»§æ‰¿å¤šæ€</h3><p><strong>å°è£…</strong><br>å°è£…ï¼šå°†å†…éƒ¨å®ç°åŒ…è£¹èµ·æ¥ï¼Œå¯¹å¤–é€æ˜ï¼Œæä¾›apiæ¥å£è¿›è¡Œè°ƒç”¨çš„æœºåˆ¶</p>
<p>ä¼˜ç‚¹ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. å°†å˜åŒ–éš”ç¦»ï¼›</span><br><span class="line">2. ä¾¿äºä½¿ç”¨ï¼›</span><br><span class="line">3. æé«˜å¤ç”¨æ€§ï¼›</span><br><span class="line">4. æé«˜å®‰å…¨æ€§ï¼›</span><br></pre></td></tr></table></figure>

<p><strong>åŸåˆ™</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. å°†ä¸éœ€è¦å¯¹å¤–æä¾›çš„å†…å®¹éƒ½éšè—èµ·æ¥ï¼›</span><br><span class="line">2. æŠŠå±æ€§éƒ½éšè—ï¼Œæä¾›å…¬å…±æ–¹æ³•å¯¹å…¶è®¿é—®ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç»§æ‰¿</strong><br>å³ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼ˆderived classï¼‰ç»§æ‰¿çˆ¶ç±»ï¼ˆbase classï¼‰çš„å˜é‡å’Œæ–¹æ³•ã€‚</p>
<p><strong>å¤šæ€ï¼š</strong>æ ¹æ®å¯¹è±¡ç±»å‹çš„ä¸åŒä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p>
<p>å‰æï¼šâ‘ ç±»çš„ç»§æ‰¿å…³ç³» â‘¡è¦æœ‰æ–¹æ³•é‡å†™ã€‚</p>
<p><strong>çˆ¶ç±»æ›¿æ¢å­ç±»</strong>ï¼š super(å­ç±»å, self).æ–¹æ³•å()</p>
<blockquote>
<p>ä»¥ä¸Šæ¦‚å¿µå°†é€šè¿‡ä»¥ä¸‹å‡ ä¸ªå®ä¾‹æ¥è¯´æ˜ï¼š</p>
</blockquote>
<h4 id="å®ä¾‹ä¸€-åŸºæœ¬ã€ç»§æ‰¿"><a href="#å®ä¾‹ä¸€-åŸºæœ¬ã€ç»§æ‰¿" class="headerlink" title="å®ä¾‹ä¸€ åŸºæœ¬ã€ç»§æ‰¿"></a>å®ä¾‹ä¸€ åŸºæœ¬ã€ç»§æ‰¿</h4><p><strong>é¦–å…ˆè¯•ç€ä¸‹è¾¹çš„ä¸‰ä¸ªé—®é¢˜ä¸ä»£ç çš„ç»“æœ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> Pythonçš„ç§æœ‰æ–¹æ³•çœŸçš„ç§æœ‰å—ï¼Ÿ</span><br><span class="line"><span class="number">2.</span> Pythonå¤–éƒ¨æ˜¯å¦å¯ä»¥æ›´æ”¹ç§æœ‰å±æ€§ï¼Ÿ</span><br><span class="line"><span class="number">3.</span> å…³é”®å­—propertyæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰åŸºç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, sex, age)</span>:</span></span><br><span class="line">        self.age = age</span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸€ä¸ªç§æœ‰å˜é‡</span></span><br><span class="line">        self.__sex = sex</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"æ€§åˆ«ï¼š%s å¹´é¾„ï¼š%d "</span> % (self.__sex, self.age))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">base = Person(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">print(base.speak())</span><br><span class="line">print(base.age)</span><br><span class="line"><span class="comment"># è°ƒç”¨ç§ç”¨å˜é‡ï¼š _ç±»å__å±æ€§</span></span><br><span class="line">print(base._Person__sex)</span><br><span class="line"><span class="comment"># print(base.__sex)</span></span><br><span class="line"><span class="comment"># AttributeError: 'Person' object has no attribute '__sex'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"===ä»¥ä¸ŠåŒºåˆ†è°ƒç”¨å˜é‡===="</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(Person)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, sex, age, name)</span>:</span></span><br><span class="line">        <span class="comment"># è°ƒç”¨çˆ¶ç±»çš„å®ä¾‹åŒ–æ–¹æ³•</span></span><br><span class="line">        Person.__init__(self, sex, age)</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hide</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'ç¤ºèŒƒéšè—çš„hideæ–¹æ³•'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getHeight</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__height</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setetHeight</span><span class="params">(self, height)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> height &lt;= <span class="number">0</span> <span class="keyword">or</span> height &gt; <span class="number">300</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'èº«é«˜å¿…é¡»åœ¨0ï½300cmä¹‹é—´'</span>)</span><br><span class="line">        self.__height = height</span><br><span class="line"></span><br><span class="line">    <span class="comment"># property å°†geter seterå®ä¾‹ä¸ºç±»å˜é‡</span></span><br><span class="line">    height = property(getHeight, setetHeight)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºUserå¯¹è±¡</span></span><br><span class="line">u = User(<span class="string">"ç”·"</span>, <span class="number">20</span>, <span class="string">"Python"</span>)</span><br><span class="line">print(u.name)</span><br><span class="line"><span class="comment">#  seter æ–¹æ³•è¿‡æ»¤åˆ¤æ–­</span></span><br><span class="line"><span class="comment"># u.height = 0</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">File "class.1.py", line 47, in &lt;module&gt;</span></span><br><span class="line"><span class="string">    u.height = 0</span></span><br><span class="line"><span class="string">  File "class.1.py", line 37, in setetHeight</span></span><br><span class="line"><span class="string">    raise ValueError('èº«é«˜å¿…é¡»åœ¨0ï½300cmä¹‹é—´'</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment"># èµ°setteræ–¹æ³•</span></span><br><span class="line">u.height = <span class="number">1</span></span><br><span class="line">print(u.height)</span><br><span class="line"><span class="comment"># ç›´æ¥æ›´æ”¹å†…éƒ¨å˜é‡</span></span><br><span class="line">u._User__height = <span class="number">0</span></span><br><span class="line">print(u._User__height)</span><br><span class="line">print(u.height)</span><br></pre></td></tr></table></figure>

<p><strong>å…¶å®ä¹Ÿä¸éš¾</strong></p>
<blockquote>
<p>ç»“æœ</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æ€§åˆ«ï¼š<span class="number">1</span> å¹´é¾„ï¼š<span class="number">100</span> </span><br><span class="line"><span class="comment"># ä¸ºä½•æ˜¯æ‰“å°None?</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">===ä»¥ä¸ŠåŒºåˆ†è°ƒç”¨å˜é‡====</span><br><span class="line">Python</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<h4 id="å®ä¾‹äºŒ-å¤šç»§æ‰¿"><a href="#å®ä¾‹äºŒ-å¤šç»§æ‰¿" class="headerlink" title="å®ä¾‹äºŒ å¤šç»§æ‰¿"></a>å®ä¾‹äºŒ å¤šç»§æ‰¿</h4><p>è¯¥éƒ¨åˆ†æ‘˜å½•è‡ª<a href="https://hanjianwei.com/2013/07/25/python-mro/" target="_blank" rel="noopener">Pythonçš„æ–¹æ³•è§£æé¡ºåº(MRO)</a></p>
<p>å…ˆæ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å¤šç»§æ‰¿é¡ºåºçš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Pythonä¸­<strong>MRO</strong>çš„ä¸‰ç§æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡å—inspectï¼šæ£€æŸ¥è¿è¡Œæ¨¡å—çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"A.show()"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"C.show()"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># __mro__ ç­‰ä»·äº inspect.getmro</span></span><br><span class="line"><span class="comment"># print(D.__mro__)</span></span><br><span class="line">print(inspect.getmro(D))</span><br><span class="line">x = D()</span><br><span class="line">x.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="3.svg" alt="è±å½¢"></p>
<p>æŒ‰ç…§æ·±åº¦éå†ï¼Œå…¶é¡ºåºä¸º <strong>[D, B, A, object, C, A, object]</strong>ï¼Œé‡å¤ç±»åªä¿ç•™æœ€åä¸€ä¸ªï¼Œå› æ­¤å˜ä¸º <strong>[D, B, C, A, object]</strong>ã€‚</p>
<p><strong>ç»“æœæ˜¯</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)</span><br><span class="line">C.show()</span><br></pre></td></tr></table></figure>


<blockquote>
<p>Python è‡³å°‘æœ‰ä¸‰ç§ä¸åŒçš„ MROï¼š</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ç»å…¸ç±»ï¼ˆclassic <span class="class"><span class="keyword">class</span>ï¼‰çš„æ·±åº¦éå†ã€‚</span></span><br><span class="line"><span class="class">2. <span class="title">Python</span> 2.2 çš„æ–°å¼ç±»ï¼ˆ<span class="title">new</span>-<span class="title">style</span> <span class="title">class</span>ï¼‰é¢„è®¡ç®—ã€‚</span></span><br><span class="line"><span class="class">3. <span class="title">Python</span> 2.3 çš„æ–°å¼ç±»çš„ <span class="title">C3</span> ç®—æ³•ã€‚å®ƒä¹Ÿæ˜¯ <span class="title">Python</span> 3 å”¯ä¸€æ”¯æŒçš„æ–¹å¼ã€‚</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç»å…¸ç±»</li>
</ol>
<p>ç»å…¸ç±»çš„éå†é¡ºåºä¸ºï¼š ä»å·¦è‡³å³çš„æ·±åº¦ä¼˜å…ˆéå†ã€‚ä»¥ä¸Šè¿°ã€Œè±å½¢ç»§æ‰¿ã€ä¸ºä¾‹ï¼Œå…¶æŸ¥æ‰¾é¡ºåºä¸º [D, B, A, C, A]ï¼Œå¦‚æœåªä¿ç•™é‡å¤ç±»çš„ç¬¬ä¸€ä¸ªåˆ™ç»“æœä¸º <strong>[D, B, A, C]</strong></p>
<ol start="2">
<li><p>2.2 æ–°å¼ç±»çš„æ‰§è¡Œç»“æœ<code>å¦‚ä¸Šä¾‹å­æ‰€ç¤º</code>ï¼Œä½†å…¶ä¸­æœ‰é—®é¢˜ï¼Œ</p>
</li>
<li><p>C3 ç°åœ¨Pythoné‡‡ç”¨çš„æ–¹å¼</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å­</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(object)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(object)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">F</span><span class="params">(object)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(D, E)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(D, F)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.__mro__</span><br><span class="line">(&lt;class '__main__.A'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.F'&gt;, &lt;type 'object'&gt;)</span><br></pre></td></tr></table></figure>

<p><img data-src="4.svg" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">L[object] = [object]</span><br><span class="line">L[D] = [D, object]</span><br><span class="line">L[E] = [E, object]</span><br><span class="line">L[F] = [F, object]</span><br><span class="line">L[B] = [B, D, E, object]</span><br><span class="line">L[C] = [C, D, F, object]</span><br><span class="line">L[A] = [A] + merge(L[B], L[C], [B], [C])</span><br><span class="line">     = [A] + merge([B, D, E, object], [C, D, F, object], [B], [C])</span><br><span class="line">     = [A, B] + merge([D, E, object], [C, D, F, object], [C])</span><br><span class="line">     = [A, B, C] + merge([D, E, object], [D, F, object])</span><br><span class="line">     = [A, B, C, D] + merge([E, object], [F, object])</span><br><span class="line">     = [A, B, C, D, E] + merge([object], [F, object])</span><br><span class="line">     = [A, B, C, D, E, F] + merge([object], [object])</span><br><span class="line">     = [A, B, C, D, E, F, object]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯´å®åœ¨çš„æ²¡çœ‹æ‡‚</p>
<blockquote>
<p>æœ€è¿‘æ²¡æ›´æ–°ï¼Œæ˜¯åœ¨æ‰¾å­¦æ•°å­¦æ–¹é¢çš„èµ„æºï¼Œ<br>å¾ˆå¼€å¿ƒï¼Œæ­£åœ¨å­¦</p>
</blockquote>
</blockquote>
<h4 id="å®ä¾‹ä¸‰-å¤šæ€"><a href="#å®ä¾‹ä¸‰-å¤šæ€" class="headerlink" title="å®ä¾‹ä¸‰ å¤šæ€"></a>å®ä¾‹ä¸‰ å¤šæ€</h4><blockquote>
<p>è¿™ä¸ªä¼¼ä¹å¾ˆå¥½ç†è§£</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kind</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"i am animal"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kind</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"i am a dog"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kind</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"i am a cat"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªanimalå‚æ•°ï¼Œå¹¶è°ƒç”¨å®ƒçš„kindæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_kind</span><span class="params">(animal)</span>:</span></span><br><span class="line">    animal.kind()</span><br><span class="line"></span><br><span class="line">d = Dog()</span><br><span class="line">c = Cat()</span><br><span class="line"></span><br><span class="line">show_kind(d)</span><br><span class="line">show_kind(c)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">i am a dog</span></span><br><span class="line"><span class="string">i am a cat</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>


<h4 id="å®ä¾‹å››-super"><a href="#å®ä¾‹å››-super" class="headerlink" title="å®ä¾‹å›› super"></a>å®ä¾‹å›› super</h4><p>å¦‚æœæƒ³<strong>è®©çˆ¶ç±»æ›¿æ¢å­ç±»</strong>ï¼Œé‚£ä¹ˆæ—¢å¯ä»¥ç”¨super()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        print(<span class="string">"çˆ¶ç±»çš„__init__æ–¹æ³•è¢«æ‰§è¡Œäº†ï¼"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"çˆ¶ç±»çš„showæ–¹æ³•è¢«æ‰§è¡Œäº†ï¼"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></span><br><span class="line">        <span class="comment"># super(å­ç±»å, self).æ–¹æ³•å()</span></span><br><span class="line">        super(B, self).__init__(name=name)</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(B, self).show()</span><br><span class="line"></span><br><span class="line">obj = B(<span class="string">"jack"</span>, <span class="number">18</span>)</span><br><span class="line">obj.show()</span><br></pre></td></tr></table></figure>




<p>å‚è€ƒé“¾æ¥</p>
<p><a href="https://hanjianwei.com/2013/07/25/python-mro/" target="_blank" rel="noopener">Pythonçš„æ–¹æ³•è§£æé¡ºåº(MRO)</a></p>
<p><a href="https://www.cnblogs.com/geekmao/p/7576441.html" target="_blank" rel="noopener">å›¾è§£Python ã€ç¬¬å…­ç¯‡ã€‘ï¼šé¢å‘å¯¹è±¡-ç±»-è¿›é˜¶ç¯‡</a><br><a href="https://blog.csdn.net/yanbober/article/details/8713250" target="_blank" rel="noopener">å †æ ˆ</a><br><a href="https://www.cnblogs.com/geaozhang/p/7111961.html" target="_blank" rel="noopener">å†…å­˜ç®¡ç†</a><br><a href="https://blog.csdn.net/onlyanyz/article/details/45605773" target="_blank" rel="noopener">å†…å­˜</a><br><a href="http://stor.51cto.com/art/201901/591039.htm" target="_blank" rel="noopener">æ·±å…¥å†…å­˜</a><br><a href="https://blog.csdn.net/secretx/article/details/81100920" target="_blank" rel="noopener">pythonå†…å­˜ç®¡ç†â€“åˆ†å±‚åˆ†é…ã€‘</a><br><a href="https://zhuanlan.zhihu.com/p/40809619" target="_blank" rel="noopener">å†…å­˜</a></p>
<p><a href="https://hanjianwei.com/2013/07/25/python-mro/" target="_blank" rel="noopener">Pythonçš„æ–¹æ³•è§£æé¡ºåº(MRO)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/24/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/24/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹é¢å‘å¯¹è±¡ç¼–ç¨‹ã€14ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-24 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-24T10:38:59+08:00">2019-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <img data-src="1.png" width="50%" height="50%" align=center />
æ‘˜è¦å†…å®¹......
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/05/24/index/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/19/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/19/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹è£…é¥°å™¨ã€12ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-19 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-19T10:38:59+08:00">2019-05-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.3k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img data-src="cheap.png" alt=""></p>
<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>æ¸©æ•…å‡½æ•°å¾ˆå¤šæ¦‚å¿µ</li>
<li>æŒæ¡ Python è£…é¥°å™¨</li>
</ul>
<blockquote>
<p>å¦‚æœèƒ½å‡†ç¡®çš„è¡¨è¿°ä¸‹ä¾§ä»£ç çš„ç»“æœ</p>
<p>å°±ä¸ç”¨å¾€ä¸‹çœ‹å•¦ï¼Œæƒ³å¿…ä½ å·²ç»æŒæ¡äº† Python è£…é¥°å™¨</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"1"</span>)</span><br><span class="line">        print(<span class="string">"foo---%s"</span> % func)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"2"</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"3"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"4"</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"===foo===="</span>)</span><br><span class="line">print(foo)</span><br><span class="line">print(<span class="string">"===foo()===="</span>)</span><br><span class="line">print(foo())</span><br><span class="line">print(<span class="string">"===outer(foo)===="</span>)</span><br><span class="line">print(outer(foo))</span><br><span class="line">print(<span class="string">"===outer(foo())===="</span>)</span><br><span class="line">print(outer(foo()))</span><br><span class="line">print(<span class="string">"===outer(foo())()===="</span>)</span><br><span class="line">print(outer(foo())())</span><br></pre></td></tr></table></figure>

<p>å…ˆè®¤çœŸå›å¿†ä¸‹ä¹‹å‰å‡½æ•°çš„ç›¸å…³ç« èŠ‚å†…å®¹<br><strong>ä¸éš¾ä½†å¯èƒ½æœ‰ç‚¹ç»•</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">===foo====</span><br><span class="line">&lt;<span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="title">at</span> 0<span class="title">x7fcae64dbea0</span>&gt;</span></span><br><span class="line"><span class="function">===<span class="title">foo</span>(<span class="params"></span>)====</span></span><br><span class="line"><span class="function">3</span></span><br><span class="line"><span class="function">4</span></span><br><span class="line"><span class="function">===<span class="title">outer</span>(<span class="params">foo</span>)====</span></span><br><span class="line"><span class="function">&lt;<span class="title">function</span> <span class="title">outer</span>.&lt;<span class="title">locals</span>&gt;.<span class="title">inner</span> <span class="title">at</span> 0<span class="title">x7fcae64dbe18</span>&gt;</span></span><br><span class="line"><span class="function">===<span class="title">outer</span>(<span class="params">foo(</span>))====</span></span><br><span class="line"><span class="function">3</span></span><br><span class="line"><span class="function">&lt;<span class="title">function</span> <span class="title">outer</span>.&lt;<span class="title">locals</span>&gt;.<span class="title">inner</span> <span class="title">at</span> 0<span class="title">x7fcae645d598</span>&gt;</span></span><br><span class="line"><span class="function">===<span class="title">outer</span>(<span class="params">foo(</span>))(<span class="params"></span>)====</span></span><br><span class="line"><span class="function">3</span></span><br><span class="line"><span class="function">1</span></span><br><span class="line"><span class="function"><span class="title">foo</span>---4</span></span><br><span class="line"><span class="function">2</span></span><br></pre></td></tr></table></figure>

<p>æ²¡ç­”å‡ºæ¥ï¼Œæˆ–å¯¹è£…é¥°å™¨æœ‰ç–‘æƒ‘ï¼Œé‚£å°±å³å¯å¼€å§‹å§</p>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-å‰å¥"><a href="#ç¬¬ä¸€éƒ¨åˆ†-å‰å¥" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† å‰å¥"></a>ç¬¬ä¸€éƒ¨åˆ† å‰å¥</h3><p>é’ˆå¯¹äºå¼€å¤´çš„é‚£å—ä»£ç é€æ­¥åˆ†æä¸‹ï¼Œç©¶ç«Ÿå†å†…å­˜ä¸­æ˜¯<code>å¦‚ä½•è¿è¡Œçš„â“</code> <code>æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆâ“</code></p>
<p><strong>å¼ºçƒˆæ¨èç½‘å€ï¼š<a href="http://pythontutor.com/live.html#mode=edit" target="_blank" rel="noopener">ä»£ç å¯è§†åŒ–æ‰§è¡Œè¿‡ç¨‹</a></strong></p>
<p>è¿™å‡ è¡Œä»£ç ä¸»è¦ä¸ºäº†åŠ æ·±ç†è§£ä»£ç çš„<code>æ‰§è¡Œè¿‡ç¨‹</code>ã€<code>å‡½æ•°å</code>ã€<code>å‡½æ•°è°ƒç”¨</code>ç­‰ç­‰</p>
<p><code>ç»“åˆä»£ç ä¸ä¸‹ä¾§å›¾ç¤º</code>ï¼Œé‡æ¸©é‚£äº›æˆ‘ä»¬ä¹ ä»¥ä¸ºå¸¸çš„ä¸œè¥¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"1"</span>)</span><br><span class="line">        print(<span class="string">"foo---%s"</span> % func)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"2"</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"3"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"4"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å‡½æ•° outerã€foo åŠ è½½åˆ°å†…å­˜ä¸­</span></span><br><span class="line"><span class="comment"># ä»¥ä¸Šä»£ç åˆ°æ­¤è¡Œï¼Œæœªæ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"===foo===="</span>)</span><br><span class="line"><span class="comment"># fooã€å‡½æ•°åã€‘ï¼›</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šå¯¹åº”çš„ã€å‡½æ•°ä¿¡æ¯ã€‘ï¼›è¿”å›ï¼šğŸˆšï¸</span></span><br><span class="line">print(foo)</span><br><span class="line">print(<span class="string">"===foo()===="</span>)</span><br><span class="line"><span class="comment"># çœŸæ­£æ‰§è¡Œ fooå‡½æ•°</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šæ‰“å° 3ï¼› è¿”å› 4</span></span><br><span class="line">print(foo())</span><br><span class="line">print(<span class="string">"===outer(foo)===="</span>)</span><br><span class="line"><span class="comment"># å°†ã€fooå‡½æ•°åã€‘ä¼ ç»™ã€outerå‡½æ•°ã€‘ï¼Œå‚æ•°ä¸º ã€å‡½æ•°åã€‘</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šå°†inneråŠ è½½åˆ°å†…å­˜ï¼Œè¿”å›ï¼šğŸˆšï¸</span></span><br><span class="line">print(outer(foo))</span><br><span class="line">print(<span class="string">"===outer(foo())===="</span>)</span><br><span class="line"><span class="comment"># è°ƒç”¨ã€fooå‡½æ•°ã€‘ï¼Œå°†4ä½œä¸ºå‚æ•°ä¼ ç»™ä¼ ç»™ã€outerå‡½æ•°ã€‘</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šæ‰“å°3 è¿”å›4ï¼Œ æ‰“å°outerå‡½æ•°çš„è¿”å›å€¼ innerå†…å­˜ä¿¡æ¯</span></span><br><span class="line">print(outer(foo()))</span><br><span class="line">print(<span class="string">"===outer(foo())()===="</span>)</span><br><span class="line"><span class="comment"># è°ƒç”¨ã€fooå‡½æ•°ã€‘ï¼Œå°†4ä½œä¸ºå‚æ•°ä¼ ç»™ä¼ ç»™ã€outerå‡½æ•°ã€‘ï¼Œè°ƒç”¨innerå‡½æ•°</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šæ‰“å°3 è¿”å›4ï¼Œè¿›è€Œæ‰“å° 1 ã€ 4ã€func()]ã€2ä»¥åŠinnerçš„è¿”å›å€¼2</span></span><br><span class="line"><span class="comment"># overï¼ï¼ï¼</span></span><br><span class="line">print(outer(foo())())</span><br></pre></td></tr></table></figure>

<p>æˆ‘è§‰å¾—ï¼Œå…ˆæŠŠè¿™äº›çœ‹ä¼¼ç®€å•çš„ä¸œè¥¿ç†æ¸…æ¥šï¼Œå¯¹æ¥ä¸‹æ¥ï¼Œè£…é¥°å™¨çš„ç†è§£æ›´å®¹æ˜“äº›</p>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-è£…é¥°å™¨ã€åŸºç¡€ã€‘"><a href="#ç¬¬äºŒéƒ¨åˆ†-è£…é¥°å™¨ã€åŸºç¡€ã€‘" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† è£…é¥°å™¨ã€åŸºç¡€ã€‘"></a>ç¬¬äºŒéƒ¨åˆ† è£…é¥°å™¨ã€åŸºç¡€ã€‘</h3><h4 id="1-è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"><a href="#1-è£…é¥°å™¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="1 è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"></a>1 è£…é¥°å™¨æ˜¯ä»€ä¹ˆ</h4><p>è£…é¥°å™¨ï¼ˆDecoratorï¼‰ï¼šå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºè¢«è£…é¥°çš„å¯¹è±¡å¢åŠ æ–°çš„åŠŸèƒ½æˆ–è€…é™„åŠ é™åˆ¶æ¡ä»¶æˆ–è€…å¸®åŠ©è¾“å‡ºã€‚<strong>åŸåˆ™ï¼šå¼€æ”¾å°é—­</strong></p>
<p><strong>åˆ†ç±»</strong></p>
<ol>
<li>å‡½æ•°è£…é¥°å™¨ï¼›</li>
<li>ç±»çš„è£…é¥°å™¨ã€‚</li>
</ol>
<p>æœ€è¿‘å…¬å¸ä¹Ÿåœ¨ç”¨è£…é¥°å™¨ï¼Œä¸è¿‡æ˜¯å† Nodejs ä¸­ç”¨çš„ï¼›<br>ä¸¾ä¸ªåˆ«çš„ä¾‹å­ã€‚å› ä¸ºæŸç§åŸå› ï¼Œéœ€è¦å¯¹æ¯ä¸ªæ¥å£è¿›è¡Œ<strong>è®¤è¯</strong>ã€<strong>è®°å½•æ—¥å¿—</strong>ï¼Œå¦‚ä½•å¿«é€Ÿé«˜æ•ˆçš„å®ç°è¿™æ ·çš„éœ€æ±‚ â“</p>
<p><code>å¯èƒ½æœ‰å‡ ç§æ€è·¯</code></p>
<ul>
<li>åœ¨åŸºç±»ä¸­å†™ç›¸åº”çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰çš„è¯ï¼›</li>
<li>å†™ä¸¤ä¸ªå‡½æ•°ã€è®¤è¯çš„ã€æ—¥å¿—çš„ã€‘ï¼Œåœ¨æ¯ä¸ªæ¥å£ä¸­æ·»åŠ ï¼›</li>
<li>ç­‰ç­‰æ€è·¯</li>
</ul>
<h4 id="2-ç®€å•çš„è£…é¥°å™¨"><a href="#2-ç®€å•çš„è£…é¥°å™¨" class="headerlink" title="2 ç®€å•çš„è£…é¥°å™¨"></a>2 ç®€å•çš„è£…é¥°å™¨</h4><p>ä½†ä»Šå¤©åªèƒ½é€‰<strong>è£…é¥°å™¨</strong>ï¼Œå› ä¸ºä¸èƒ½åç¦»ä¸»é¢˜å•¦ï¼Œæè¿°äº†éœ€æ±‚å°±å¼€å§‹å¹²å§ï¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    print(<span class="string">"è£…é¥°å™¨å¯åŠ¨,è‡ªåŠ¨æ‰§è¡Œ"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"ç»Ÿä¸€è®¤è¯"</span>)</span><br><span class="line">        result = func()</span><br><span class="line">        print(<span class="string">"è®°å½•æ—¥å¿—ä¿¡æ¯"</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"æ¥å£1"</span>)</span><br><span class="line">f1()</span><br></pre></td></tr></table></figure>

<p>è¿”å›å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è£…é¥°å™¨å¯åŠ¨,è‡ªåŠ¨æ‰§è¡Œ</span><br><span class="line">ç»Ÿä¸€è®¤è¯</span><br><span class="line">æ¥å£<span class="number">1</span></span><br><span class="line">è®°å½•æ—¥å¿—ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<p>å¤§è‡´å’Œç¬¬ä¸€éƒ¨åˆ†çš„ä¾‹å­æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯</p>
<ol>
<li>inner å‡½æ•°è¿”å›äº†ä¸ªå‡½æ•°</li>
<li>å¤šä¸ª<code>@outer</code></li>
</ol>
<p>@outer ä¸­çš„<code>@</code>æ˜¯æ³¨è§£è¯­æ³•ç³–ï¼›<strong>æŠŠ f1 ä½œä¸ºå‚æ•°ä¼ ç»™ outer</strong>,ä»Šå„¿æ»¡è¶³æˆ‘ä»¬çš„<code>å¼€æ”¾å°é—­çš„åŸåˆ™</code>;</p>
<p>å…¶è§£é‡Šå™¨ä¼šè§£é‡Šæˆä¸‹é¢è¿™æ ·çš„è¯­å¥ï¼š<br><strong>*@outer &lt;=&gt; outer(f1)</strong></p>
<p>ç¿»è¯‘æˆå‡½æ•°è°ƒç”¨, æˆ‘ä»¬ç”¨æ–°çš„ä¾‹å­æ¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯ä¸‹ä¾§è¿™æ ·çš„</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"æ¥å£2"</span>)</span><br><span class="line">outer(f2)()</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">è£…é¥°å™¨å¯åŠ¨,è‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line"><span class="string">ç»Ÿä¸€è®¤è¯</span></span><br><span class="line"><span class="string">æ¥å£1</span></span><br><span class="line"><span class="string">è®°å½•æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p>äº†è§£äº†ä¸Šè¿°çš„è°ƒç”¨å«ä¹‰ï¼Œ <strong>@outer &lt;=&gt; outer(f1)</strong></p>
<blockquote>
<p>æ³¨ï¼š ä¼ çš„åªæ˜¯å‡½æ•°å</p>
</blockquote>
<p><img data-src="doc1.jpg" alt="è‡ªåŠ¨æ‰§è¡Œ"></p>
<p>æ•´ä½“çš„æµç¨‹</p>
<ol>
<li>è‡ªä¸Šè€Œä¸‹æ‰§è¡Œï¼Œå°†å‡½æ•°<code>outer</code>åœ¨å†…å­˜æ³¨å†Œï¼›</li>
<li>æ‰§è¡Œåˆ°@outer æ—¶ï¼Œå°†<code>å‡½æ•°åf1</code>ä½œä¸ºå‚æ•°ä¼ ç»™<code>@outer</code>;</li>
<li>è°ƒç”¨ outer å‡½æ•°ï¼Œæ‰§è¡Œæ‰“å°ã€è£…é¥°å™¨å¯åŠ¨,è‡ªåŠ¨æ‰§è¡Œã€‘ï¼›</li>
<li>å‡½æ•° inner åœ¨å†…å­˜æ³¨å†Œï¼Œå†…å­˜åœ°å€ï¼š<strong>[xxxx]</strong>ï¼Œè¿”å›ã€inner å‡½æ•°åã€‘ï¼Œ</li>
<li>å°†å‡½æ•°<code>f1</code>åœ¨å†…å­˜æ³¨å†Œï¼›å…¶å®æ˜¯ç›´æ¥æŒ‡å‘ <strong>[xxxx]</strong></li>
<li>è°ƒç”¨ f1(), ç›´æ¥è°ƒç”¨ç¬¬äº”æ­¥çš„ <strong>[xxxx]</strong>ï¼Œ ä¹Ÿå°±æ˜¯ç¬¬å››æ­¥çš„ï¼›</li>
<li>æ‰“å°ã€ç»Ÿä¸€è®¤è¯ã€‘ï¼›</li>
<li>result = func()<strong>æ‰§è¡Œå›è°ƒ</strong>ã€f1ã€‘å‡½æ•°, æ‰“å°ï¼šæ¥å£ 1ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œresult = None</li>
<li>å›åˆ°<code>inner()</code>,æ‰“å°<code>è®°å½•æ—¥å¿—ä¿¡æ¯</code>;</li>
<li>è¿”å› Noneï¼ŒOVER!</li>
</ol>
<p><code>æ³¨</code>ï¼šå®Œæ•´çš„æœ‰ 17 æ­¥ï¼ŒåŠ¨å›¾è¿˜ä¸ä¼šåˆ¶ä½œï¼Œå¯ä»¥å‰å¾€â€“&gt;<a href="http://pythontutor.com/live.html#mode=edit" target="_blank" rel="noopener">ä»£ç å¯è§†åŒ–ç½‘å€</a>**ï¼ŒæŸ¥çœ‹å®Œæ•´çš„æ­¥éª¤ã€‚</p>
<blockquote>
<p>å®åœ¨æ˜¯æƒ³ä¸å‡ºæ¥ï¼Œå¦‚ä½•ç”¨å›¾æ¥è¡¨ç¤ºè£…é¥°å™¨ï¼Œæœ‰ç›¸åº”çš„å›¾ç¤ºï¼Œè¯·ä»‹ç»ã€‚</p>
</blockquote>
<p>æ¯”è¾ƒå–œæ¬¢è¿™æ®µä»£ç , æŒºæœ‰æ„æ€çš„ã€‚O(âˆ©_âˆ©)O å“ˆå“ˆ~<br><a href="https://coolshell.cn/articles/11265.html" target="_blank" rel="noopener">æ¥æº</a></p>
<p>ä¼šè‡ªåŠ¨æ‰“å°ç»“æœï¼Œå› ä¸ºé‡‡ç”¨äº†è£…é¥°å™¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fuck</span><span class="params">(fn)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"fuck %s!"</span> % fn.__name__[::<span class="number">-1</span>].upper()</span><br><span class="line"></span><br><span class="line"><span class="meta">@fuck</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wfg</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸‰éƒ¨åˆ†-è£…é¥°å™¨ã€è¿›é˜¶ã€‘"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-è£…é¥°å™¨ã€è¿›é˜¶ã€‘" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† è£…é¥°å™¨ã€è¿›é˜¶ã€‘"></a>ç¬¬ä¸‰éƒ¨åˆ† è£…é¥°å™¨ã€è¿›é˜¶ã€‘</h3><p>å¦‚æœæ²¡æœ‰çœ‹æ˜ç™½ç¬¬äºŒéƒ¨åˆ†ï¼Œè¿˜æ˜¯è¿™å›å»ï¼Œæ²‰ä¸‹å¿ƒï¼Œä¸“æ³¨çš„ã€è®¤çœŸçš„è¯»ä¸‹å»ï¼ŒçœŸçš„ä¸éš¾ï¼Œå¥½å¥½åˆ†æä¸‹æµç¨‹ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œè¸©å®äº†ï¼</p>
<blockquote>
<p>åªä»‹ç»æœ€åŸºç¡€çš„ä»£ç ï¼Œå°±æ˜¯è€æµæ°“</p>
</blockquote>
<h4 id="1-å¤šä¸ªè£…é¥°å™¨"><a href="#1-å¤šä¸ªè£…é¥°å™¨" class="headerlink" title="1 å¤šä¸ªè£…é¥°å™¨"></a>1 å¤šä¸ªè£…é¥°å™¨</h4><p><a href="https://blog.csdn.net/u013411246/article/details/80571462" target="_blank" rel="noopener">ä¸‹ä¾§ä»£ç æ¥æº</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å½“æœ‰å¤šä¸ªè£…é¥°å™¨è£…é¥°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä»–ä»¬çš„æ‰§è¡Œé¡ºåº</span></span><br><span class="line"><span class="comment">#è§‚å¯Ÿä¸‹æ–¹çš„ä»£ç å°±ä¼šå‘ç°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_a</span><span class="params">(func)</span>:</span></span><br><span class="line">    print(<span class="string">'Get in decorator_a'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_a</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">'Get in inner_a'</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner_a</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator_b</span><span class="params">(func)</span>:</span></span><br><span class="line">    print(<span class="string">'Get in decorator_b'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_b</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">'Get in inner_b'</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner_b</span><br><span class="line">  </span><br><span class="line"><span class="meta">@decorator_b</span></span><br><span class="line"><span class="meta">@decorator_a</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(<span class="string">'Get in f'</span>)</span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">f(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Get in decorator_a</span></span><br><span class="line"><span class="string">Get in decorator_b</span></span><br><span class="line"><span class="string">Get in inner_b</span></span><br><span class="line"><span class="string">Get in inner_a</span></span><br><span class="line"><span class="string">Get in f</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨æ—¶ï¼Œå‡½æ•°çš„é¡ºåº</p>
<ol>
<li>é¡ºåºç­‰åŒäº==&gt; <strong>decorator_b(decorator_a(f))</strong>,è¿”å›çš„æ˜¯inner_b,æ‰€ä»¥æ‰§è¡Œçš„æ—¶å€™æ˜¯å…ˆæ‰§è¡Œinner_b</li>
<li>ç„¶ååœ¨æ‰§è¡Œã€decorator_a(f)ã€‘è¿”å›çš„inner_a  .æœ€ç»ˆåœ¨è°ƒç”¨f(1)çš„æ—¶å€™ï¼Œå‡½æ•°inner_bè¾“å‡ºâ€™Get in inner_bâ€™</li>
<li>æ‰§è¡Œinner_aè¾“å‡ºGet in decorator_aï¼Œæœ€åæ‰§è¡Œfunc(),å³f</li>
</ol>
<h4 id="2-å¤šå‚å¤šè£…é¥°å™¨"><a href="#2-å¤šå‚å¤šè£…é¥°å™¨" class="headerlink" title="2 å¤šå‚å¤šè£…é¥°å™¨"></a>2 å¤šå‚å¤šè£…é¥°å™¨</h4><p>ä¸ºäº†æ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œè£…é¥°å™¨ï¼Œæ‘˜å½•<a href="https://coolshell.cn/articles/11265.html" target="_blank" rel="noopener">é…· å£³ åšå®¢</a>ä¸Šçš„ä¸€æ®µä»£ç ï¼Œå¥½åƒ<a href="https://wiki.python.org/moin/PythonDecoratorLibrary" target="_blank" rel="noopener">å®˜ç½‘å®ä¾‹ä»£ç </a>ä¹Ÿä¸å°‘;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeHtmlTag</span><span class="params">(tag, *args, **kwds)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">real_decorator</span><span class="params">(fn)</span>:</span></span><br><span class="line">        css_class = <span class="string">" class='&#123;0&#125;'"</span>.format(kwds[<span class="string">"css_class"</span>]) \</span><br><span class="line">                                     <span class="keyword">if</span> <span class="string">"css_class"</span> <span class="keyword">in</span> kwds <span class="keyword">else</span> <span class="string">""</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapped</span><span class="params">(*args, **kwds)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"&lt;"</span>+tag+css_class+<span class="string">"&gt;"</span> + fn(*args, **kwds) + <span class="string">"&lt;/"</span>+tag+<span class="string">"&gt;"</span></span><br><span class="line">        <span class="keyword">return</span> wrapped</span><br><span class="line">    <span class="keyword">return</span> real_decorator</span><br><span class="line"> </span><br><span class="line"><span class="meta">@makeHtmlTag(tag="b", css_class="bold_css")</span></span><br><span class="line"><span class="meta">@makeHtmlTag(tag="i", css_class="italic_css")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello world"</span></span><br><span class="line"> </span><br><span class="line">print(hello())</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&lt;b class='bold_css'&gt;&lt;i class='italic_css'&gt;hello world&lt;/i&gt;&lt;/b&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>


<h4 id="3-å†æ·±å…¥ä¸€äº›"><a href="#3-å†æ·±å…¥ä¸€äº›" class="headerlink" title="3 å†æ·±å…¥ä¸€äº›"></a>3 å†æ·±å…¥ä¸€äº›</h4><p>è¡¨ç¤ºè¿˜æ²¡æœ‰ç ”ç©¶è¿™æ®µä»£ç ï¼Œå…ˆåˆ†äº«å‡ºæ¥<br>æ‘˜å½•<a href="https://coolshell.cn/articles/11265.html" target="_blank" rel="noopener">é…· å£³ åšå®¢</a>ä¸Šçš„ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">memo</span><span class="params">(fn)</span>:</span></span><br><span class="line">    cache = &#123;&#125;</span><br><span class="line">    miss = object()</span><br><span class="line"> </span><br><span class="line"><span class="meta">    @wraps(fn)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args)</span>:</span></span><br><span class="line">        result = cache.get(args, miss)</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">is</span> miss:</span><br><span class="line">            result = fn(*args)</span><br><span class="line">            cache[args] = result</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"> </span><br><span class="line"><span class="meta">@memo</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure>


<p>Pythonå‡½æ•°å‘Šä¸€æ®µè½äº†</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/18/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/18/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹--åŒ¿åå‡½æ•°é—­åŒ…ã€11ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-18 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-18T10:38:59+08:00">2019-05-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>å­˜åœ¨å³åˆç†<br>æ­£å¦‚æ˜ç™½äº†<code>x += 1</code>ï¼Œå°±ä¼šå°½é‡é¿å…<code>x = x + 1</code>;</p>
</blockquote>
<h4 id="åè§‚ä¸€æœä¸€å¤§æŠŠå…³äºé—­åŒ…çš„æ–‡ç« ï¼Œæ— å¤–ä¹åªæ˜¯å‘Šè¯‰ä¸‰ç‚¹"><a href="#åè§‚ä¸€æœä¸€å¤§æŠŠå…³äºé—­åŒ…çš„æ–‡ç« ï¼Œæ— å¤–ä¹åªæ˜¯å‘Šè¯‰ä¸‰ç‚¹" class="headerlink" title="åè§‚ä¸€æœä¸€å¤§æŠŠå…³äºé—­åŒ…çš„æ–‡ç« ï¼Œæ— å¤–ä¹åªæ˜¯å‘Šè¯‰ä¸‰ç‚¹"></a>åè§‚ä¸€æœä¸€å¤§æŠŠå…³äºé—­åŒ…çš„æ–‡ç« ï¼Œæ— å¤–ä¹åªæ˜¯å‘Šè¯‰ä¸‰ç‚¹</h4><ul>
<li>æ™¦æ¶©éš¾æ‡‚çš„æ¦‚å¿µ</li>
<li>ç»™å‡ ä¸ªç®€å•çš„å®ä¾‹</li>
<li>ç»“æŸ<br>æˆ–è®¸è¿˜ä¼šç»™ä¸ªå»ºè®® <strong>å°‘ç”¨</strong></li>
</ul>
<blockquote>
<p>çœŸçš„æ˜¯è¿™æ ·ä¹ˆï¼Ÿ<br>æˆ‘æœç´¢äº†å¤§é‡çš„èµ„æ–™æ¥å†™è¿™ç¯‡æ–‡ç« ï¼Œåªæ˜¯æƒ³å°½åŠ›æŠŠè‡ªå·±è¯´æœã€è¯´æ˜äº†ã€‚</p>
</blockquote>
<p>ä¸‹è¾¹æœ‰ä¸‰åˆ°é¢˜ç›®ä»¥åŠç­”æ¡ˆ</p>
<ul>
<li>å¦‚æœä½ çš„é¢„æœŸå’Œç­”æ¡ˆä¸ç¬¦</li>
<li>å¦‚æœä½ çœ‹ä¸æ‡‚</li>
<li>å¦‚æœä½ å¥½å¥‡çš„æƒ³ä¸€æ¢ç©¶ç«Ÿ</li>
</ul>
<blockquote>
<p>è¯·ç»§ç»­</p>
<blockquote>
<p>å¦åˆ™å°±å¯ä»¥å…³é—­è¿™ä¸ªæ–‡ç« äº†</p>
</blockquote>
<blockquote>
<p>æ–‡ç« é•¿ä¸”å†…å®¹å¤š</p>
</blockquote>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€é¢˜ï¼Œæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">isPrime</span><span class="params">(start, stop)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> filter(<span class="keyword">lambda</span> x : <span class="keyword">not</span> [x % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, x) <span class="keyword">if</span> x % i == <span class="number">0</span>], range(start, stop + <span class="number">1</span>))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒé¢˜</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new_counter</span><span class="params">()</span>:</span></span><br><span class="line">  i = <span class="number">10</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(x=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">nonlocal</span> i</span><br><span class="line">    i += x</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line">  <span class="keyword">return</span> count</span><br><span class="line">a_count = new_counter()</span><br><span class="line">print(a_count())</span><br><span class="line">print(a_count())</span><br><span class="line">print(a_count(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸‰é¢˜</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeActions</span><span class="params">()</span>:</span></span><br><span class="line">    acts = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        acts.append(<span class="keyword">lambda</span> x: i ** x)</span><br><span class="line">    <span class="keyword">return</span> acts</span><br><span class="line">acts = makeActions()</span><br><span class="line">print(acts[<span class="number">0</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">1</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">2</span>](<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒé¢˜</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">15</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰é¢˜</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è­¦ç¤ºï¼šè®¤çœŸçš„è¯»ä¸‹å»ï¼Œå¯èƒ½ä¼šèŠ±è´¹ä½ ä¸å°‘çš„æ—¶é—´</p>
</blockquote>
<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>æŒæ¡åŒ¿åå‡½æ•°</li>
<li>æŒæ¡é«˜é˜¶å‡½æ•°ä¸åŒ¿åå‡½æ•°çš„ç”¨æ³•</li>
<li>å°½é‡ææ˜ç™½é—­åŒ…</li>
</ul>
<p><img data-src="/2019/05/18/index/closuer.png" alt="ç›®å½•ç»“æ„"></p>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-åŒ¿åå‡½æ•°"><a href="#ç¬¬ä¸€éƒ¨åˆ†-åŒ¿åå‡½æ•°" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† åŒ¿åå‡½æ•°"></a>ç¬¬ä¸€éƒ¨åˆ† åŒ¿åå‡½æ•°</h3><h4 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1 å®šä¹‰"></a>1 å®šä¹‰</h4><p><code>lambda å‡½æ•°</code>ä¹Ÿå«<code>åŒ¿åå‡½æ•°</code>ï¼ŒåŠå³æ²¡æœ‰å…·ä½“åç§°çš„å‡½æ•°ï¼Œå®ƒå…è®¸å¿«é€Ÿå®šä¹‰å•è¡Œå‡½æ•°ï¼Œç±»ä¼¼äº C è¯­è¨€çš„å®ï¼Œå¯ä»¥ç”¨åœ¨ä»»ä½•éœ€è¦å‡½æ•°çš„åœ°æ–¹ã€‚</p>
<p>lambdaä¸defå¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>åŒºåˆ«</th>
<th>def</th>
<th>lambda</th>
</tr>
</thead>
<tbody><tr>
<td>åç§°</td>
<td>æœ‰</td>
<td>æ— </td>
</tr>
<tr>
<td>è¿”å›å€¼</td>
<td>å‡½æ•°å¯¹è±¡ä½†ä¸ç»™æ ‡è¯†ç¬¦</td>
<td>ä»»æ„</td>
</tr>
<tr>
<td>ä½œç”¨</td>
<td>ç®€å•çš„</td>
<td>ç®€å•/å¤æ‚</td>
</tr>
<tr>
<td>ä½œç”¨èŒƒå›´</td>
<td>ä¸èƒ½å…±äº«</td>
<td>å¯å…±äº«</td>
</tr>
</tbody></table>
<h4 id="2-è¡¨è¾¾å¼"><a href="#2-è¡¨è¾¾å¼" class="headerlink" title="2 è¡¨è¾¾å¼"></a>2 è¡¨è¾¾å¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funName</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"è¿”å›å€¼"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">lambda</span> argument1,argument2,...argumentN:expression using arguments</span><br><span class="line"></span><br><span class="line"><span class="keyword">lambda</span> å‚æ•°: è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure>

<p><code>å®ç°åŒæ ·ä»£ç ä¸åŒæ–¹å¼çš„å®ä¾‹ï¼š</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡½æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">mul</span><span class="params">(x, y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x*y</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mul(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="comment"># åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lam = <span class="keyword">lambda</span> x, y: x*y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lam</span><br><span class="line">&lt;function &lt;<span class="keyword">lambda</span>&gt; at <span class="number">0x101b11268</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lam(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lam(<span class="number">2</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: &lt;<span class="keyword">lambda</span>&gt;() missing <span class="number">1</span> required positional argument: <span class="string">'y'</span></span><br></pre></td></tr></table></figure>

<h4 id="3-åŒ¿åå‡½æ•°ä¸é«˜é˜¶å‡½æ•°"><a href="#3-åŒ¿åå‡½æ•°ä¸é«˜é˜¶å‡½æ•°" class="headerlink" title="3 åŒ¿åå‡½æ•°ä¸é«˜é˜¶å‡½æ•°"></a>3 åŒ¿åå‡½æ•°ä¸é«˜é˜¶å‡½æ•°</h4><p>Pythonå†…ç½®å¯¹æ•°æ®å¤„ç†çš„å‡½æ•°ï¼Œ<strong>æ•ˆç‡æ¯”forè¦é«˜</strong>ï¼Œæ°å¥½ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆlambdaå‡½æ•°ï¼Œ<code>ä¸€å—æŠŠäºŒè€…å­¦ä¹ äº†</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç½—åˆ—äº†å¸¸ç”¨çš„ä¸‰ç§</span></span><br><span class="line">1. map(function, iterable[, iterable, ...]) -&gt; list</span><br><span class="line"></span><br><span class="line">2. filter(function or None, iterable) -&gt; list, tuple, or string</span><br><span class="line"></span><br><span class="line">3. reduce(function, sequence[, initial]) -&gt; value</span><br></pre></td></tr></table></figure>

<h4 id="ç®€è¦ä»‹ç»ï¼š"><a href="#ç®€è¦ä»‹ç»ï¼š" class="headerlink" title="ç®€è¦ä»‹ç»ï¼š"></a>ç®€è¦ä»‹ç»ï¼š</h4><ul>
<li><strong>mapæ˜ å°„</strong>: å¯¹iterableä¸­çš„itemä¾æ¬¡æ‰§è¡Œfunction(item)ï¼Œæ‰§è¡Œç»“æœè¾“å‡ºä¸ºlist</li>
<li><strong>filterè¿‡æ»¤</strong>: å¯¹iterableä¸­çš„itemä¾æ¬¡æ‰§è¡Œfunction(item)ï¼Œå°†æ‰§è¡Œç»“æœä¸ºTrueï¼ˆï¼=0ï¼‰çš„itemç»„æˆä¸€ä¸ªList/String/Tupleï¼ˆå–å†³äºiterableçš„ç±»å‹ï¼‰è¿”å›ï¼ŒFalseåˆ™é€€å‡ºï¼ˆ0ï¼‰ï¼Œè¿›è¡Œè¿‡æ»¤ã€‚</li>
<li><strong>reduce</strong>: iterableä¸­çš„itemé¡ºåºè¿­ä»£è°ƒç”¨functionï¼Œå‡½æ•°å¿…é¡»è¦æœ‰2ä¸ªå‚æ•°ã€‚è¦æ˜¯æœ‰ç¬¬3ä¸ªå‚æ•°ï¼Œåˆ™<strong>è¡¨ç¤ºåˆå§‹å€¼</strong>ï¼Œå¯ä»¥ç»§ç»­è°ƒç”¨åˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ªå€¼</li>
</ul>
<h4 id="å›¾è§£ï¼š"><a href="#å›¾è§£ï¼š" class="headerlink" title="å›¾è§£ï¼š"></a>å›¾è§£ï¼š</h4><p><img data-src="/2019/05/18/index/map.png" alt="map"><br><img data-src="/2019/05/18/index/filter.png" alt="filter"><br><img data-src="/2019/05/18/index/s5_reduce_function.svg" alt="reduce"></p>
<h4 id="å®ä¾‹åˆ—è¡¨"><a href="#å®ä¾‹åˆ—è¡¨" class="headerlink" title="å®ä¾‹åˆ—è¡¨"></a>å®ä¾‹åˆ—è¡¨</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ------- map ------- #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>map(str, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>map(int, [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>map(<span class="keyword">lambda</span> x: x * x, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])   <span class="comment"># ä½¿ç”¨ lambda</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------- reduce ------- #</span></span><br><span class="line"><span class="comment"># reduce æ“ä½œå®ä¾‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x, y: x * y, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])  <span class="comment"># ç›¸å½“äº ((1 * 2) * 3) * 4</span></span><br><span class="line"><span class="number">24</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x, y: x * y, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>) <span class="comment"># ((((5 * 1) * 2) * 3)) * 4</span></span><br><span class="line"><span class="number">120</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="keyword">lambda</span> a, b: a <span class="keyword">if</span> (a &gt; b) <span class="keyword">else</span> b   <span class="comment"># ä¸¤ä¸¤æ¯”è¾ƒï¼Œå–æœ€å¤§å€¼ ã€ä¸‰ç›®è¿ç®—ä¹Ÿåœ¨é˜¶æ®µæ±‡æ€»ä¸è¡¥å……ä¸­è¯´æ˜ã€‘</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(f, [<span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">10</span>])</span><br><span class="line"><span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -------- filter ------- #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list = filter(<span class="keyword">lambda</span> x: x % <span class="number">2</span> == <span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(*list)</span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸¤ä¸ªç»¼åˆå®ä¾‹"><a href="#ä¸¤ä¸ªç»¼åˆå®ä¾‹" class="headerlink" title="ä¸¤ä¸ªç»¼åˆå®ä¾‹"></a>ä¸¤ä¸ªç»¼åˆå®ä¾‹</h4><p><strong>è¿™ä¸ªå°±æ˜¯å¼€å¤´çš„é‚£ä¸ªå®ä¾‹ï¼š æ‰¾å‡ºæŒ‡å®šè¿”å›å†…çš„è´¨å­</strong>ï¼Œæ¶‰åŠçš„å†…å®¹æœ‰ç‚¹å¤šï¼ŒåŒ…å«ä¹‹å‰ç« èŠ‚ä¸­çš„<code>æ¨å¯¼å¼</code>ã€<code>rangeå‡½æ•°</code>ã€<code>å‡½æ•°</code>ã€<code>not</code>ç­‰ç›¸å…³å†…å®¹ï¼Œè¯•ç€å…ˆçœ‹ä¸‹ï¼Œæ˜¯å¦èƒ½çœ‹æ˜ç™½ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è´¨æ•°çš„å®šä¹‰ åªæœ‰1å’Œå®ƒæœ¬èº«ä¸¤ä¸ªå› æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">isPrime</span><span class="params">(start, stop)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="comment"># å–å‡ºè´¨æ•°,xä»range(start,stop+1) å–çš„æ•°</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> filter(<span class="keyword">lambda</span> x : <span class="keyword">not</span> [x % i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, x) <span class="keyword">if</span> x % i == <span class="number">0</span>], range(start, stop + <span class="number">1</span>))</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isPrime(<span class="number">11</span>, <span class="number">12</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</span><br><span class="line">&lt;filter object at <span class="number">0x101b12400</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(result))</span><br><span class="line">[<span class="number">11</span>]</span><br></pre></td></tr></table></figure>

<p><a href="http://pythontutor.com/live.html#code=def%20isPrime%28start,%20stop%29%3A%0A%20%20%20%20%20%23%20%E5%8F%96%E5%87%BA%E8%B4%A8%E6%95%B0,x%E4%BB%8Erange%28start,stop%2B1%29%20%E5%8F%96%E7%9A%84%E6%95%B0%0A%20%20%20%20%20return%20filter%28lambda%20x%20%3A%20not%20%5Bx%20%25%20i%20for%20i%20in%20range%282,%20x%29%20if%20x%20%25%20i%20%3D%3D%200%5D,%20range%28start,%20stop%20%2B%201%29%29%0Aprint%28list%28isPrime%2811,%2012%29%29%29&cumulative=true&curInstr=36&heapPrimitives=true&mode=display&origin=opt-live.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false" target="_blank" rel="noopener">æ•´ä¸ªè¿‡ç¨‹çš„æ­¥éª¤æœ‰ä¸‰ä¸ƒæ­¥éª¤</a></p>
<p>è¯•äº†ä¸‹ç”»ä¸ªæµç¨‹å›¾ï¼Œæ¥ä½œä¸ºè¡¥å……ï¼Œä½†æ˜¯æˆ‘æ€•ç”»å‡ºæ¥ï¼Œæ›´éš¾ç†è§£äº†ï¼›<br>æ‰€ä»¥å°±ç”¨æ–‡å­—æè¿°ä¸‹ï¼Œå¸Œæœ›æè¿°çš„æ¸…æ¥šï¼š</p>
<ul>
<li>1 range(start, stop + 1) ç”Ÿæˆ <code>[)å·¦é—­å³å¼€</code>çš„<strong>list_1æ•°ç»„</strong></li>
<li>2 ä¾æ¬¡å°†list_1ä¸­çš„æ•°ã€xã€‘ä¼ ç»™<code>åŒ¿åå‡½æ•°</code>ï¼›<strong>ã€å¾ªç¯è¯¥æ“ä½œã€‘</strong><ul>
<li>3 ç”Ÿæˆ[2, x)çš„<strong>list_2</strong></li>
<li>4 éå†list_2ï¼Œ ä¾æ¬¡ç”¨ <em><code>x%list_2[i]</code>å–ä½™ï¼›*</em>ã€å¾ªç¯è¯¥æ“ä½œã€‘**</li>
<li>5 å¦‚æœæ•°ç»„é•¿åº¦ç­‰äº0ï¼Œå›åˆ°<code>2</code></li>
<li>6 å¦‚æœä½™æ•°ç­‰äº0ï¼Œè¿”å›ä½™æ•°ï¼Œå­˜è¿›<code>list_new</code>;</li>
<li>7 ç­‰æ•´ä¸ª<strong>2</strong>èµ°å®Œï¼Œåˆ¤æ–­<code>list_new</code>æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¾—å‡ºå½“å‰xæ˜¯å¦æ˜¯è´¨æ•°ï¼Œæ˜¯å¦ä»list_1ä¸­è¿‡æ»¤æ‰</li>
<li>8 è¿›å…¥<strong>list_1</strong>ä¸‹ä¸€ä¸ªå…ƒç´ çš„åˆ¤æ–­</li>
</ul>
</li>
</ul>
<p>å…ˆç†Ÿæ‚‰ä¸‹notçš„ç”¨æ³•ï¼Œã€åœ¨é˜¶æ®µæ±‡æ€»ä¸è¡¥å……ä¸­è¯´æ˜ã€‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> []</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> [<span class="number">1</span>]</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> [<span class="number">0</span>]</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>


<p>ä¸‹è¾¹è¿™ä¸ªæ±‚é˜¶ä¹˜çš„ï¼Œæ²¡å•¥éš¾åº¦ï¼Œåªè¦è¿˜è®°å¾—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ€è€ƒä¸‹è¿™ä¸ªï¼Œåœ¨æ€è€ƒä¸‹ä¸Šè¾¹å…³äºreduceçš„å›¾ä¾‹</span></span><br><span class="line">reduce(<span class="keyword">lambda</span> x, y: x * y, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>) <span class="comment"># ((((5 * 1) * 2) * 3)) * 4</span></span><br></pre></td></tr></table></figure>

<p><img data-src="/2019/05/18/index/reduce2.png" alt="ç±»æ¯”ä¸€ä¸‹"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®— 5!+4!+3!+2!+1!</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">addFactorial</span><span class="params">(n)</span>:</span></span><br><span class="line"><span class="meta">... </span>    result = []</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> map(<span class="keyword">lambda</span> x:x + <span class="number">1</span>, range(n)):</span><br><span class="line"><span class="meta">... </span>        a = reduce(<span class="keyword">lambda</span> x, y:x * y, map(<span class="keyword">lambda</span> x:x + <span class="number">1</span>, range(i)))</span><br><span class="line"><span class="meta">... </span>        result.append(a)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> reduce(<span class="keyword">lambda</span> x, y:x + y, result)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>addFactorial(<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>addFactorial(<span class="number">3</span>)</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬äºŒéƒ¨åˆ†-é—­åŒ…"><a href="#ç¬¬äºŒéƒ¨åˆ†-é—­åŒ…" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† é—­åŒ…"></a>ç¬¬äºŒéƒ¨åˆ† é—­åŒ…</h3><p>æ¥ä¸‹æ¥çš„å†…å®¹æ¶‰åŠå‡½æ•°ç›¸å…³å†…å®¹ï¼Œä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« <br><a href="https://mp.weixin.qq.com/s/g8P8IT3_eK5KYlyWIXKgbQ" target="_blank" rel="noopener">Python åŸºç¡€ç³»åˆ—â€“å‡½æ•°ã€9ã€‘</a><br><a href="https://mp.weixin.qq.com/s/93jGABTI5DEDxCT4iUT3pw" target="_blank" rel="noopener">Python åŸºç¡€ç³»åˆ—ä¹‹ä½œç”¨åŸŸã€10ã€‘</a></p>
<p><img data-src="/2019/05/18/index/func.png" alt="å‡½æ•°æ¦‚è¿°å›¾"></p>
<blockquote>
<p>å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œ</p>
</blockquote>
<p>åœ¨è¯´é—­åŒ…å®šä¹‰ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹å¼€å¤´çš„é‚£ä¸¤æ®µä»£ç </p>
<h4 id="1-åˆå§‹é—­åŒ…"><a href="#1-åˆå§‹é—­åŒ…" class="headerlink" title="1. åˆå§‹é—­åŒ…"></a>1. åˆå§‹é—­åŒ…</h4><blockquote>
<p>å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒé¢˜</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new_counter</span><span class="params">()</span>:</span></span><br><span class="line">  i = <span class="number">10</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(x=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="keyword">nonlocal</span> i</span><br><span class="line">    i += x</span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line">  <span class="keyword">return</span> count</span><br><span class="line">a_count = new_counter()</span><br><span class="line">print(a_count())</span><br><span class="line">print(a_count())</span><br><span class="line">print(a_count(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p><img data-src="/2019/05/18/index/bibao.jpg" alt="é—­åŒ…"></p>
<p>ä¸Šä¾§çš„ä¾‹å­ä¸»è¦å®ç°çš„æ˜¯ä¸€ä¸ª<strong>è®¡æ•°å™¨çš„åŠŸèƒ½</strong>ï¼š<code>æ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œåœ¨åŸåŸºç¡€ä¸ŠåŠ 1</code>;</p>
<p>ç»“åˆä¸Šå›¾ï¼Œå¤§è‡´äº†è§£ä¸‹æµç¨‹ï¼š</p>
<ul>
<li>å‡½æ•°å®šäºä¸è¿”å›ï¼š<ul>
<li>å¤–å±‚å‡½æ•°new_counterè¿”å›äº†å†…å±‚å‡½æ•°countä½œä¸ºç»“æœï¼›</li>
<li>å†…å±‚å‡½æ•°countï¼Œä¸­çš„å‚æ•°ï¼š<strong>x</strong>æœ‰ä¸ªé»˜è®¤å€¼1ï¼›</li>
<li>å†…å±‚å‡½æ•°countä¸­çš„ i åˆ©ç”¨äº†nonlocalï¼Œè·å–åˆ°10ï¼›</li>
</ul>
</li>
<li>a_count = new_counter()<ul>
<li>å°†å˜é‡a_countæŒ‡å‘new_counter()è¿”å›çš„count()</li>
<li>count()çš„typeä¸ºfunc,å¹¶ä¸”iæŒæœ‰10å¯¹åº”çš„å†…å­˜åœ°å€</li>
</ul>
</li>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨a_count()æ—¶<ul>
<li>æ²¡æœ‰å‚æ•°ï¼Œxé»˜è®¤ä¸º1;</li>
<li>iæŒæœ‰10ï¼Œç»è¿‡â•åè¿”å›11</li>
</ul>
</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨a_count()æ—¶<ul>
<li>æ²¡æœ‰å‚æ•°ï¼Œxé»˜è®¤ä¸º1;</li>
<li>iæŒæœ‰11ï¼Œç»è¿‡â•åè¿”å›12</li>
</ul>
</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨a_count()æ—¶<ul>
<li>æ²¡æœ‰å‚æ•°ï¼Œx=3;</li>
<li>iæŒæœ‰12ï¼Œç»è¿‡â•åè¿”å›15</li>
</ul>
</li>
</ul>
<p>æ­¤æ—¶æˆ‘ä¸ç¡®å®šçœ‹äº†ä¸Šå›¾å’Œè¯´æ˜ï¼Œæ˜¯å¦<strong>èƒ½å¤Ÿçœ‹æ‡‚é—­åŒ…çš„ç”¨æ³•</strong></p>
<h4 id="2-é—­åŒ…çš„å®šä¹‰"><a href="#2-é—­åŒ…çš„å®šä¹‰" class="headerlink" title="2 é—­åŒ…çš„å®šä¹‰"></a>2 é—­åŒ…çš„å®šä¹‰</h4><blockquote>
<p>æ¯”è¾ƒæ™¦æ¶©çš„ä¸“ä¸šæœ¯è¯­ï¼Œä½†è¿˜æ˜¯å»ºè®®è®¤çœŸè¯»è¯»</p>
<blockquote>
<p>éƒ½æ˜¯å¤§ç¥å‘æ˜çš„ä¸œè¥¿</p>
</blockquote>
<blockquote>
<p>çœŸçš„å¾ˆå·§å¦™</p>
</blockquote>
</blockquote>
<p><strong>ä¸‹è¾¹çš„æ–‡å­—å€¼å¾—è¯» N é</strong></p>
<p><code>ç»´åŸºç™¾ç§‘ä¸Šå¯¹é—­åŒ…çš„è§£é‡Šå°±å¾ˆç»å…¸ï¼š</code></p>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>é—­åŒ…ï¼ˆClosureï¼‰æ˜¯è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰çš„ç®€ç§°ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚</strong><br>æ‰€ä»¥ï¼Œæœ‰å¦ä¸€ç§è¯´æ³•è®¤ä¸ºé—­åŒ…æ˜¯ç”±å‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ã€‚ Peter J. Landin åœ¨1964å¹´å°†æœ¯è¯­é—­åŒ…å®šä¹‰ä¸ºä¸€ç§åŒ…å«ç¯å¢ƒæˆåˆ†å’Œæ§åˆ¶æˆåˆ†çš„å®ä½“ã€‚</p>
<ul>
<li>é—­åŒ…æ¦‚å¿µ:<ul>
<li>é—­åŒ…å°±æ˜¯æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°.</li>
</ul>
</li>
<li>åˆ†æè¿™å¥è¯:<ol>
<li>é—­åŒ…æ˜¯å®šä¹‰åœ¨å‡½æ•°ä¸­çš„å‡½æ•°.</li>
<li>é—­åŒ…èƒ½è®¿é—®åŒ…å«å‡½æ•°çš„å˜é‡.</li>
<li>é—­åŒ…æºå¸¦çŠ¶æ€åŒ…<ul>
<li>å³ä½¿åŒ…å«å‡½æ•°æ‰§è¡Œå®Œäº†, è¢«é—­åŒ…å¼•ç”¨çš„å˜é‡ä¹Ÿå¾—ä¸åˆ°é‡Šæ”¾.</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>æ¥ä¸‹æ¥çœ‹ç¬¬äºŒä¸ªä¾‹å­</p>
<h4 id="3-é—­åŒ…çš„ä½œç”¨åŸŸ"><a href="#3-é—­åŒ…çš„ä½œç”¨åŸŸ" class="headerlink" title="3. é—­åŒ…çš„ä½œç”¨åŸŸ"></a>3. é—­åŒ…çš„ä½œç”¨åŸŸ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸‰é¢˜</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeActions</span><span class="params">()</span>:</span></span><br><span class="line">    acts = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        acts.append(<span class="keyword">lambda</span> x: i ** x)</span><br><span class="line">    <span class="keyword">return</span> acts</span><br><span class="line">acts = makeActions()</span><br><span class="line">print(acts[<span class="number">0</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">1</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">2</span>](<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p><img data-src="/2019/05/18/index/bibao2.jpg" alt="é—­åŒ…2"></p>
<p>å½“æ‰§è¡Œç»“æŸ<code>acts = makeActions()</code>è¿™ä¸€è¡Œä»£ç ã€‚</p>
<ol>
<li>makeActions()å‡½æ•°å†…éƒ¨ã€iã€‘æŒæœ‰äº† 2,å¹¶ä¸”ä¸é‡Šæ”¾ï¼›</li>
<li>actså®é™…åŒ…å«äº†ä¸‰ä¸ªå‡½æ•°ç±»å‹çš„å†…å®¹</li>
<li>å½“è°ƒç”¨<code>acts[x](2)</code>, å®é™…æ‰§è¡Œå‡½æ•°ä¸º<strong>lambda x: i ** x</strong>ï¼Œè€Œ<code>iæŒæœ‰2</code></li>
<li>æ•…å½“ y ä¸€è‡´æ—¶ï¼Œx çš„ä½ç½®å˜åŒ–ä¸å½±å“ç»“æœï¼Œï¼ˆacts[x] (y)ï¼‰</li>
</ol>
<h4 id="4-åŠ æ·±ä¸€ç‚¹"><a href="#4-åŠ æ·±ä¸€ç‚¹" class="headerlink" title="4 åŠ æ·±ä¸€ç‚¹"></a>4 åŠ æ·±ä¸€ç‚¹</h4><p>å¦‚æœæˆ‘ä»¬å°±æ˜¯è¦<code>é”™è¯¯çš„ç»“æœ</code>ï¼Œã€0ï¼Œ1ï¼Œ8ã€‘å‘¢ï¼Ÿ<br>å¦‚ä½•å»å®ç°ï¼Ÿ</p>
<p>è¿˜è®°å¾—åœ¨å‰é¢ğŸˆ¶ä¸ªçŠ¶æ€çš„æ¦‚å¿µå—ï¼Ÿ</p>
<ul>
<li>æºå¸¦çŠ¶æ€çš„é—­åŒ…çš„æ¦‚å¿µ<ul>
<li>å³ä½¿åŒ…å«å‡½æ•°æ‰§è¡Œå®Œäº†, è¢«é—­åŒ…å¼•ç”¨çš„å˜é‡ä¹Ÿå¾—ä¸åˆ°é‡Šæ”¾.</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ€è·¯ï¼šå‡å¦‚æˆ‘ä»¬æŠŠåˆ—è¡¨ä¸­çš„ä½ç½®å¯¹åº”içš„çŠ¶æ€ä¿å­˜èµ·æ¥ï¼Œé‚£å°±ä¸å°±å®Œäº‹äº†ä¹ˆï¼Ÿ</p>
</blockquote>
<blockquote>
<p>å¦‚æœçœŸçš„ä»å¤´çœ‹åˆ°ç°åœ¨ï¼Œå¹¶ä¸”ä¸€è·¯æ€è€ƒï¼Œæƒ³å¿…å·²ç»èŠ±è´¹ä½ ä¸å°‘æ—¶é—´äº†ã€‚</p>
<blockquote>
<p>æ­¤æ—¶çš„ä½ åº”è¯¥å®Œå…¨ç†è§£æ–‡ä¸­é˜è¿°çš„å†…å®¹äº†ã€‚</p>
</blockquote>
<blockquote>
<p>ç›¸å¯¹çœŸæ­£æŒæ¡çŸ¥è¯†è€Œè¨€ï¼Œä»˜å‡ºçš„æ—¶é—´çš„ä»·å€¼æ˜¯ç¿»å€çš„</p>
</blockquote>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeActions</span><span class="params">()</span>:</span></span><br><span class="line">    acts = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">g</span><span class="params">(param)</span>:</span></span><br><span class="line">            newParam = <span class="keyword">lambda</span> x: param ** x</span><br><span class="line">            <span class="keyword">return</span> newParam</span><br><span class="line">        acts.append(g(i))</span><br><span class="line">    <span class="keyword">return</span> acts</span><br><span class="line">acts = makeActions()</span><br><span class="line">print(acts[<span class="number">0</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">1</span>](<span class="number">2</span>))</span><br><span class="line">print(acts[<span class="number">2</span>](<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p><img data-src="/2019/05/18/index/bibao3.jpg" alt="ç¬¬ä¸€æ¬¡ä¿ç•™çš„çŠ¶æ€"><br><img data-src="/2019/05/18/index/bibao4.jpg" alt="ä¸‰ç§çŠ¶æ€"></p>
<h4 id="5-å†æ·±å…¥ä¸€äº›"><a href="#5-å†æ·±å…¥ä¸€äº›" class="headerlink" title="5 å†æ·±å…¥ä¸€äº›"></a>5 å†æ·±å…¥ä¸€äº›</h4><p>è¿™æ®µä»£ç èƒ½è®©ä½ æƒ³åˆ°ä»€ä¹ˆâ“<br>æœ€ç›´è§‚çš„å°±æ˜¯ï¼šè¿™ä¸ªæ˜¯ä¸ªé—­åŒ…</p>
<p>ä½†æ˜¯ï¼šè¿™æ®µä»£ç ä¸‡ä¸‡ä¸èƒ½è®©æˆ‘è”æƒ³åˆ°ï¼š<strong>ç›´çº¿æ–¹ç¨‹</strong>ã€<strong>æ–œç‡</strong>ã€<strong>æˆªè·</strong>ã€<strong>åæ ‡ç³»</strong>ç­‰ç­‰çš„æ¦‚å¿µã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">line_conf</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">line</span><span class="params">(x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a*x + b</span><br><span class="line">    <span class="keyword">return</span> line</span><br><span class="line"></span><br><span class="line">line1 = line_conf(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">line2 = line_conf(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(line1(<span class="number">5</span>), line2(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">line_conf</span><span class="params">(a, b, x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a*x + b</span><br><span class="line">line_conf(<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">line_conf(<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬æ˜ç™½äº†ï¼š<code>å‡½æ•°æ˜¯å¯¹è±¡</code>ã€<code>å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼</code>ã€<code>é—­åŒ…æºå¸¦çŠ¶æ€</code>ç­‰ç­‰çš„æ¦‚å¿µåï¼Œå¯èƒ½ä¼šæ€è€ƒ</p>
<ol>
<li>ä¸ºä½•ä¼šæœ‰è¿™ç§ä¸œè¥¿å­˜åœ¨â“</li>
<li>ç©¶ç«Ÿå…¶ç”¨é€”æ˜¯ä»€ä¹ˆâ“</li>
</ol>
<p>å…³äºè¿™ä¸ªç–‘é—®ï¼Œåœ¨æ‰€æœå¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°äº†<a href="https://www.zhihu.com/question/34872127/answer/60297928" target="_blank" rel="noopener">çŸ¥ä¹ä¸Šæœ‰ä¸ªæœ‰æ„æ€çš„é—®ç­”</a></p>
<blockquote>
<p><a href="https://www.zhihu.com/question/34872127/answer/60297928" target="_blank" rel="noopener">ä»¥ä¸‹æ‘˜å½•å…¶ä¸­çš„ä¸€éƒ¨åˆ†</a></p>
</blockquote>
<ol>
<li><p><strong>ç®€çŸ­ç­”æ¡ˆ</strong>ï¼šå‰è€…æ›´å…·æœ‰å¯è¯»æ€§å’Œå¯ç§»æ¤æ€§ã€‚</p>
</li>
<li><p><strong>è¾ƒå®Œæ•´ç­”æ¡ˆ</strong>ï¼šé—­åŒ…ï¼ˆclosureï¼‰å’Œç±»ï¼ˆclassï¼‰æœ‰ç›¸é€šä¹‹å¤„ï¼Œå¸¦æœ‰é¢å‘å¯¹è±¡çš„<code>å°è£…æ€ç»´</code>ã€‚è€Œé¢å‘å¯¹è±¡ç¼–ç¨‹æ­£æ˜¯ä¸ºäº†æ›´ä½³çš„å¯è¯»æ€§å’Œæ›´å…³é”®çš„å¯ç§»æ¤æ€§ï¼›ä¸è¿‡è¿™ä¸ªä¾‹å­æ²¡å¤ªä½“ç°å‡ºé¢å‘å¯¹è±¡çš„é¢å¤–ä¼˜åŠ¿ã€‚</p>
</li>
<li><p><strong>å‡çº§ç­”æ¡ˆ</strong>ï¼šé¢˜ä¸»é—®å‡ºè¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¯èƒ½æ˜¯ç°åœ¨<code>æµè¡Œçš„ç¼–ç¨‹æ•™æçŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ç„¶çš„é£æ ¼å¸¦æ¥çš„æ¶æœ</code>ã€‚å¦‚æœæœªæ¥å¸¦ç€è¿™ä¸ªæƒ³æ³•è¿›å…¥ITè¡Œä¸šï¼Œä¼šéå¸¸ä¸é€‚åº”å…¬å¸çš„ä»£ç è§„èŒƒç­‰åŸºç¡€è¦æ±‚ï¼›å³ä¾¿ä¸å…¥è¡Œåªæ˜¯è‡ªå·±å†™å†™ç¨‹åºç”¨ï¼Œä¹Ÿä¼šå’Œå¾ˆå¤šä¼˜ç§€ã€å¯å¤ç”¨ç­‰çš„ç†å¿µå¤±ä¹‹äº¤è‡‚ã€‚</p>
</li>
<li><p>æˆ‘è®¤ä¸ºä¸€æœ¬ä¼˜ç§€çš„æ•™æé™¤äº†è®²åŸºç¡€è¯­æ³•ï¼Œåº”è¯¥å°½é‡æ•™ä½ ä»£ç <code>ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™å¥½</code>ã€<code>é‚£ä¹ˆå†™ä¸å¥½</code>ã€é‚£ä¹ˆé‚£ä¹ˆå†™ç°åœ¨èƒ½ç”¨ä½†<code>å¤šåŠä»¥åä¼šå‡ºäº‹</code>ã€‚</p>
</li>
</ol>
<blockquote>
<p><a href="https://www.zhihu.com/question/34872127/answer/60297928" target="_blank" rel="noopener">ä»¥ä¸Šä¸ºæ‘˜å½•å…¶ä¸­çš„ä¸€éƒ¨åˆ†</a></p>
</blockquote>
<h3 id="æˆ‘ä»¬æ‰€è®¨åŒçš„è¡Œä¸ºï¼Œå´æ˜¯è‡ªå·±çš„æ‰€ä½œæ‰€ä¸ºã€‚"><a href="#æˆ‘ä»¬æ‰€è®¨åŒçš„è¡Œä¸ºï¼Œå´æ˜¯è‡ªå·±çš„æ‰€ä½œæ‰€ä¸ºã€‚" class="headerlink" title="æˆ‘ä»¬æ‰€è®¨åŒçš„è¡Œä¸ºï¼Œå´æ˜¯è‡ªå·±çš„æ‰€ä½œæ‰€ä¸ºã€‚"></a><strong>æˆ‘ä»¬æ‰€è®¨åŒçš„è¡Œä¸ºï¼Œå´æ˜¯è‡ªå·±çš„æ‰€ä½œæ‰€ä¸ºã€‚</strong></h3><h3 id="å¤šé—®é—®ä»€ä¹ˆï¼Œä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œé‚£äº›æœ›è€Œç”Ÿç•ä¼šå˜æˆç†æ‰€å½“ç„¶ã€‚"><a href="#å¤šé—®é—®ä»€ä¹ˆï¼Œä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œé‚£äº›æœ›è€Œç”Ÿç•ä¼šå˜æˆç†æ‰€å½“ç„¶ã€‚" class="headerlink" title="å¤šé—®é—®ä»€ä¹ˆï¼Œä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œé‚£äº›æœ›è€Œç”Ÿç•ä¼šå˜æˆç†æ‰€å½“ç„¶ã€‚"></a><strong>å¤šé—®é—®ä»€ä¹ˆï¼Œä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œé‚£äº›æœ›è€Œç”Ÿç•ä¼šå˜æˆç†æ‰€å½“ç„¶ã€‚</strong></h3><p>å‚è€ƒé“¾æ¥<br><a href="http://www.bubuko.com/infodetail-2316064.html" target="_blank" rel="noopener">Python å‡½æ•°ä¹‹lambdaã€mapã€filterå’Œreduce</a><br><a href="https://my.oschina.net/cloudcoder/blog/226461" target="_blank" rel="noopener">å†…ç½®å‡½æ•°çš„ä½¿ç”¨</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/16/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/16/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹ä½œç”¨åŸŸã€10ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-16 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-16T10:38:59+08:00">2019-05-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.7k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ol>
<li>å°½é‡æŒæ¡ Python å‘½åç©ºé—´ã€ä½œç”¨åŸŸ</li>
<li>æŒæ¡ Python åŒ¿åå‡½æ•°</li>
</ol>
<blockquote>
<p>æœ¬æ–‡æœ¬å±äºé‚£ç§</p>
<blockquote>
<p>åªå¯æ„ä¼šä¸å¯è¨€ä¼ çš„èŒƒç•´</p>
</blockquote>
</blockquote>
<p>åŸå› :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. å¤§éƒ¨åˆ†äººéƒ½ç›´æ¥å¼€æ’¸ï¼Œå› ä¸ºå’Œæƒ³è±¡å·®ä¸å¤šï¼›</span><br><span class="line">2. ä¸å®¹æ˜“è¯´æ˜ç™½, é™¤éé‡åˆ°bugäº†ï¼Œæ–­ç‚¹è°ƒè¯•ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-å‘½åç©ºé—´"><a href="#ç¬¬ä¸€éƒ¨åˆ†-å‘½åç©ºé—´" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† å‘½åç©ºé—´"></a>ç¬¬ä¸€éƒ¨åˆ† å‘½åç©ºé—´</h3><blockquote>
<p>å¬èµ·æ¥é«˜å¤§ä¸Šçš„è¯æ±‡ï¼Œæˆ–è®¸æ˜¯ç®€å•çš„.</p>
</blockquote>
<p><strong>åœ¨ç†è§£è¿™ä¸ªè¯æ±‡é’±ï¼Œå…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹</strong></p>
<p>A å…¬å¸æœ‰ä¸ªå‘˜å·¥ A1ï¼Œå·¥å· 001ï¼›<br>B å…¬å¸æœ‰ä¸ªå‘˜å·¥ B1ï¼Œå·¥å· 001ï¼›</p>
<p>ä¸ºä½•å·¥èµ„ä¸ä¼šå‘é”™ï¼Ÿ</p>
<p><strong>è¿™ä¸åºŸè¯ä¹ˆï¼Ÿ</strong></p>
<p>åŸå› åœ¨äºï¼šè™½æœ‰åŒæ ·çš„å·¥å·ï¼Œä½†æ˜¯ç›¸å¯¹è€Œè¨€çš„ï¼Œåœ¨ä¸åŒçš„å…¬å¸ï¼ˆ<code>ç©ºé—´</code>ï¼‰å†…ã€‚</p>
<h4 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1.å®šä¹‰"></a>1.å®šä¹‰</h4><p><strong>å‘½åç©ºé—´ï¼ˆè‹±è¯­ï¼šNamespaceï¼‰</strong>ï¼Œä¹Ÿç§°åå­—ç©ºé—´ã€åç§°ç©ºé—´ç­‰ï¼Œå®ƒè¡¨ç¤ºç€ä¸€ä¸ª<code>æ ‡è¯†ç¬¦ï¼ˆidentifierï¼‰çš„å¯è§èŒƒå›´</code>ã€‚<br>ä¸€ä¸ªæ ‡è¯†ç¬¦å¯åœ¨å¤šä¸ªåå­—ç©ºé—´ä¸­å®šä¹‰ï¼Œå®ƒåœ¨ä¸åŒåå­—ç©ºé—´ä¸­çš„å«ä¹‰æ˜¯<code>äº’ä¸ç›¸å¹²çš„</code>ã€‚è¿™æ ·ï¼Œåœ¨ä¸€ä¸ªæ–°çš„åå­—ç©ºé—´ä¸­å¯å®šä¹‰ä»»ä½•æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬ä¸ä¼šä¸ä»»ä½•å·²æœ‰çš„æ ‡è¯†ç¬¦å‘ç”Ÿå†²çªï¼Œå› ä¸ºå·²æœ‰çš„å®šä¹‰éƒ½å¤„äºå…¶ä»–åå­—ç©ºé—´ä¸­ã€‚</p>
<p><strong>ç©ºé—´</strong>ç›¸å½“äºä¸€ä¸ª<code>é›†åˆ</code>ï¼Œ<code>åŒ…å«</code>ç›¸å¯¹ç›¸å¯¹èŒƒå›´å†…æ‰€æœ‰çš„å†…å®¹(<strong>å¯¹è±¡å</strong>)</p>
<h4 id="2-åˆ†ç±»"><a href="#2-åˆ†ç±»" class="headerlink" title="2. åˆ†ç±»"></a>2. åˆ†ç±»</h4><ol>
<li>å†…ç½®å‘½åç©ºé—´(Built-in Namespaces)ï¼šä¼´éš Python çš„è¿è¡Œè€Œå­˜åœ¨ï¼Œ<code>å†…ç½®å‡½æ•°çš„å‘½åç©ºé—´</code>éƒ½å±äº<code>å†…ç½®å‘½åç©ºé—´</code>ï¼Œæ¯”å¦‚å‰é¢çš„ id()ï¼Œç›´æ¥å¯ä»¥ç”¨ã€‚</li>
<li>å…¨å±€å‘½åç©ºé—´(Module:Global Namespaces)ï¼šæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„å‘½åé›†åˆï¼›</li>
<li>æœ¬åœ°å‘½åç©ºé—´(Function&amp;Class: Local Namespaces)ï¼šå±€éƒ¨å‘½åç©ºé—´ï¼Œæ¯ä¸ªå‡½æ•°ã€ç±»æ‰€æ‹¥æœ‰çš„å‘½åç©ºé—´ï¼Œè®°å½•äº†å‡½æ•°ã€ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡ã€‚</li>
</ol>
<blockquote>
<p>ä¸€å›¾èƒœå‰è¨€</p>
</blockquote>
<p><img data-src="1.jpg" alt="å‘½åç©ºé—´"></p>
<h4 id="3-ç”Ÿå‘½å‘¨æœŸ"><a href="#3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3. ç”Ÿå‘½å‘¨æœŸ"></a>3. ç”Ÿå‘½å‘¨æœŸ</h4><ol>
<li>å†…ç½®å‘½åç©ºé—´åœ¨ Python<code>è§£é‡Šå™¨å¯åŠ¨æ—¶åˆ›å»º</code>ï¼Œè§£é‡Šå™¨<code>é€€å‡ºæ—¶é”€æ¯</code>ï¼›</li>
<li>å…¨å±€å‘½åç©ºé—´åœ¨æ¨¡å—è¢«è§£é‡Šå™¨<code>è¯»å…¥æ—¶åˆ›å»º</code>ï¼Œ<code>è§£é‡Šå™¨é€€å‡ºæ—¶é”€æ¯</code>ï¼›</li>
<li>å±€éƒ¨å‘½åç©ºé—´ï¼ŒåŒ…å«å‡½æ•°ã€ç±»å®šä¹‰ã€‚<ul>
<li>å‡½æ•°çš„å±€éƒ¨å‘½åç©ºé—´ï¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºï¼Œå‡½æ•°è¿”å›ç»“æœæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶è¢«é”€æ¯ï¼ˆæ¯ä¸€ä¸ªé€’å½’å‡½æ•°éƒ½æ‹¥æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼‰ï¼›</li>
<li>ç±»å®šä¹‰çš„å‘½åç©ºé—´ï¼šåœ¨è§£é‡Šå™¨è¯»åˆ°ç±»å®šä¹‰ï¼ˆclass å…³é”®å­—ï¼‰æ—¶åˆ›å»ºï¼Œç±»å®šä¹‰ç»“æŸåé”€æ¯ã€‚ï¼ˆ*ï¼‰</li>
</ul>
</li>
</ol>
<h4 id="4-å­˜åœ¨çš„æ„ä¹‰"><a href="#4-å­˜åœ¨çš„æ„ä¹‰" class="headerlink" title="4. å­˜åœ¨çš„æ„ä¹‰"></a>4. å­˜åœ¨çš„æ„ä¹‰</h4><p>ä¸ºäº†è§£å†³å‘½åå†²çªã€‚</p>
<p>ä½ å»å¯„å¿«é€’ï¼Œè¯´é‚®å¯„åˆ°<strong>å—äº¬è·¯ 118 å·</strong>ï¼Œä»–è‚¯å®šä¼šè®©ä½ å†™ä¸Šæ˜¯å“ªä¸ªçœçš„ï¼Œå¦åˆ™ä¸å°±ä¹±äº†ä¹ˆã€‚</p>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-ä½œç”¨åŸŸ"><a href="#ç¬¬äºŒéƒ¨åˆ†-ä½œç”¨åŸŸ" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† ä½œç”¨åŸŸ"></a>ç¬¬äºŒéƒ¨åˆ† ä½œç”¨åŸŸ</h3><h4 id="1-ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ</h4><blockquote>
<p>å¯èƒ½æœ‰ç‚¹ç»•ï¼Œå¤šè¯»å‡ éï¼Œå¤šæ€è€ƒä¸‹</p>
<p>å¯èƒ½æœ‰ç‚¹ç»•ï¼Œå¤šè¯»å‡ éï¼Œå¤šæ€è€ƒä¸‹</p>
</blockquote>
<p>å‘½åç©ºé—´æ˜¯<code>å¯¹è±¡åç§°</code>çš„<strong>é›†åˆ</strong>,å¯è¢«è®¿é—®åŒºåŸŸï¼Œæ¯”å¦‚ id(),å¯ä»¥å…¨å±€<strong>è¢«è°ƒç”¨</strong><br>ä½œç”¨åŸŸæ˜¯é’ˆå¯¹å‘½åç©ºé—´è€Œè¨€çš„ï¼Œæ˜¯<strong>ä½œç”¨åŸŸå®šä¹‰äº†å‘½åç©ºé—´çš„å¯ç”¨èŒƒå›´</strong></p>
<p>ä»¥ä¸‹æ³¨æ„äº‹é¡¹ä¼šåœ¨ç¬¬ä¸‰éƒ¨åˆ†çš„ä»£ç ä¸­è¯å®ï¼š</p>
<ol>
<li>åªæœ‰å‡½æ•°ã€ç±»ã€æ¨¡å—ä¼šäº§ç”Ÿæ–°çš„ä½œç”¨åŸŸï¼Œä»£ç å—ï¼ˆä¾‹å¦‚ifã€forä»£ç å—ï¼‰ä¸ä¼šäº§ç”Ÿæ–°çš„ä½œç”¨åŸŸã€‚</li>
<li>pythonä¸­å˜é‡çš„ä½œç”¨åŸŸæ˜¯ç”±å®ƒåœ¨æºä»£ç ä¸­çš„ä½ç½®å†³å®šçš„ï¼ˆ*ï¼‰</li>
</ol>
<p>å…ˆçœ‹ä¸‹åˆ†ç±»ï¼Œç„¶åè¿›ä¸€æ­¥é˜è¿°<strong>å‘½åç©ºé—´ä¸ä½œç”¨åŸŸçš„å…³ç³»</strong></p>
<h4 id="2-åˆ†ç±»-1"><a href="#2-åˆ†ç±»-1" class="headerlink" title="2. åˆ†ç±»"></a>2. åˆ†ç±»</h4><ol>
<li>Localï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰ï¼šé¦–å…ˆæœç´¢ï¼ŒåŒ…å«å±€éƒ¨åå­—çš„æœ€å†…å±‚ï¼ˆinnermostï¼‰ä½œç”¨åŸŸï¼Œå¦‚å‡½æ•°/æ–¹æ³•/ç±»çš„å†…éƒ¨å±€éƒ¨ä½œç”¨åŸŸï¼›</li>
<li>Enclosingï¼ˆ é—­åŒ…å‡½æ•°å¤–çš„å‡½æ•°ä¸­ï¼‰ï¼šæ ¹æ®åµŒå¥—å±‚æ¬¡ä»å†…åˆ°å¤–æœç´¢ï¼ŒåŒ…å«éå±€éƒ¨ï¼ˆnonlocalï¼‰éå…¨å±€ï¼ˆnonglobalï¼‰åå­—çš„ä»»æ„å°é—­å‡½æ•°çš„ä½œç”¨åŸŸã€‚å¦‚ä¸¤ä¸ªåµŒå¥—çš„å‡½æ•°ï¼Œå†…å±‚å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯å±€éƒ¨ä½œç”¨åŸŸï¼Œå¤–å±‚å‡½æ•°ä½œç”¨åŸŸå°±æ˜¯å†…å±‚å‡½æ•°çš„ Enclosing ä½œç”¨åŸŸï¼›</li>
<li>Globalï¼ˆå…¨å±€ä½œç”¨åŸŸ<br>ï¼‰ï¼šå€’æ•°ç¬¬äºŒæ¬¡è¢«æœç´¢ï¼ŒåŒ…å«å½“å‰æ¨¡å—å…¨å±€åå­—çš„ä½œç”¨åŸŸï¼›</li>
<li>Built-inï¼ˆå†…å»ºä½œç”¨åŸŸï¼‰ï¼šæœ€åè¢«æœç´¢ï¼ŒåŒ…å«å†…å»ºåå­—çš„æœ€å¤–å±‚ä½œç”¨åŸŸã€‚</li>
</ol>
<p><strong>æŸ¥æ‰¾è§„åˆ™</strong></p>
<p><img data-src="2.jpg" alt="å¦‚å›¾æ‰€ç¤º"></p>
<blockquote>
<p>å†…å±‚å¯ä»¥è®¿é—®å¤–å±‚ï¼Œä½†å¤–å±‚ä¸èƒ½è®¿é—®å†…å±‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">global_var = <span class="number">2</span>  <span class="comment"># å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line">x = id(global_var)  <span class="comment"># å†…å»ºä½œç”¨åŸŸï¼Œè°ƒç”¨id()å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    out_var = <span class="number">1</span>  <span class="comment"># é—­åŒ…å‡½æ•°å¤–çš„å‡½æ•°ä¸­</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        inner_var = <span class="number">2</span>  <span class="comment"># å±€éƒ¨ä½œç”¨åŸŸ</span></span><br></pre></td></tr></table></figure>

<h4 id="3-å…³ç³»"><a href="#3-å…³ç³»" class="headerlink" title="3. å…³ç³»"></a>3. å…³ç³»</h4><p><del>å°½é‡ç”¨è‡ªå·±çš„ç†è§£å»é˜è¿°æ˜ç™½ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œæ•¬è¯·æŒ‡æ­£ã€‚</del></p>
<p><del>ç¬¬ä¸€é˜¶æ®µï¼šåœ¨äººç±»è¯ç”ŸåˆæœŸï¼Œæ˜¯æ²¡æœ‰æ—ç¾¤ã€éƒ¨è½ã€å›½å®¶ä¹‹åˆ†çš„ï¼Œæ­¤æ—¶ç›¸å½“äºå…¨äººç±»éƒ½æ˜¯å±äºä¸€ä¸ª<strong>äººç±»çš„é›†åˆ</strong>ï¼Œæ­¤æ—¶çš„<strong>äººç±»</strong>ç›¸å½“äº<strong>ä¸€ä¸ªäººç±»</strong>ï¼Œæ²¡æœ‰é«˜ä½è´µè´±é»‘ç™½ç¾ä¸‘ä¹‹åˆ†ã€‚</del></p>
<p><del>ç¬¬äºŒé˜¶æ®µï¼šæ—ç¾¤çš„å‡ºç°ï¼Œä»£è¡¨ç€æŸäº›äººæœ‰ç”¨è‡ªå·±çš„åŠ¿åŠ›èŒƒå›´ï¼ŒæŠŠäººç±»ä¸€ä¸ªæ•´ä½“åˆ†ä¸ºNä¸ªæ—ç¾¤</del></p>
<h3 id="ç¬¬ä¸‰éƒ¨åˆ†-å‡½æ•°ä½œç”¨åŸŸ"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† å‡½æ•°ä½œç”¨åŸŸ"></a>ç¬¬ä¸‰éƒ¨åˆ† å‡½æ•°ä½œç”¨åŸŸ</h3><p>ä¸Šä¸€ç¯‡æ˜¯å…³äº<strong>å‡½æ•°çš„</strong>ï¼Œé‚£å°±ä»¥å‡½æ•°ä½œç”¨åŸŸä¸ºå®ä¾‹ï¼Œç±»ã€æ¨¡å—éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>
<h4 id="1-æ•´ä½“çš„ä¾‹å­"><a href="#1-æ•´ä½“çš„ä¾‹å­" class="headerlink" title="1. æ•´ä½“çš„ä¾‹å­"></a>1. æ•´ä½“çš„ä¾‹å­</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span></span><br><span class="line">print(<span class="string">"ç¬¬ä¸€æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    x = <span class="number">2</span></span><br><span class="line">    <span class="comment"># åŒå±‚ x=2</span></span><br><span class="line">    print(<span class="string">"ç¬¬äºŒæ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        x = <span class="number">3</span></span><br><span class="line">        <span class="comment"># æ‰“å°åŒå±‚ x=3</span></span><br><span class="line">        print(<span class="string">"ç¬¬ä¸‰æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_up</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># æ‰“å°ä¸Šå±‚ x=2</span></span><br><span class="line">        print(<span class="string">"ç¬¬ä¸‰æ­¥(up)ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">    inner()</span><br><span class="line">    inner_up()</span><br><span class="line">    <span class="comment"># æ‰“å°çš„æ˜¯åŒå±‚x=2ï¼Œå³outer()ä¸‹ä¾§çš„åŒä¸€ä½œç”¨åŸŸçš„x</span></span><br><span class="line">    print(<span class="string">"ç¬¬å››æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">outer()</span><br><span class="line">print(<span class="string">"ç¬¬äº”æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ python3 fun.py </span><br><span class="line">ç¬¬ä¸€æ­¥ï¼šaçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156688</span></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156720</span></span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156752</span></span><br><span class="line">ç¬¬ä¸‰æ­¥(up)ï¼šxçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156720</span></span><br><span class="line">ç¬¬å››æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156720</span></span><br><span class="line">ç¬¬äº”æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š  <span class="number">4336156688</span></span><br></pre></td></tr></table></figure>

<h4 id="2-nonlocalå’ŒglobalåŒºåˆ«"><a href="#2-nonlocalå’ŒglobalåŒºåˆ«" class="headerlink" title="2. nonlocalå’ŒglobalåŒºåˆ«"></a>2. nonlocalå’ŒglobalåŒºåˆ«</h4><ol>
<li>globalå…³é”®å­—ï¼šç”¨æ¥åœ¨å‡½æ•°æˆ–å…¶å®ƒå±€éƒ¨ä½œç”¨åŸŸä¸­<strong>ä½¿ç”¨å…¨å±€å˜é‡</strong>ã€‚</li>
<li>nonlocalå…³é”®å­—ï¼šç”¨æ¥åœ¨å‡½æ•°æˆ–å…¶å®ƒä½œç”¨åŸŸä¸­ä½¿ç”¨å¤–å±‚ï¼ˆéå…¨å±€ï¼‰å˜é‡</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span></span><br><span class="line">print(<span class="string">"ç¬¬ä¸€æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></span><br><span class="line">    x = <span class="number">2</span></span><br><span class="line">    print(<span class="string">"ç¬¬äºŒæ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># æ³¨æ„è¿™è¡Œ</span></span><br><span class="line">        <span class="keyword">global</span> x</span><br><span class="line">        x = <span class="number">3</span></span><br><span class="line">        print(<span class="string">"ç¬¬ä¸‰æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">"ç¬¬å››æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br><span class="line">outer()</span><br><span class="line">print(<span class="string">"ç¬¬äº”æ­¥ï¼šxçš„å†…å­˜åœ°å€ï¼š "</span>, id(x))</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹outerä¸­xçš„ï¼š</p>
<ol>
<li><p>é‡‡ç”¨globalçš„ç»“æœ<br><img data-src="20.png" alt="global"></p>
</li>
<li><p>é‡‡ç”¨nonlocalçš„ç»“æœ<br><img data-src="30.png" alt="nonlocal"></p>
</li>
</ol>
<h4 id="3-ä½œç”¨åŸŸçš„ä½ç½®"><a href="#3-ä½œç”¨åŸŸçš„ä½ç½®" class="headerlink" title="3. ä½œç”¨åŸŸçš„ä½ç½®"></a>3. ä½œç”¨åŸŸçš„ä½ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name &#x3D;&#39;ç®€å•å³æ˜¯ç¾&#39;</span><br><span class="line"></span><br><span class="line">def f1():</span><br><span class="line">    print(name)</span><br><span class="line"></span><br><span class="line">def f2():</span><br><span class="line">    name &#x3D; &#39;Python&#39;</span><br><span class="line">    f1()</span><br><span class="line">f2()</span><br></pre></td></tr></table></figure>

<p><strong>Pythonå‡½æ•°çš„ä½œç”¨åŸŸå–å†³äºå…¶å‡½æ•°ä»£ç å—åœ¨æ•´ä½“ä»£ç ä¸­çš„ä½ç½®ï¼Œ</strong>è€Œä¸æ˜¯è°ƒç”¨æ—¶æœºçš„ä½ç½®ã€‚è°ƒç”¨f1çš„æ—¶å€™ï¼Œä¼šå»f1å‡½æ•°çš„å®šä¹‰ä½“æŸ¥æ‰¾ï¼Œå¯¹äºf1å‡½æ•°ï¼Œå®ƒçš„å¤–éƒ¨æ˜¯name=â€™ç®€å•å³æ˜¯ç¾â€™ï¼Œè€Œä¸æ˜¯name = â€˜Pythonâ€™ã€‚</p>
<p><strong>ç»“æœ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç®€å•å³æ˜¯ç¾</span><br></pre></td></tr></table></figure>

<p>å€’æ•°ç¬¬äºŒæ­¥<br><img data-src="31.png" alt="å€’æ•°ç¬¬äºŒæ­¥"></p>
<p>å‚è€ƒé“¾æ¥</p>
<p><a href="https://www.linuxidc.com/Linux/2018-12/155918.htm" target="_blank" rel="noopener">Python ä¸­å‘½åç©ºé—´ä¸ä½œç”¨åŸŸä½¿ç”¨æ€»ç»“</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/15/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/15/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹--å‡½æ•°ã€9ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-15 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-15T10:38:59+08:00">2019-05-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.9k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ol>
<li>æŒæ¡ Python å‡½æ•°â€“å®šä¹‰ã€å‚æ•°ç±»å‹</li>
<li>æŒæ¡ Python å‡½æ•°â€“å˜é‡ä½œç”¨åŸŸ</li>
</ol>
<blockquote>
<p>æ­£ç¡®ç†è§£ Python å‡½æ•°ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ <strong>Python è£…é¥°å™¨ã€åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰ã€å‡½æ•°å¼ç¼–ç¨‹</strong>ç­‰é«˜é˜¶æŠ€æœ¯ã€‚</p>
</blockquote>
<p>æ–‡ç« è¾ƒé•¿ï¼Œæ•´ä½“å†…å®¹åŒ…å«å¦‚ä¸‹æ€ç»´å¯¼å›¾</p>
<p><img data-src="func.png" alt="æ¦‚è¿°"></p>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-é‡æ–°è®¤è¯†å‡½æ•°"><a href="#ç¬¬ä¸€éƒ¨åˆ†-é‡æ–°è®¤è¯†å‡½æ•°" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† é‡æ–°è®¤è¯†å‡½æ•°"></a>ç¬¬ä¸€éƒ¨åˆ† é‡æ–°è®¤è¯†å‡½æ•°</h3><h4 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1. å®šä¹‰"></a>1. å®šä¹‰</h4><p>Python ä¸­å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> å‡½æ•°å<span class="params">(å‚æ•°)</span>:</span></span><br><span class="line">    <span class="comment"># å†…éƒ¨ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>å‡½æ•°ä»£ç å—ä»¥<code>defå…³é”®è¯</code>å¼€å¤´ï¼Œä¸€ä¸ªç©ºæ ¼ä¹‹åæ¥<code>å‡½æ•°æ ‡è¯†ç¬¦åç§°</code>å’Œ<code>åœ†æ‹¬å·()</code>ï¼Œå†æ¥ä¸ª<code>å†’å·</code>ã€‚</li>
<li>åœ†æ‹¬å·ä¸­é—´å­˜æ”¾å‚æ•°</li>
<li>ä½¿ç”¨ return ç»“æŸå‡½æ•°ã€‚é»˜è®¤è¿”å› Noneã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(a, b)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a + b</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum</span><br><span class="line"><span class="comment"># å‡½æ•°åœ°å€</span></span><br><span class="line">&lt;function sum at <span class="number">0x10af4f158</span>&gt;</span><br><span class="line"><span class="comment">## å‡½æ•°æ–¹æ³•</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(sum)</span><br><span class="line">[<span class="string">'__annotations__'</span>, <span class="string">'__call__'</span>, <span class="string">'__class__'</span>, <span class="string">'__closure__'</span>, <span class="string">'__code__'</span>, <span class="string">'__defaults__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dict__'</span>, <span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__get__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__globals__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__kwdefaults__'</span>, <span class="string">'__le__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__module__'</span>, <span class="string">'__name__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__qualname__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum.__name__</span><br><span class="line"><span class="string">'sum'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum.__module__</span><br><span class="line"><span class="string">'__main__'</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-è°ƒç”¨å‡½æ•°"><a href="#2-è°ƒç”¨å‡½æ•°" class="headerlink" title="2 è°ƒç”¨å‡½æ•°"></a>2 è°ƒç”¨å‡½æ•°</h4><p>ä½¿ç”¨å‡½æ•°ååè·Ÿåœ†æ‹¬å·çš„æ–¹å¼è°ƒç”¨å‡½æ•°ã€‚<br>è°ƒç”¨çš„åŒæ—¶è¦æ ¹æ®å‡½æ•°çš„å®šä¹‰ä½“ï¼Œæä¾›<code>ç›¸åº”ä¸ªæ•°å’Œç±»å‹çš„å‚æ•°</code>ï¼Œæ¯ä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚</p>
<h4 id="3-å‡½æ•°æ˜¯å¯¹è±¡"><a href="#3-å‡½æ•°æ˜¯å¯¹è±¡" class="headerlink" title="3. å‡½æ•°æ˜¯å¯¹è±¡"></a>3. å‡½æ•°æ˜¯å¯¹è±¡</h4><p><strong>åœ¨ Python ä¸­ä¸‡ç‰©çš†ä¸ºå¯¹è±¡</strong>ï¼Œå‡½æ•°ä¹Ÿä¸ä¾‹å¤–ï¼Œ</p>
<ol>
<li>å¯ä»¥ä½œä¸ºå¯¹è±¡å¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</li>
<li>å¯ä»¥ä½œä¸ºå…ƒç´ æ·»åŠ åˆ°é›†åˆå¯¹è±¡ä¸­</li>
<li>å¯ä½œä¸ºå‚æ•°å€¼ä¼ é€’ç»™å…¶å®ƒå‡½æ•°</li>
<li>å¯ä»¥å½“åšå‡½æ•°çš„è¿”å›å€¼</li>
</ol>
<blockquote>
<p>å‡½æ•°èº«ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰å¯¹è±¡æ¨¡å‹çš„ä¸‰ä¸ªé€šç”¨å±æ€§ï¼š<strong>idã€ç±»å‹ã€å’Œå€¼ã€‚</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a + b</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(add)</span><br><span class="line"><span class="number">4472644200</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(add)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">add</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">function</span> <span class="title">add</span> <span class="title">at</span> 0<span class="title">x10a972268</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å˜é‡èµ‹å€¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>newAdd = add</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newAdd(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add <span class="keyword">is</span> newAdd</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>å…¶å®ä¸Šä¾§çš„ï¼Œåªæ˜¯ä¸åŒçš„åå­—æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒåŒæ—¶è¿™å—åœ°å€è¢«å¤šæ¬¡å¼•ç”¨ã€‚</p>
<p><img data-src="1.jpg" alt="å˜é‡"></p>
<blockquote>
<p>äº†è§£äº†å‡½æ•°æ˜¯å¯¹è±¡ï¼Œä»¥åŠä¸Šä¾§çš„å‡ ä¸ªæ€§è´¨ï¼Œæ›´å¾—ç‰¢è®°ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚<br>æ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œæ€§è´¨éƒ½ç±»ä¼¼ï¼Œå…¶ä½™çš„é›†åˆã€å‚æ•°ã€è¿”å›å€¼ï¼Œæ€è€ƒä¸‹å°±æ˜ç™½äº†</p>
</blockquote>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-å‚æ•°ç±»å‹"><a href="#ç¬¬äºŒéƒ¨åˆ†-å‚æ•°ç±»å‹" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† å‚æ•°ç±»å‹"></a>ç¬¬äºŒéƒ¨åˆ† å‚æ•°ç±»å‹</h3><p>å…¶å®å°±æ˜¯ä¸‹ä¾§é‚£ä¸ªæ‹¬å·é‡Œçš„æ•°æ®ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>ä¼ çš„æ˜¯ä»€ä¹ˆ</code>ï¼Œ<code>æ€ä¹ˆä¼ </code></p>
<p><strong>å®šä¹‰</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> å‡½æ•°å<span class="params">(å‚æ•°)</span>:</span></span><br><span class="line">    <span class="comment"># å†…éƒ¨ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure>

<p><strong>å®Œæ•´çš„è¯­æ³•</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(positional_args, keyword_args, *tuple_nonkw_args, **dict_kw_args)</span><br></pre></td></tr></table></figure>

<p><strong>å‡½æ•°çš„å‚æ•°çš„åˆ†ç±»</strong></p>
<ol>
<li>ä½ç½®å‚æ•°(å¿…é€‰å‚æ•°)</li>
<li>é»˜è®¤å‚æ•°</li>
<li>å¯å˜å‚æ•° *args</li>
<li>å¯å˜å‚æ•° **kwargs</li>
<li>å¿…é€‰å‚æ•°</li>
</ol>
<h4 id="1-ä½ç½®å‚æ•°"><a href="#1-ä½ç½®å‚æ•°" class="headerlink" title="1. ä½ç½®å‚æ•°"></a>1. ä½ç½®å‚æ•°</h4><p>å®šä¹‰ï¼š<code>è°ƒç”¨</code>æ—¶å€™çš„ä¼ çš„<code>å‚æ•°</code>å¿…é¡»ä¸<code>å®šä¹‰</code>æ—¶çš„<code>å‚æ•°</code>ä¸€ä¸€å¯¹åº”ã€‚<br>æ³¨æ„äº‹é¡¹ï¼š<br>ä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(a, b)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> a + b</span><br><span class="line"><span class="comment"># ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(sum(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="comment"># å‚æ•°ç¼ºå¤±</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(sum(<span class="number">1</span>))</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: sum() missing <span class="number">1</span> required positional argument: <span class="string">'b'</span></span><br><span class="line"><span class="comment"># å…³é”®å­—å‚æ•°,é¡ºåºä¸é‡è¦ï¼Œå­˜åœ¨å³å¯</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(sum(b=<span class="number">10</span>, a=<span class="number">4</span>))</span><br><span class="line"><span class="number">14</span></span><br></pre></td></tr></table></figure>

<h4 id="2-é»˜è®¤å€¼"><a href="#2-é»˜è®¤å€¼" class="headerlink" title="2. é»˜è®¤å€¼"></a>2. é»˜è®¤å€¼</h4><p>å®šä¹‰ï¼šåœ¨å‡½æ•°å£°æ˜çš„æ—¶å€™ï¼Œå¯ä»¥ç»™æŸä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼<br>æ³¨æ„äº‹é¡¹ï¼š<br>ä½ç½®ï¼šéœ€è¦æ”¾åœ¨<code>ä½ç½®å‚æ•°</code>ä¹‹å</p>
<p><strong>é»˜è®¤å‚æ•°éœ€è¦åœ¨ä½ç½®å‚æ•°çš„åè¾¹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(x, n = <span class="number">2</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x**n</span><br><span class="line">ret1 = power(<span class="number">10</span>)   <span class="comment"># ä½¿ç”¨é»˜è®¤çš„å‚æ•°å€¼n=2</span></span><br><span class="line">ret2 = power(<span class="number">10</span>, <span class="number">4</span>)  <span class="comment"># å°†4ä¼ ç»™nï¼Œå®é™…è®¡ç®—10**4çš„å€¼</span></span><br><span class="line">ret3 = power(n=<span class="number">1</span>, x=<span class="number">100</span>) <span class="comment"># æŒ‡å®šå‚æ•°åä¼ å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸ªä¾‹å­</strong><br>ä¸»è¦æ¶‰åŠï¼šå†…å­˜åœ°å€ã€å‚æ•°é»˜è®¤å€¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a=[])</span>:</span></span><br><span class="line">    a.append(<span class="string">"A"</span>)</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">print(func())</span><br><span class="line">print(func())</span><br><span class="line">print(func())</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰æ€</strong><br><strong>ä¸‰æ€</strong><br><strong>ä¸‰æ€</strong></p>
<p>ç­”æ¡ˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'A'</span>]</span><br><span class="line">[<span class="string">'A'</span>, <span class="string">'A'</span>]</span><br><span class="line">[<span class="string">'A'</span>, <span class="string">'A'</span>, <span class="string">'A'</span>]</span><br></pre></td></tr></table></figure>

<p>å¦‚æœçœŸæ­£ç†è§£äº†ï¼ŒPython å¯¹è±¡çš„<strong>å˜é‡åä¸å†…å­˜åœ°å€</strong>,è¿™ä¸ªé—®é¢˜è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚</p>
<ol>
<li>é»˜è®¤å‚æ•° a æŒ‡å‘çš„ç©ºåˆ—è¡¨å¯¹è±¡å°±ä¼šè¢«åˆ›å»ºï¼Œå‡å¦‚å†…å­˜åœ°å€ä¸º<code>0x123</code>;</li>
<li>ä¹‹åæ¯æ¬¡è°ƒç”¨ï¼Œéƒ½ä¼šåœ¨åŸåœ°å€åè¿½åŠ <code>A</code>;</li>
<li>å¯ä»¥è¯•ç€åœ¨å‡½æ•°å†…éƒ¨æ‰“å° a çš„å†…å­˜åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚</li>
</ol>
<blockquote>
<p>å¦‚ä½•é¿å…è¿™ç§æ“ä½œï¼Ÿ</p>
<blockquote>
<p>è®© a çš„é»˜è®¤å€¼æŒ‡å‘ä¸€ä¸ª<strong>ä¸å¯å˜å¯¹è±¡å³å¯</strong>ï¼Œå¦‚ï¼šæ•°å­—ã€None ç­‰</p>
</blockquote>
</blockquote>
<h4 id="3-å¯å˜å‚æ•°-args"><a href="#3-å¯å˜å‚æ•°-args" class="headerlink" title="3. å¯å˜å‚æ•° *args"></a>3. å¯å˜å‚æ•° *args</h4><p>åœ¨ python é‡Œé¢ï¼Œå‡½æ•°åœ¨å£°æ˜çš„æ—¶å€™ï¼Œå‚æ•°ä¸­å¯ä»¥ä½¿ç”¨(<em>å˜é‡å)çš„æ–¹å¼æ¥æ¥å—<code>ä¸ç¡®å®šé•¿åº¦çš„å‚æ•°</code>ï¼Œä½†æ˜¯åœ¨ python é‡Œé¢å¤§å®¶çº¦å®šä¿—æˆä½¿ç”¨`</em>args<code>æ¥å—ä¸å®šé•¿å‚æ•°ï¼Œä¹‹åå°†è¿™äº›å‚æ•°æ”¾åˆ°ä¸€ä¸ª</code>tuple`é‡Œé¢ï¼Œå¯ä»¥é€šè¿‡è®¿é—® args æ¥è·å–è¿™äº›ä¸å®šé•¿å‚æ•°ã€‚</p>
<p><code>ä¾‹å­ä¸€</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">changeFunc</span><span class="params">(*args)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(type(args))</span><br><span class="line"><span class="meta">... </span>    print(args)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>changeFunc(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="number">3</span>)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="params">(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="number">3</span>)</span></span></span><br></pre></td></tr></table></figure>

<p><code>ä¾‹å­äºŒ</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>changeFunc([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="number">3</span>])</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="params">([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="number">3</span>],)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸ºä½•æ‰“å°å‡ºæ¥æ˜¯è¿™æ ·ï¼Ÿ<br>å› ä¸ºæ˜¯æ•°ç»„æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¼ è¿‡æ¥çš„ã€‚<br>å¦‚ä½•å°† list çš„å…ƒç´ è½¬æ¢ä¸º tuple çš„å…ƒç´ ï¼Ÿç»“æœä¸ä¾‹å­ä¸€ä¸€è‡´ï¼Ÿ</p>
</blockquote>
<p><strong>ç­”æ¡ˆï¼š</strong> å‚æ•°å‰åŠ ä¸ªæ˜Ÿå·,<a href="https://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists" target="_blank" rel="noopener">è§£å‹å‚æ•°åˆ—è¡¨</a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tmpList = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(*tmpList)</span><br><span class="line">a b <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(tmpList)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ•°ç»„â•æ˜Ÿå·ï¼Œè§£å‹å‚æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>changeFunc(*tmpList)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="params">(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="number">3</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>å½“å‚æ•°å·²ç»åœ¨<code>åˆ—è¡¨æˆ–å…ƒç»„ä¸­</code>ä½†éœ€è¦ä¸ºéœ€è¦å•ç‹¬ä½ç½®å‚æ•°çš„å‡½æ•°, éœ€è¦è§£å‹å‚æ•°, ç„¶åå†ä¸€ä¸€ä¼ è¿›å»</p>
<p>é’ˆå¯¹å­—å…¸å¸¦ä¸Š*å·ï¼Œè§£å‹çš„æ˜¯ key</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict = &#123;<span class="string">"a"</span>: <span class="number">1</span>, <span class="string">"b"</span>: <span class="number">2</span>, <span class="string">"c"</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(*dict)</span><br><span class="line">a b c</span><br></pre></td></tr></table></figure>

<h4 id="4-å¯å˜å‚æ•°-args"><a href="#4-å¯å˜å‚æ•°-args" class="headerlink" title="4. å¯å˜å‚æ•° *args"></a>4. å¯å˜å‚æ•° *args</h4><p>å®šä¹‰ï¼š<code>*args</code>å‚æ•°è¡¨ç¤ºæœªçŸ¥çš„ä½ç½®å‚æ•°åºåˆ—é•¿åº¦ï¼Œè€Œ<code>\*\*kwargs</code>ä»£è¡¨åŒ…å«<strong>å…³é”®å­—å’Œå€¼æ˜ å°„å…³ç³»çš„å­—å…¸</strong>ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„å…³é”®å­—å’Œå€¼æ˜ å°„ï¼Œå¹¶ä¸”åœ¨å‡½æ•°å®šä¹‰ä¸­â€œ*argsâ€å¿…é¡»ä½äºâ€œ**kwargsâ€å‰é¢ã€‚</p>
<blockquote>
<p>*args å¿…é¡»åœ¨**kwargs ä¹‹å‰ã€‚<br>é»˜è®¤å€¼å‚æ•°å¿…é¡»å†å¿…é€‰å‚æ•°ä¹‹å‰ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">kwargs</span><span class="params">(first, second=<span class="number">2</span>, *args, **kwargs)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(first, second)</span><br><span class="line"><span class="meta">... </span>    print(args)</span><br><span class="line"><span class="meta">... </span>    print(kwargs)</span><br><span class="line">...</span><br><span class="line"><span class="comment"># kwargsä¸ºç©ºæ˜¯å› ä¸ºè¢«*argsåƒæ‰äº†</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kwargs(<span class="number">1</span>, <span class="number">3</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, &#123;<span class="string">"key1"</span>: <span class="string">"value"</span>&#125;)</span><br><span class="line"><span class="number">1</span> <span class="number">3</span></span><br><span class="line">(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, &#123;<span class="string">'key1'</span>: <span class="string">'value'</span>&#125;)</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict = &#123;<span class="string">"key1"</span>: <span class="string">"value"</span>&#125;</span><br><span class="line"><span class="comment"># è§£å‹å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kwargs(<span class="number">1</span>, <span class="number">3</span>, *list, **dict)</span><br><span class="line"><span class="number">1</span> <span class="number">3</span></span><br><span class="line">(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>)</span><br><span class="line">&#123;<span class="string">'key1'</span>: <span class="string">'value'</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åè¾¹ä¸èƒ½è¿½åŠ å‚æ•°äº†ã€‚ã€‚</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(**kw, error)</span>:</span></span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(**kw, error)</span>:</span></span><br><span class="line">                       ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>

<h4 id="5-å…³é”®å­—å‚æ•°"><a href="#5-å…³é”®å­—å‚æ•°" class="headerlink" title="5. å…³é”®å­—å‚æ•°"></a>5. å…³é”®å­—å‚æ•°</h4><blockquote>
<p>ä½ç½®å‚æ•°å¯ä»¥ä¸å¸¦å‚æ•°åï¼Œä½†æ˜¯æ˜Ÿå·åè¾¹çš„å°±å¿…é€‰å¸¦ä¸Šå‚æ•°å</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜Ÿå·åå¿…é€‰åŠ ä¸Šå‚æ•°åå­—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(loction, second, *, must)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(loction, second, must)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: func() takes <span class="number">2</span> positional arguments but <span class="number">3</span> were given</span><br><span class="line"><span class="comment"># ç¬¦åˆé¢„æœŸ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>, must=<span class="number">3</span>)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸€ä¸ªæ±‡æ€»çš„éªšæ“ä½œ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">student</span><span class="params">(name, age=<span class="number">18</span>, *args, sex, classroom, **kwargs)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(name, age, args, sex, classroom, kwargs)</span><br><span class="line">...</span><br><span class="line"><span class="comment"># *args ä¹‹åçš„ä¸€èˆ¬å‚æ•°é»˜è®¤æ›´æ”¹ä¸ºå…³é”®å­—å‚æ•°ï¼Œsex/classroomæœªä¼ é€’ï¼ŒæŠ¥é”™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>student(<span class="string">"howard"</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: student() missing <span class="number">2</span> required keyword-only arguments: <span class="string">'sex'</span> <span class="keyword">and</span> <span class="string">'classroom'</span></span><br><span class="line"><span class="comment"># ä½ç½®å‚æ•°ä¸å…³é”®å­—å‚æ•°ã€å¿…é€‰ã€‘ï¼Œå¯é€‰å‚æ•°ã€å¯é€‰ã€‘</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>student(<span class="string">"howard"</span>, sex=<span class="string">"1"</span>, classroom=<span class="string">"python"</span>)</span><br><span class="line">howard <span class="number">10</span> () <span class="number">1</span> python &#123;&#125;</span><br><span class="line"><span class="comment"># dict</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict</span><br><span class="line">&#123;<span class="string">'key1'</span>: <span class="string">'value'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>student(<span class="string">"howard"</span>, sex=<span class="string">"1"</span>, classroom=<span class="string">"python"</span>, **dict)</span><br><span class="line">howard <span class="number">10</span> () <span class="number">1</span> python &#123;<span class="string">'key1'</span>: <span class="string">'value'</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æœ¬æ–‡é‡ç‚¹æ³¨æ„äº‹é¡¹ï¼š"><a href="#æœ¬æ–‡é‡ç‚¹æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æœ¬æ–‡é‡ç‚¹æ³¨æ„äº‹é¡¹ï¼š"></a>æœ¬æ–‡é‡ç‚¹æ³¨æ„äº‹é¡¹ï¼š</h3><ol>
<li>ç‰¢è®°å‡½æ•°ä¸ºç¬¬ä¸€ç±»å¯¹è±¡ï¼›</li>
<li>å¯é€‰å‚æ•°æ³¨æ„è§£å‹å‚æ•°ï¼›</li>
</ol>
<p>å‚è€ƒ<br><a href="https://www.zhihu.com/question/25950466" target="_blank" rel="noopener">å‡½æ•°ä½œä¸ºå‚æ•°çš„é—®é¢˜</a><br><a href="http://python.jobbole.com/81646/" target="_blank" rel="noopener">Python ä¸­çš„å‡½æ•°è¯¦è§£</a><br><a href="http://python.jobbole.com/81646/" target="_blank" rel="noopener"></a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/14/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/14/index/" class="post-title-link" itemprop="url">Node.jsåŸºç¡€ç³»åˆ—ä¹‹Httpæ¨¡å—ã€5ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-14 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-14T10:38:59+08:00">2019-05-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-16 02:54:00" itemprop="dateModified" datetime="2020-05-16T02:54:00+08:00">2020-05-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node/" itemprop="url" rel="index"><span itemprop="name">Node</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>6.1k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>æŒæ¡Node.jsæ ¸å¿ƒæ¨¡å—ä¹‹ç½‘ç»œæ¨¡å—</li>
</ul>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-c6a6ee0a6a22f108.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ–‡ç« ç›®å½•"></p>
<blockquote>
<p>Node.jsæ ‡å‡†åº“æä¾›äº† http æ¨¡å—ï¼Œæ˜¯Node.jsä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚</p>
</blockquote>
<p>é€šè¿‡httpæ¨¡å—ï¼Œä½ å¯ä»¥ä½¿ç”¨å…¶http.createServeræ–¹æ³•åˆ›å»ºä¸€ä¸ª<code>httpæœåŠ¡å™¨</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶http.requestæ–¹æ³•åˆ›å»ºä¸€ä¸ª<code>httpå®¢æˆ·ç«¯ã€‚</code></p>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-httpæœåŠ¡ç«¯"><a href="#ç¬¬ä¸€éƒ¨åˆ†-httpæœåŠ¡ç«¯" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†: httpæœåŠ¡ç«¯"></a>ç¬¬ä¸€éƒ¨åˆ†: httpæœåŠ¡ç«¯</h3><h4 id="1-1-HTTPæ˜¯ä»€ä¹ˆ"><a href="#1-1-HTTPæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 HTTPæ˜¯ä»€ä¹ˆ?"></a>1.1 HTTPæ˜¯ä»€ä¹ˆ?</h4><p>HTTPæ˜¯ä¸€ä¸ªç”¨æ¥ä¼ é€æ•°æ®çš„åº”ç”¨å±‚åè®®ï¼Œåœ¨å…¶åº•å±‚ä½¿ç”¨TCPä¼ è¾“åè®®ã€‚HTTPæ˜¯äº’è”ç½‘æ•°æ®é€šä¿¡çš„åŸºç¡€ï¼Œè¦å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆå¦‚ï¼šæµè§ˆå™¨è®¿é—®ï¼‰ï¼Œé¦–å…ˆè¦å¸ƒç½²HTTPæœåŠ¡å™¨ã€‚</p>
<h4 id="1-2-HTTPä¹‹URL"><a href="#1-2-HTTPä¹‹URL" class="headerlink" title="1.2 HTTPä¹‹URL"></a>1.2 HTTPä¹‹URL</h4><p>URL: (Uniform / Universal Resource Locatorï¼Œå¸¸ç¼©å†™ä¸ºURL)ç»Ÿä¸€èµ„æºå®šä½ç¬¦,ç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åè®®ç±»å‹:&#x2F;&#x2F;æœåŠ¡å™¨åœ°å€ï¼ˆå¿…è¦æ—¶éœ€åŠ ä¸Šç«¯å£å·ï¼‰&#x2F;è·¯å¾„&#x2F;æ–‡ä»¶å</span><br></pre></td></tr></table></figure>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-0ada86699d61295d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="http1-url-structure.png"></p>
<h4 id="1-3-httpä¹‹è¯·æ±‚æŠ¥æ–‡"><a href="#1-3-httpä¹‹è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="1.3 httpä¹‹è¯·æ±‚æŠ¥æ–‡"></a>1.3 httpä¹‹è¯·æ±‚æŠ¥æ–‡</h4><p>ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œï¼ˆrequest lineï¼‰ã€è¯·æ±‚å¤´éƒ¨ï¼ˆheaderï¼‰ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®4ä¸ªéƒ¨åˆ†ç»„æˆ;</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-f50e4e26dd6acfa8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2012072810301161.png"></p>
<p><strong>ä¸¾ä¾‹å­:</strong></p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-cf0c5d48bf504245.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="201411187986714.png"></p>
<p>è¯·æ±‚æŠ¥æ–‡ä¸­å…³é”®çš„å­—æ®µ:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">User-Agentï¼šäº§ç”Ÿè¯·æ±‚çš„æµè§ˆå™¨ç±»å‹;</span><br><span class="line">Acceptï¼šå®¢æˆ·ç«¯å¯è¯†åˆ«çš„å“åº”å†…å®¹ç±»å‹åˆ—è¡¨;æ˜Ÿå· â€œ * â€ ç”¨äºæŒ‰èŒƒå›´å°†ç±»å‹åˆ†ç»„ï¼Œç”¨ â€œ *&#x2F;* â€ æŒ‡ç¤ºå¯æ¥å—å…¨éƒ¨ç±»å‹ï¼Œç”¨â€œ type&#x2F;* â€æŒ‡ç¤ºå¯æ¥å— type ç±»å‹çš„æ‰€æœ‰å­ç±»å‹;</span><br><span class="line">Accept-Languageï¼šå®¢æˆ·ç«¯å¯æ¥å—çš„è‡ªç„¶è¯­è¨€;</span><br><span class="line">Accept-Encodingï¼šå®¢æˆ·ç«¯å¯æ¥å—çš„ç¼–ç å‹ç¼©æ ¼å¼;</span><br><span class="line">Accept-Charsetï¼šå¯æ¥å—çš„åº”ç­”çš„å­—ç¬¦é›†;</span><br><span class="line">Hostï¼šè¯·æ±‚çš„ä¸»æœºåï¼Œå…è®¸å¤šä¸ªåŸŸååŒå¤„ä¸€ä¸ªIP åœ°å€ï¼Œå³è™šæ‹Ÿä¸»æœº;</span><br><span class="line">connectionï¼šè¿æ¥æ–¹å¼(close æˆ– keepalive);</span><br><span class="line">Cookieï¼šå­˜å‚¨äºå®¢æˆ·ç«¯æ‰©å±•å­—æ®µï¼Œå‘åŒä¸€åŸŸåçš„æœåŠ¡ç«¯å‘é€å±äºè¯¥åŸŸçš„cookie;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-HTTPå“åº”æŠ¥æ–‡"><a href="#1-4-HTTPå“åº”æŠ¥æ–‡" class="headerlink" title="1.4 HTTPå“åº”æŠ¥æ–‡"></a>1.4 HTTPå“åº”æŠ¥æ–‡</h4><p>HTTP å“åº”æŠ¥æ–‡ç”±<code>çŠ¶æ€è¡Œã€å“åº”å¤´éƒ¨ã€ç©ºè¡Œ å’Œ å“åº”åŒ…ä½“</code> 4 ä¸ªéƒ¨åˆ†ç»„æˆ</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-7c6e79fa4c5d355a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="201446213766964.jpg"></p>
<p>çŠ¶æ€ä»£ç ç”±ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œä¸”æœ‰äº”ç§å¯èƒ½å–å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1xxï¼šæŒ‡ç¤ºä¿¡æ¯--è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚</span><br><span class="line">2xxï¼šæˆåŠŸ--è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—ã€‚</span><br><span class="line">3xxï¼šé‡å®šå‘--è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚</span><br><span class="line">4xxï¼šå®¢æˆ·ç«¯é”™è¯¯--è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ã€‚</span><br><span class="line">5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯--æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚</span><br></pre></td></tr></table></figure>

<p>å¸¸è§çš„çŠ¶æ€ç :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">200 OKï¼šå®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸã€‚</span><br><span class="line">400 Bad Requestï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ã€‚</span><br><span class="line">401 Unauthorizedï¼šè¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ã€‚</span><br><span class="line">403 Forbiddenï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚</span><br><span class="line">404 Not Foundï¼šè¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œä¸¾ä¸ªä¾‹å­ï¼šè¾“å…¥äº†é”™è¯¯çš„URLã€‚</span><br><span class="line">500 Internal Server Errorï¼šæœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚</span><br><span class="line">503 Server Unavailableï¼šæœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸ï¼Œä¸¾ä¸ªä¾‹å­ï¼šHTTP&#x2F;1.1 200 OKï¼ˆCRLFï¼‰ã€‚</span><br></pre></td></tr></table></figure>




<h3 id="ç¬¬äºŒéƒ¨åˆ†-httpæœåŠ¡å™¨ç«¯"><a href="#ç¬¬äºŒéƒ¨åˆ†-httpæœåŠ¡å™¨ç«¯" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† httpæœåŠ¡å™¨ç«¯"></a>ç¬¬äºŒéƒ¨åˆ† httpæœåŠ¡å™¨ç«¯</h3><h4 id="1-1-http-serveréµå¾ªäº†node-jsçš„æ—¶é—´æ¨¡å—çš„è§„åˆ™-æœ‰è§¦å‘å’Œç›¸åº”äº‹ä»¶-http-Serverå¯¹è±¡æ˜¯ä¸€ä¸ªEventEmitter"><a href="#1-1-http-serveréµå¾ªäº†node-jsçš„æ—¶é—´æ¨¡å—çš„è§„åˆ™-æœ‰è§¦å‘å’Œç›¸åº”äº‹ä»¶-http-Serverå¯¹è±¡æ˜¯ä¸€ä¸ªEventEmitter" class="headerlink" title="1.1 http.serveréµå¾ªäº†node.jsçš„æ—¶é—´æ¨¡å—çš„è§„åˆ™, æœ‰è§¦å‘å’Œç›¸åº”äº‹ä»¶;http.Serverå¯¹è±¡æ˜¯ä¸€ä¸ªEventEmitter;"></a>1.1 http.serveréµå¾ªäº†node.jsçš„æ—¶é—´æ¨¡å—çš„è§„åˆ™, æœ‰è§¦å‘å’Œç›¸åº”äº‹ä»¶;http.Serverå¯¹è±¡æ˜¯ä¸€ä¸ªEventEmitter;</h4><p>åˆ›å»º: http.createServeræ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<code>http.Serverå¯¹è±¡å®ä¾‹</code>ï¼ŒrequestListenerå¯é€‰å‚æ•°ä¼ å…¥æ—¶ï¼Œå°†åšä¸ºhttp.Serverå¯¹è±¡â€™requestâ€™äº‹ä»¶çš„ç›‘å¬å™¨ã€‚</p>
<p>http.Serverå¯¹è±¡æä¾›çš„äº‹ä»¶æ–¹æ³•æœ‰:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. request: function (request, response) &#123; &#125;æ¯æ¬¡è¯·æ±‚éƒ½ä¼šè§¦å‘è¯¥æ–¹æ³•;</span><br><span class="line">2. connectionï¼šå½“TCPè¿æ¥å»ºç«‹æ—¶ï¼Œè¯¥äº‹ä»¶è¢«è§¦å‘ï¼Œæä¾›ä¸€ä¸ªå‚æ•°socketï¼Œæ˜¯net.Socketçš„å®ä¾‹;</span><br><span class="line">3. close: å½“æ­¤æœåŠ¡å™¨å…³é—­æ—¶è§¦å‘;</span><br><span class="line">ç­‰ç­‰..</span><br></pre></td></tr></table></figure>

<h4 id="1-2-http-Serverä¸­çš„æ–¹æ³•"><a href="#1-2-http-Serverä¸­çš„æ–¹æ³•" class="headerlink" title="1.2 http.Serverä¸­çš„æ–¹æ³•"></a>1.2 http.Serverä¸­çš„æ–¹æ³•</h4><h5 id="2-2-1-server-listen-port-hostname-backlog-callback"><a href="#2-2-1-server-listen-port-hostname-backlog-callback" class="headerlink" title="2.2.1 server.listen(port[, hostname][, backlog][, callback])"></a>2.2.1 server.listen(port[, hostname][, backlog][, callback])</h5><p>åœ¨æŒ‡å®šçš„ä¸»æœºåï¼ˆhostnameï¼‰å’Œç«¯å£ï¼ˆportï¼‰å¼€å§‹æ¥æ”¶è¿æ¥, </p>
<h5 id="1-2-2-server-listen-path-callback"><a href="#1-2-2-server-listen-path-callback" class="headerlink" title="1.2.2 server.listen(path, [callback])"></a>1.2.2 server.listen(path, [callback])</h5><p>ç›‘å¬æŸä¸ª</p>
<h4 id="1-3-http-ServerResponseæœåŠ¡å™¨å“åº”å¯¹è±¡"><a href="#1-3-http-ServerResponseæœåŠ¡å™¨å“åº”å¯¹è±¡" class="headerlink" title="1.3 http.ServerResponseæœåŠ¡å™¨å“åº”å¯¹è±¡"></a>1.3 http.ServerResponseæœåŠ¡å™¨å“åº”å¯¹è±¡</h4><p>http.ServerResponseæ˜¯ä¸€ä¸ªç”±http.Serveråˆ›å»ºçš„å¯¹è±¡, ï¼Œåœ¨è§¦å‘â€™requestâ€™äº‹ä»¶åï¼Œåšäº‹ä»¶å›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°.</p>
<p><code>response.writeHead(statusCode[, statusMessage][, headers])</code></p>
<p>å‘å®¢æˆ·ç«¯è¯·æ±‚å‘é€ä¸€ä¸ªå“åº”å¤´ã€‚<br>statusCodeçŠ¶æ€ç æ˜¯ 3 ä½æ•°å­—ï¼Œå¦‚ï¼š404ã€‚<br>statusMessageè®¾ç½®çŠ¶æ€æ¶ˆæ¯ã€‚<br>æœ€åä¸€ä¸ªå‚æ•°headersæ˜¯å“åº”å¤´ã€‚</p>
<blockquote>
<p>è¿™ä¸ªæ–¹æ³•åªèƒ½åœ¨å½“å‰è¯·æ±‚ä¸­ä½¿ç”¨ä¸€æ¬¡ï¼Œå¹¶ä¸”å¿…é¡»åœ¨response.end()ä¹‹å‰è°ƒç”¨ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var body &#x3D; &#39;hello world&#39;;</span><br><span class="line">response.writeHead(200, &#123;</span><br><span class="line">  &#39;Content-Length&#39;: body.length,</span><br><span class="line">  &#39;Content-Type&#39;: &#39;text&#x2F;plain&#39; &#125;);</span><br></pre></td></tr></table></figure>

<p><code>response.setHeader(name, value)</code></p>
<p>ä¸ºé»˜è®¤æˆ–è€…å·²å­˜åœ¨çš„å¤´è®¾ç½®ä¸€æ¡å•ç‹¬çš„å¤´å†…å®¹ã€‚å¦‚æœè¿™ä¸ªå¤´å·²ç»å­˜åœ¨äº å°†è¢«é€å‡ºçš„å¤´ä¸­ï¼Œå°†ä¼šè¦†ç›–åŸæ¥çš„å†…å®¹ã€‚å¦‚æœæˆ‘æƒ³è®¾ç½®æ›´å¤šçš„å¤´ï¼Œ å°±ä½¿ç”¨ä¸€ä¸ªç›¸åŒåå­—çš„å­—ç¬¦ä¸²æ•°ç»„</p>
<p><code>response.write(chunk, [encoding])</code><br>å‘å“åº”æµå‘é€ä¸€ä¸ªæ•°æ®å—ã€‚è¿™ä¸ªæ–¹æ³•å¯èƒ½è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä»¥æä¾›å“åº”ä½“å†…å®¹ã€‚</p>
<p><code>response.end([data], [encoding])</code></p>
<p>å½“æ‰€æœ‰çš„å“åº”æŠ¥å¤´å’ŒæŠ¥æ–‡è¢«å‘é€å®Œæˆæ—¶è¿™ä¸ªæ–¹æ³•å°†ä¿¡å·å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šè®¤ä¸ºè¿™ä¸ªæ¶ˆæ¯å®Œæˆäº†ã€‚ æ¯æ¬¡å“åº”å®Œæˆä¹‹åå¿…é¡»è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<h3 id="ç¬¬ä¸‰éƒ¨åˆ†-httpå®¢æˆ·ç«¯"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-httpå®¢æˆ·ç«¯" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† httpå®¢æˆ·ç«¯"></a>ç¬¬ä¸‰éƒ¨åˆ† httpå®¢æˆ·ç«¯</h3><p>httpæ¨¡å—æä¾›äº†ä¸¤ä¸ªåˆ›å»ºHTTPå®¢æˆ·ç«¯çš„æ–¹æ³•<code>http.request</code>å’Œ<code>http.get</code>ï¼Œä»¥å‘HTTPæœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚<code>http.getæ˜¯http.requestå¿«æ·æ–¹æ³•</code>ï¼Œè¯¥æ–¹æ³•ä»…æ”¯æŒGETæ–¹å¼çš„è¯·æ±‚ã€‚</p>
<p>ä¸€ä¸ª IncomingMessageå¯¹è±¡æ˜¯ç”± http.Serveræˆ–http.ClientRequeståˆ›å»ºçš„ï¼Œå¹¶ä½œä¸ºç¬¬ä¸€å‚æ•°åˆ†åˆ«ä¼ é€’ç»™â€™requestâ€™å’Œâ€™responseâ€™ äº‹ä»¶ã€‚å®ƒä¹Ÿå¯ä»¥è¢«ç”¨æ¥è®¿é—®åº”ç­”çš„çŠ¶æ€ï¼Œå¤´æ–‡ä»¶å’Œæ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var http &#x3D; require(&#39;http&#39;);</span><br><span class="line"></span><br><span class="line">http.createServer(function (req, res) &#123;</span><br><span class="line">  var content &#x3D; &quot;&quot;;</span><br><span class="line"></span><br><span class="line">  req.on(&#39;data&#39;, function (chunk) &#123;</span><br><span class="line">    content +&#x3D; chunk;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  req.on(&#39;end&#39;, function () &#123;</span><br><span class="line">    res.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text&#x2F;plain&quot;&#125;);</span><br><span class="line">    res.write(&quot;You&#39;ve sent: &quot; + content);</span><br><span class="line">    res.end();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;).listen(3000);</span><br></pre></td></tr></table></figure>

<p>dataäº‹ä»¶ä¼šåœ¨æ•°æ®æ¥æ”¶è¿‡ç¨‹ä¸­ï¼Œæ¯æ”¶åˆ°ä¸€æ®µæ•°æ®å°±è§¦å‘ä¸€æ¬¡ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®è¢«ä¼ å…¥å›è°ƒå‡½æ•°ã€‚endäº‹ä»¶åˆ™æ˜¯åœ¨æ‰€æœ‰æ•°æ®æ¥æ”¶å®Œæˆåè§¦å‘ã€‚</p>
<p><code>http.request(options[, callback])</code><br>requestæ–¹æ³•çš„optionså‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªURLï¼ŒNodeå†…éƒ¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨url.parse()ï¼Œå¤„ç†è¿™ä¸ªå‚æ•°ã€‚</p>
<p>optionså¯¹è±¡å¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hostï¼šHTTPè¯·æ±‚æ‰€å‘å¾€çš„åŸŸåæˆ–è€…IPåœ°å€ï¼Œé»˜è®¤æ˜¯localhostã€‚</span><br><span class="line">hostnameï¼šè¯¥å±æ€§ä¼šè¢«url.parse()è§£æï¼Œä¼˜å…ˆçº§é«˜äºhostã€‚</span><br><span class="line">portï¼šè¿œç¨‹æœåŠ¡å™¨çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯80ã€‚</span><br><span class="line">localAddressï¼šæœ¬åœ°ç½‘ç»œæ¥å£ã€‚</span><br><span class="line">socketPathï¼šUnixç½‘ç»œå¥—æ¥å­—ï¼Œæ ¼å¼ä¸ºhost:portæˆ–è€…socketPathã€‚</span><br><span class="line">methodï¼šæŒ‡å®šHTTPè¯·æ±‚çš„æ–¹æ³•ï¼Œæ ¼å¼ä¸ºå­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸ºGETã€‚</span><br><span class="line">pathï¼šæŒ‡å®šHTTPè¯·æ±‚çš„è·¯å¾„ï¼Œé»˜è®¤ä¸ºæ ¹è·¯å¾„ï¼ˆ&#x2F;ï¼‰ã€‚å¯ä»¥åœ¨è¿™ä¸ªå±æ€§é‡Œé¢ï¼ŒæŒ‡å®šæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚&#x2F;index.html?page&#x3D;12ã€‚å¦‚æœè¿™ä¸ªå±æ€§é‡Œé¢åŒ…å«éæ³•å­—ç¬¦ï¼ˆæ¯”å¦‚ç©ºæ ¼ï¼‰ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</span><br><span class="line">headersï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†HTTPè¯·æ±‚çš„å¤´ä¿¡æ¯ã€‚</span><br><span class="line">authï¼šä¸€ä¸ªä»£è¡¨HTTPåŸºæœ¬è®¤è¯çš„å­—ç¬¦ä¸²user:passwordã€‚</span><br><span class="line">agentï¼šæ§åˆ¶ç¼“å­˜è¡Œä¸ºï¼Œå¦‚æœHTTPè¯·æ±‚ä½¿ç”¨äº†agentï¼Œåˆ™HTTPè¯·æ±‚é»˜è®¤ä¸ºConnection: keep-aliveï¼Œå®ƒçš„å¯èƒ½å€¼å¦‚ä¸‹ï¼š</span><br><span class="line">undefinedï¼ˆé»˜è®¤ï¼‰ï¼šå¯¹å½“å‰hostå’Œportï¼Œä½¿ç”¨å…¨å±€Agentã€‚</span><br><span class="line">Agentï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä¼šä¼ å…¥agentå±æ€§ã€‚</span><br><span class="line">falseï¼šä¸ç¼“å­˜è¿æ¥ï¼Œé»˜è®¤HTTPè¯·æ±‚ä¸ºConnection: closeã€‚</span><br><span class="line">keepAliveï¼šä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ä¿ç•™socketä¾›æœªæ¥å…¶ä»–è¯·æ±‚ä½¿ç”¨ï¼Œé»˜è®¤ç­‰äºfalseã€‚</span><br><span class="line">keepAliveMsecsï¼šä¸€ä¸ªæ•´æ•°ï¼Œå½“ä½¿ç”¨KeepAliveçš„æ—¶å€™ï¼Œè®¾ç½®å¤šä¹…å‘é€ä¸€ä¸ªTCP KeepAliveåŒ…ï¼Œä½¿å¾—è¿æ¥ä¸è¦è¢«å…³é—­ã€‚é»˜è®¤ç­‰äº1000ï¼Œåªæœ‰keepAliveè®¾ä¸ºtrueçš„æ—¶å€™ï¼Œè¯¥è®¾ç½®æ‰æœ‰æ„ä¹‰ã€‚</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var http &#x3D; require(&#39;http&#39;);</span><br><span class="line">http.createServer(function(req, res)&#123;</span><br><span class="line">&#x2F;&#x2F;ä»…å¯¹ä»http.Serverè·å¾—åˆ°çš„è¯·æ±‚(request)æœ‰æ•ˆ.</span><br><span class="line">	console.log(req.url);</span><br><span class="line">	&#x2F;&#x2F;è¯·æ±‚&#x2F;å“åº” å¤´å¯¹è±¡.</span><br><span class="line">	console.log(req.headers);</span><br><span class="line">	&#x2F;&#x2F;æœåŠ¡å™¨çš„HTTPç‰ˆæœ¬ã€‚</span><br><span class="line">	console.log(req.httpVersion);</span><br><span class="line">	&#x2F;&#x2F;æ¥æ”¶åˆ°çš„åŸå§‹è¯·æ±‚&#x2F;å“åº”å¤´å­—æ®µåˆ—è¡¨ã€‚</span><br><span class="line">	console.log(req.rawHeaders);</span><br><span class="line">	&#x2F;&#x2F;ä»…å¯¹ä»http.Serverè·å¾—åˆ°çš„è¯·æ±‚(request)æœ‰æ•ˆ.æ¯”å¦‚â€˜GETâ€™ã€â€˜DELETEâ€™ã€‚</span><br><span class="line">	console.log(req.method);</span><br><span class="line">&#125;).listen(3000, &#39;127.0.0.1&#39;);</span><br></pre></td></tr></table></figure>



<h3 id="ç¬¬å››éƒ¨åˆ†-å®ä¾‹"><a href="#ç¬¬å››éƒ¨åˆ†-å®ä¾‹" class="headerlink" title="ç¬¬å››éƒ¨åˆ† å®ä¾‹"></a>ç¬¬å››éƒ¨åˆ† å®ä¾‹</h3><h4 id="1-åˆ›å»ºæœåŠ¡å™¨-å®ç°GETæ–¹æ³•"><a href="#1-åˆ›å»ºæœåŠ¡å™¨-å®ç°GETæ–¹æ³•" class="headerlink" title="1 åˆ›å»ºæœåŠ¡å™¨, å®ç°GETæ–¹æ³•"></a>1 åˆ›å»ºæœåŠ¡å™¨, å®ç°GETæ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var http &#x3D; require(&#39;http&#39;);</span><br><span class="line">&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨, å›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºå“åº”, å’Œè¯·æ±‚</span><br><span class="line">http.createServer(function(request, response)&#123;</span><br><span class="line">	&#x2F;&#x2F;response.writeHeadæ–¹æ³•ç”¨æ¥å†™å…¥HTTPå›åº”çš„å¤´ä¿¡æ¯ï¼›</span><br><span class="line">	response.writeHead(200, &#123;&#39;Content-Type&#39;: &#39;text&#x2F;plain&#39;&#125;);</span><br><span class="line">	&#x2F;&#x2F;æŒ‡å®šHTTPå›åº”çš„å†…å®¹ã€‚</span><br><span class="line">	&#x2F;&#x2F;response.write(&#39;hello world&#39;);</span><br><span class="line">	&#x2F;&#x2F;response.endæ–¹æ³•ç”¨æ¥å†™å…¥HTTPå›åº”çš„å…·ä½“å†…å®¹ï¼Œä»¥åŠå›åº”å®Œæˆåå…³é—­æœ¬æ¬¡å¯¹è¯ã€‚</span><br><span class="line">	response.end(&#39;hello world&#39;);</span><br><span class="line">	&#x2F;&#x2F;ç›‘å¬ç«¯å£å·å’Œä¸»æœºå</span><br><span class="line">&#125;).listen(3000, &#39;127.0.0.1&#39;);</span><br><span class="line"></span><br><span class="line">console.log(&#39;127.0.0.1:3000&#39;);</span><br></pre></td></tr></table></figure>


<h4 id="2-åŠ è½½HTMLæ–‡ä»¶"><a href="#2-åŠ è½½HTMLæ–‡ä»¶" class="headerlink" title="2. åŠ è½½HTMLæ–‡ä»¶"></a>2. åŠ è½½HTMLæ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var http &#x3D; require(&#39;http&#39;);</span><br><span class="line">var fs &#x3D; require(&#39;fs&#39;);</span><br><span class="line">http.createServer(function(req, res)&#123;</span><br><span class="line">	&#x2F;&#x2F;è¯»å–HTMLæ–‡ä»¶</span><br><span class="line">	fs.readFile(&#39;.&#x2F;2index.html&#39;, &#39;utf-8&#39;,function(err, data)&#123;</span><br><span class="line">		if(err) throw err;</span><br><span class="line">		&#x2F;&#x2F;ä¸ºé»˜è®¤æˆ–è€…å·²å­˜åœ¨çš„å¤´è®¾ç½®ä¸€æ¡å•ç‹¬çš„å¤´å†…å®¹ã€‚</span><br><span class="line">		res.setHeader(&quot;Content-Type&quot;,&quot;text&#x2F;html;charset&#x3D;&#39;utf-8&#39;&quot;);</span><br><span class="line">		&#x2F;&#x2F;å“åº”çš„æ•°æ®</span><br><span class="line">		res.end(data);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;).listen(3000, &#39;127.0.0.1&#39;);</span><br></pre></td></tr></table></figure>

<h4 id="3-åˆ›å»ºæœåŠ¡å™¨-å®ç°POSTæ–¹æ³•"><a href="#3-åˆ›å»ºæœåŠ¡å™¨-å®ç°POSTæ–¹æ³•" class="headerlink" title="3 åˆ›å»ºæœåŠ¡å™¨, å®ç°POSTæ–¹æ³•"></a>3 åˆ›å»ºæœåŠ¡å™¨, å®ç°POSTæ–¹æ³•</h4><p>ä¸€ä¸ªç®€å•çš„postè¯·æ±‚:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var http &#x3D; require(&#39;http&#39;);</span><br><span class="line">var fs &#x3D; require(&#39;fs&#39;);</span><br><span class="line"></span><br><span class="line">http.createServer(function(req, res) &#123;</span><br><span class="line">	&#x2F;&#x2F;fsæ¨¡å—åˆ›å»ºæµæ–‡ä»¶, åç§°ä¸ºpost.txt</span><br><span class="line">	var file &#x3D; fs.createWriteStream(&#39;post.txt&#39;);</span><br><span class="line">	&#x2F;&#x2F;&#x2F;&#x2F;ç®¡å­ pipeè‡ªåŠ¨è°ƒç”¨äº†data,endç­‰äº‹ä»¶ writeStream&#x2F;readStream</span><br><span class="line">	req.pipe(file);</span><br><span class="line">	&#x2F;&#x2F; å½“æœ‰æ•°æ®æµæ—¶ï¼Œå†™å…¥æ•°æ®</span><br><span class="line">	req.on(&#39;data&#39;, function(postData)&#123;</span><br><span class="line">		console.log(postData);</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	req.on(&#39;end&#39;, function()&#123;</span><br><span class="line">		res.end(&#39;end&#39;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;).listen(3000);</span><br></pre></td></tr></table></figure>


<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-3bdb0fd3627591a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="postè¯·æ±‚"></p>
<p>å‚è€ƒé“¾æ¥<br><a href="http://www.ruanyifeng.com/blog/2016/08/http.html" target="_blank" rel="noopener">1.HTTP åè®®å…¥é—¨</a><br><a href="http://www.ruanyifeng.com/blog/2016/08/migrate-from-http-to-https.html" target="_blank" rel="noopener">2.HTTPS å‡çº§æŒ‡å—</a><br><a href="http://www.cnblogs.com/biyeymyhjob/archive/2012/07/28/2612910.html" target="_blank" rel="noopener">3.HTTPè¯·æ±‚æŠ¥æ–‡å’ŒHTTPå“åº”æŠ¥æ–‡</a><br><a href="http://yijiebuyi.com/blog/d37512fc6df0fc4d0adfc2ec5c3d46ff.html" target="_blank" rel="noopener">4.node.js querystringç±»ä»‹ç»</a><br><a href="https://segmentfault.com/a/1190000000519006" target="_blank" rel="noopener">5.nodejsä¸­æµ(stream)çš„ç†è§£</a><br><a href="http://www.cnblogs.com/dolphinX/p/3460545.html" target="_blank" rel="noopener">6.ç®€å•ç†è§£Socket</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/13/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/13/index/" class="post-title-link" itemprop="url">Node.jsåŸºç¡€ç³»åˆ—ä¹‹Eventæ¨¡å—ã€4ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-13 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-13T10:38:59+08:00">2019-05-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-16 02:54:00" itemprop="dateModified" datetime="2020-05-16T02:54:00+08:00">2020-05-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node/" itemprop="url" rel="index"><span itemprop="name">Node</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ol>
<li>ç†è§£JS å•çº¿ç¨‹ã€ Node.js EventLoop</li>
<li>ç†è§£Node.jsäº‹ä»¶æ¨¡å—</li>
</ol>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†-å‰æ-Nodejs-EventLoop"><a href="#ç¬¬ä¸€éƒ¨åˆ†-å‰æ-Nodejs-EventLoop" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ† å‰æ Nodejs EventLoop"></a>ç¬¬ä¸€éƒ¨åˆ† å‰æ Nodejs EventLoop</h3><h4 id="1-ã€å †ã€‘ã€æ ˆã€‘ã€é˜Ÿåˆ—ã€‘"><a href="#1-ã€å †ã€‘ã€æ ˆã€‘ã€é˜Ÿåˆ—ã€‘" class="headerlink" title="1 ã€å †ã€‘ã€æ ˆã€‘ã€é˜Ÿåˆ—ã€‘"></a>1 ã€å †ã€‘ã€æ ˆã€‘ã€é˜Ÿåˆ—ã€‘</h4><p><img data-src="http://upload-images.jianshu.io/upload_images/326255-bf1b1203a4c73069.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å †æ ˆé˜Ÿåˆ—"></p>
<p>ä»»ä½•ä¸€ç§è¯­è¨€çš„è¿è¡Œç¯å¢ƒéƒ½å°‘ä¸äº†*<em>å †ï¼ˆheapï¼‰æ ˆï¼ˆStackï¼‰é˜Ÿåˆ— (queue) *</em> JSä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<ol>
<li>JSçš„<code>ä¸´æ—¶å˜é‡ä»¥åŠè°ƒç”¨æ—¶çš„å½¢å‚</code>ç­‰ç­‰æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨<code>æ ˆ</code>ä¸­ï¼›</li>
<li><code>å †</code>åˆ™æ˜¯å­˜å‚¨å®é™…çš„<code>å¯¹è±¡</code>;</li>
<li>å¯¹è±¡çš„<code>å¼•ç”¨å˜é‡å(æŒ‡é’ˆ)</code>ä¹Ÿæ˜¯åœ¨<code>æ ˆ</code>ï¼›</li>
</ol>
<p>è€Œé˜Ÿåˆ—åˆ™æ˜¯JSåœ¨å®æ—¶è¿è¡Œç¯å¢ƒä¸­åˆ›å»ºçš„æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…äº‹ä»¶é˜Ÿåˆ—ã€‚</p>
<p><strong>JSæ˜¯å•çº¿ç¨‹ï¼Œæ‰€ä»¥é˜Ÿåˆ—çš„å®ç°è®©JSçš„å¼‚æ­¥å¤„ç†æœ‰äº†å¯èƒ½æ€§ã€‚</strong></p>
<h4 id="2-å•çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—"><a href="#2-å•çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="2 å•çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—"></a>2 å•çº¿ç¨‹ã€ä»»åŠ¡é˜Ÿåˆ—</h4><blockquote>
<p>å°½ä¿¡ä¹¦ä¸å¦‚æ— ä¹¦ï¼Œå°±å–œæ¬¢è¿™ç§æœ‰ç†æœ‰æ®çš„</p>
</blockquote>
<p>æ‘˜å½•è‡ª<a href="http://blog.csdn.net/lin_credible/article/details/40143961" target="_blank" rel="noopener">ã€æœ´çµè¯„æ³¨ã€‘JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></p>
<p>ä¸ºäº†é¿å…å¤æ‚æ€§ï¼ŒJSä»ä¸€è¯ç”Ÿï¼Œ<strong>åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹</strong>ã€‚<br><code>JavaScriptå°±æ˜¯å•çº¿ç¨‹</code>ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ï¼Œå°†æ¥ä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p>
<p>ä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUçš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5æå‡ºWeb Workeræ ‡å‡†ï¼Œ<code>å…è®¸JavaScriptè„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹</code>ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶<strong>æ²¡æœ‰æ”¹å˜JavaScriptå•çº¿ç¨‹çš„æœ¬è´¨ã€‚</strong></p>
<p>å¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæœºåˆ¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚</span><br><span class="line">ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼ˆtask queueï¼‰ã€‚ç³»ç»ŸæŠŠå¼‚æ­¥ä»»åŠ¡æ”¾åˆ°&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ä¹‹ä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œåç»­çš„ä»»åŠ¡ã€‚</span><br><span class="line">ï¼ˆ3ï¼‰ä¸€æ—¦&quot;æ‰§è¡Œæ ˆ&quot;ä¸­çš„æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œå¼‚æ­¥ä»»åŠ¡å·²ç»ç»“æŸäº†ç­‰å¾…çŠ¶æ€ï¼Œå°±ä¼šä»&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;è¿›å…¥æ‰§è¡Œæ ˆï¼Œæ¢å¤æ‰§è¡Œã€‚</span><br><span class="line">ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™æ®µåˆæ­¥åœ°åœ¨è¯´event loopã€‚ä½†æ˜¯å¼‚æ­¥è·Ÿevent loopå…¶å®æ²¡æœ‰å…³ç³»ã€‚å‡†ç¡®çš„è®²ï¼Œ<strong>ã€event loopæ˜¯å®ç°å¼‚æ­¥çš„ä¸€ç§æœºåˆ¶ã€‘</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ã€ä¸Šé¢æåˆ°çš„ä¸€ç³»åˆ—çš„æ‰‹æ®µå…¶å®å°±æ˜¯å®ç°å¼‚æ­¥çš„æ–¹æ³•ï¼Œå…¶ä¸­å°±åŒ…æ‹¬event loopã€‚ä»¥åŠè½®è¯¢ã€äº‹ä»¶ç­‰ã€‚ã€‘</span><br><span class="line">ã€æ‰€è°“è½®è¯¢ï¼šå°±æ˜¯ä½ åœ¨æ”¶é“¶å°ä»˜é’±ä¹‹åï¼Œååˆ°ä½ç½®ä¸Šä¸åœçš„é—®æœåŠ¡å‘˜ä½ çš„èœåšå¥½äº†æ²¡ã€‚ã€‘</span><br><span class="line">ã€æ‰€è°“ï¼ˆäº‹ä»¶ï¼‰ï¼šå°±æ˜¯ä½ åœ¨æ”¶é“¶å°ä»˜é’±ä¹‹åï¼Œä½ ä¸ç”¨ä¸åœçš„é—®ï¼Œé¥­èœåšå¥½äº†æœåŠ¡å‘˜ä¼šè‡ªå·±å‘Šè¯‰ä½ ã€‚ã€‘</span><br></pre></td></tr></table></figure>

<p>ã€JavaScriptè¿è¡Œç¯å¢ƒçš„è¿è¡Œæœºåˆ¶ï¼Œä¸æ˜¯JavaScriptçš„è¿è¡Œæœºåˆ¶ã€‚ã€‘</p>
<h4 id="3-äº‹ä»¶å¾ªç¯"><a href="#3-äº‹ä»¶å¾ªç¯" class="headerlink" title="3 äº‹ä»¶å¾ªç¯"></a>3 äº‹ä»¶å¾ªç¯</h4><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹nodejsæœ¬è´¨ç»“æ„å›¾</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-f87e70367e376a31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>Node.js é€šè¿‡ libuv æ¥å¤„ç†ä¸æ“ä½œç³»ç»Ÿçš„äº¤äº’ï¼Œå¹¶ä¸”å› æ­¤å…·å¤‡äº†ã€å¼‚æ­¥ã€éé˜»å¡ã€äº‹ä»¶é©±åŠ¨ã€‘çš„èƒ½åŠ›ã€‚Node.js å®é™…ä¸Šæ˜¯ Javascript æ‰§è¡Œçº¿ç¨‹çš„<strong>å•çº¿ç¨‹</strong>ï¼ŒçœŸæ­£çš„<strong>I/O æ“ä½œ</strong>ï¼Œåº•å±‚ API è°ƒç”¨éƒ½æ˜¯é€šè¿‡<code>å¤šçº¿ç¨‹æ‰§è¡Œ</code>çš„ã€‚</p>
<blockquote>
<p>æœ¬è´¨ä¹Ÿå°±æ˜¯ï¼šä»»åŠ¡æ¥æ”¶æ˜¯å•çº¿ç¨‹ï¼Œä»»åŠ¡æ‰§è¡Œæ˜¯å¤šçº¿ç¨‹ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆä¹Ÿå°±æ˜¯ä¸»è¦ä¾é <code>libuv</code>ï¼Œé‚£ä¹ˆæœ¬æ–‡ä¸»è¦ä»‹ç»Nodejsäº‹ä»¶æ¨¡å—ï¼Œå½“ç„¶ç¦»ä¸å¼€åŸç†</p>
<p>ä¸ºä½•æ˜¯è¿™æ ·ï¼Ÿ</p>
<p>ä¸ºä½•è¿™ä¹ˆåŠï¼Ÿ</p>
<p>ä¸ºä½•åˆå‡ºç°é‚£ä¹ˆå¤šå›è°ƒå‡½æ•°ï¼Ÿ</p>
<p>å¸¦ç€ä¸€äº›åˆ—é—®é¢˜ææ˜ç™½äº†ç†è®ºï¼Œè‡³äºä»£ç ï¼Œé‚£ä¹Ÿè°ƒç”¨å“ªäº›å¤§ç¥å†™çš„APIå§ï¼</p>
<p><strong>è†œæ‹œå¤§ç¥ä¸‰ç§’é’Ÿ</strong></p>
<p>æŠ€æœ¯(è‰ºæœ¯)æºè‡ªç”Ÿæ´»ã€é«˜äºç”Ÿæ´»ã€‚å¯¹å§ã€‚</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-d471d0bb2ec57f84.gif?imageMogr2/auto-orient/strip" alt="æ­ªç“œä»çœŸä¼šç©"></p>
<p>åªè¦å¼€å§‹å¯åŠ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå§‘å¨˜å°±å¼€å§‹å—¨èµ·æ¥äº†ï¼Œå…¶å®æˆ‘ä»¬äº‹ä»¶å¾ªç¯ä¹Ÿæ˜¯è¿™æ ·çš„ï¼ä»å¯åŠ¨å¼€å§‹ï¼Œå°±ä¸€ç›´ä¸åœæ­¢çš„ç›‘å¬ã€‚</p>
<p>ã€è®ºè‹±æ–‡çš„é‡è¦æ€§ã€‘</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-0508d9f9917ca62d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ä¸€å›¾èƒœåƒè¨€ï¼Œä½†æˆ‘è¿˜æ˜¯å°±ä¸‹å›¾åšä¸ªç®€å•çš„æ¢³ç†å§ã€‚æˆ‘å¯ä¸æƒ³è¢«åŒä¸ºå­¦æ¸£çš„è€é“ä»¬éª‚å“ˆã€‚</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-e991be1421256e2e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æˆ‘ä»¬ç¨‹åºçŒ¿å…¶å®å·¥ä½œè¿˜æ˜¯ä»…é™äºä»£ç è°ƒç”¨ç¼–å†™é˜¶æ®µï¼Œä¸»è¦çš„æ ¸å¿ƒåœ¨äºç†è§£å†…éƒ¨åŸç†ï¼Œç„¶åæ ¹æ®éœ€æ±‚å»ç¼–å†™(å¤åˆ¶)ä»£ç ã€‚</p>
<p>è®²ä¸ªæ•…äº‹å§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JSå•èº«ç‹—(å•çº¿ç¨‹)æ— å¼‚è®®ï¼Œä½†å®ƒä¹Ÿæ˜¯ä¸ªè´ªå¿ƒçš„é»‘å¿ƒè€æ¿ï¼Œåœ¨å¤–è¾¹ä¸€ç›´æ¥æ´»ä¸€ç›´æ¥æ´»ï¼Œæ ¹æœ¬æ— è§†</span><br><span class="line">å‘˜å·¥çš„æ­»æ´»ï¼Œç¨‹åºçŒ¿ä»¬ä¸ºäº†æ”¹å˜ä¸–ç•Œ(ä¸ºäº†ç”Ÿå­˜)ä¸å¾—ä¸å¬äº§å“ç»ç†çš„å®‰æ’ï¼ˆç¨‹åºçŒ¿å¿ƒä¸­çš„æ¶é­”ï¼‰ï¼Œ</span><br><span class="line">äº§å“ç»ç†æ‰¿ä¸Šå¯ä¸‹ï¼Œä¸€ç›´åˆ†å‘ä»»åŠ¡(é—²å°±ä¸æ˜¯ä»£ç ç‹—äº†)ï¼Œè€Œä¸ºäº†ç†æƒ³è€Œå¥‹æˆ˜(åˆ«ç»™æˆ‘å˜šç‘Ÿå››ç‚¹çš„æ™¨æ›¦ï¼Œ</span><br><span class="line">è€å­åˆšä¸‹ç­)ã€‚</span><br><span class="line">ä¸–ç•Œè¶Šæ¥è¶Šç¾å¥½(ä¸ºå¥‹æˆ˜çš„äººç¥ˆç¥·å®‰åº·)ï¼</span><br></pre></td></tr></table></figure>


<p>Nodejsä¸­æ˜¯æ€ä¹ˆä¸ªæƒ…å†µï¼Œè¯·çœ‹ä¸‹å›¾</p>
<p><img data-src="http://upload-images.jianshu.io/upload_images/326255-7399386c22e242bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="event5.png"></p>
<p>å¥½äº†ï¼Œç»“æŸäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä»£ç å•¦ã€‚</p>
<h3 id="ç¬¬äºŒéƒ¨åˆ†-Eventsæ¨¡å—æ¦‚è¿°"><a href="#ç¬¬äºŒéƒ¨åˆ†-Eventsæ¨¡å—æ¦‚è¿°" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ† Eventsæ¨¡å—æ¦‚è¿°"></a>ç¬¬äºŒéƒ¨åˆ† Eventsæ¨¡å—æ¦‚è¿°</h3><h4 id="1-Eventsæ¨¡å—"><a href="#1-Eventsæ¨¡å—" class="headerlink" title="1 Eventsæ¨¡å—"></a>1 Eventsæ¨¡å—</h4><p><strong>Eventsæ¨¡å—</strong>æ˜¯Nodeå¯¹â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼ï¼ˆpublish/subscribeï¼‰çš„å®ç°ã€‚ä¸€ä¸ªå¯¹è±¡é€šè¿‡è¿™ä¸ªæ¨¡å—ï¼Œå‘å¦ä¸€ä¸ªå¯¹è±¡ä¼ é€’æ¶ˆæ¯ã€‚</p>
<p><strong>Node</strong>ä¸­çš„<em>Eventæ¨¡å—ä»…ä»…<em>æä¾›äº†ä¸€ä¸ªå¯¹è±¡: *</em>EventEmitter<strong>, EventEmitter çš„</strong>æ ¸å¿ƒ*<em>å°±æ˜¯</em>äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚</em></p>
<p>è·å–<strong>EventEmitter</strong>å¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å¼•ç”¨æ¨¡å—events, ç‚¹è¯­æ³•è·å–åˆ°EventEmitter</span><br><span class="line">var EventEmitter &#x3D; require(&#39;events&#39;).EventEmitter;</span><br><span class="line">&#x2F;&#x2F;åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡, è¿™ä¸ªå®ä¾‹å°±æ˜¯æ¶ˆæ¯ä¸­å¿ƒã€‚</span><br><span class="line">var emitter &#x3D; new EventEmitter;</span><br></pre></td></tr></table></figure>


<h4 id="2-EventEmitter-å®ä¾‹å¯¹è±¡çš„æ–¹æ³•"><a href="#2-EventEmitter-å®ä¾‹å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="2 EventEmitter å®ä¾‹å¯¹è±¡çš„æ–¹æ³•"></a>2 EventEmitter å®ä¾‹å¯¹è±¡çš„æ–¹æ³•</h4><p><em>2.1 emitter.on(eventName, listener), ç›‘å¬äº‹ä»¶,å¦‚æœè§¦å‘å°±è°ƒç”¨å›è°ƒå‡½æ•°</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. eventName &lt;String&gt; | &lt;Symbol&gt;: äº‹ä»¶åç§°, åè¾¹å¯ä»¥è·Ÿä¸Šå‡½æ•°;</span><br><span class="line">2. listener &lt;Function&gt; : å›è°ƒå‡½æ•°;</span><br></pre></td></tr></table></figure>
<p><em>2.2 emitter.emit(eventName[, â€¦args]), æ ¹æ®eventNameå‘é€é€šçŸ¥, è§¦å‘äº‹ä»¶, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åç§°, å…¶ä½™çš„å‚æ•°ä¼šä¾æ¬¡ä¼ å…¥å›è°ƒå‡½æ•°</em></p>
<p>ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•çš„ç¤ºä¾‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var EventEmitter &#x3D; require(&#39;events&#39;).EventEmitter;</span><br><span class="line">var emitter &#x3D; new EventEmitter();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;ç›‘å¬å‡½æ•°1, äº‹ä»¶åä¸º--fun1</span><br><span class="line">emitter.on(&#39;fun1&#39;, function()&#123;</span><br><span class="line">	console.log(&#39;è§¦å‘å‡½æ•°1&#39;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;å®šä¹‰æœ‰å‚æ•°å‡½æ•°fun2, </span><br><span class="line">var fun2 &#x3D; function(para)&#123;</span><br><span class="line">	console.log(&#39;è§¦å‘å‡½æ•°2, å‚æ•°ä¸º&#39; + para);</span><br><span class="line">&#125;;</span><br><span class="line">&#x2F;&#x2F;ç›‘å¬fun2</span><br><span class="line">emitter.on(&#39;fun2&#39;, fun2);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;è§¦å‘äº‹ä»¶å</span><br><span class="line">emitter.emit(&#39;fun1&#39;);</span><br><span class="line">&#x2F;&#x2F;è§¦å‘äº‹ä»¶åå¹¶ä¸”ä¼ å‚æ•°</span><br><span class="line">emitter.emit(&#39;fun2&#39;, &#39;event&#39;);</span><br></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœä¸º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node 2on.js </span><br><span class="line">è§¦å‘å‡½æ•°1</span><br><span class="line">è§¦å‘å‡½æ•°2, å‚æ•°ä¸ºevent</span><br></pre></td></tr></table></figure>

<p><em>2.3 emitter.once(eventName, listener), ç±»ä¼¼onæ–¹æ³•, ä½†å›è°ƒå‡½æ•°åªæ˜¯æ‰§è¡Œä¸€æ¬¡</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var EventEmitter &#x3D; require(&#39;events&#39;).EventEmitter;</span><br><span class="line">var emitter &#x3D; new EventEmitter();</span><br><span class="line"></span><br><span class="line">emitter.once(&#39;oncefun&#39;, function()&#123;</span><br><span class="line">	console.log(&#39;å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡&#39;);</span><br><span class="line">&#125;);</span><br><span class="line">emitter.emit(&#39;oncefun&#39;);</span><br><span class="line">emitter.emit(&#39;oncefun&#39;);</span><br><span class="line"></span><br><span class="line">console.log(&#39;--------&#39;)</span><br><span class="line"></span><br><span class="line">emitter.on(&#39;fun&#39;, function()&#123;</span><br><span class="line">	console.log(&#39;å‡½æ•°&#39;);</span><br><span class="line">&#125;);</span><br><span class="line">emitter.emit(&#39;fun&#39;);</span><br><span class="line">emitter.emit(&#39;fun&#39;);</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œçš„ç»“æœä¸º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node 3once.js </span><br><span class="line">å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡</span><br><span class="line">å‡½æ•°</span><br><span class="line">å‡½æ•°</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è§¦å‘å¤šæ¬¡oncefun, ä½†ä¾ç„¶æ‰“å°ä¸€æ¬¡;ä¸ä¸‹è¾¹å½¢æˆå¯¹æ¯”;,</p>
<p><em>2.4 emitter.addListener(eventName, listener)ç±»ä¼¼äºemitter.on(eventName, listener)</em></p>
<p><em>2.5 emitter.removeListener(eventName, listener), ç§»é™¤ç›‘å¬</em></p>
<p>è¯¦ç»†è§å®ä¾‹ä»£ç :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var EventEmitter &#x3D; require(&#39;events&#39;).EventEmitter;</span><br><span class="line">var emitter &#x3D; new EventEmitter();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªå‡½æ•°</span><br><span class="line">var removeFun &#x3D; function()&#123;</span><br><span class="line">	console.log(&#39;è¾“å‡ºç»“æœ&#39;);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;ä»¥funåç§°ç›‘å¬removeFun</span><br><span class="line">emitter.on(&#39;fun&#39;, removeFun);</span><br><span class="line">&#x2F;&#x2F;æ¯ä¸ª30æ¯«ç§’è§¦å‘ä¸€æ¬¡å›è°ƒå‡½æ•°</span><br><span class="line">setInterval(function()&#123;</span><br><span class="line">	emitter.emit(&#39;fun&#39;);</span><br><span class="line">&#125;, 30);</span><br><span class="line">&#x2F;&#x2F;200æ¯«ç§’ä»¥åè§¦å‘å›è°ƒå‡½æ•°</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">	emitter.removeListener(&#39;fun&#39;, removeFun);</span><br><span class="line">&#125;, 200);</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ node 5removeListener.js </span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line">è¾“å‡ºç»“æœ</span><br><span class="line"></span><br><span class="line">#å…‰æ ‡åœæ­¢</span><br></pre></td></tr></table></figure>



<p>######ç¬¬ä¸‰éƒ¨åˆ† æ›´å¤šAPIè¯¦è§</p>
<p>è¯­æ³•åç§°è§‰å¾—æŒºå¥½çš„, è§åçŸ¥æ„. æ›´å¤šçš„è¯­æ³•å°±çœ‹<a href="https://nodejs.org/api/events.html#events_emitter_removelistener_eventname_listener" target="_blank" rel="noopener">Nodeå®˜ç½‘</a>å§ -__-</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Event: &#39;newListener&#39;</span><br><span class="line">Event: &#39;removeListener&#39;</span><br><span class="line">EventEmitter.listenerCount(emitter, eventName)</span><br><span class="line">EventEmitter.defaultMaxListeners</span><br><span class="line">emitter.addListener(eventName, listener)</span><br><span class="line">emitter.emit(eventName[, ...args])</span><br><span class="line">emitter.eventNames()</span><br><span class="line">emitter.getMaxListeners()</span><br><span class="line">emitter.listenerCount(eventName)</span><br><span class="line">emitter.listeners(eventName)</span><br><span class="line">emitter.on(eventName, listener)</span><br><span class="line">emitter.once(eventName, listener)</span><br><span class="line">emitter.prependListener(eventName, listener)</span><br><span class="line">emitter.prependOnceListener(eventName, listener)</span><br><span class="line">emitter.removeAllListeners([eventName])</span><br><span class="line">emitter.removeListener(eventName, listener)</span><br><span class="line">emitter.setMaxListeners(n)</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://simuty.com/2019/05/12/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Howard">
      <meta itemprop="description" content="è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ç®€å•å³æ˜¯ç¾">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/12/index/" class="post-title-link" itemprop="url">PythonåŸºç¡€ç³»åˆ—ä¹‹--é˜¶æ®µæ€»ç»“ã€8ã€‘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-05-12 10:38:59" itemprop="dateCreated datePublished" datetime="2019-05-12T10:38:59+08:00">2019-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-28 19:53:09" itemprop="dateModified" datetime="2020-05-28T19:53:09+08:00">2020-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ol>
<li>è¡¥å……åŸºç¡€é˜¶æ®µç›¸å…³å†…å®¹</li>
<li>å›é¡¾åŸºç¡€ç³»åˆ—ä¹‹<strong>æ•°æ®ç±»å‹</strong></li>
</ol>
<h3 id="ç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†"></a>ç¬¬ä¸€éƒ¨åˆ†</h3><p>æœ‰äº†å‰ä¸€éƒ¨åˆ†çš„é“ºå«ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»æ˜ç™½<strong>å˜é‡ååªæ˜¯å¯¹å†…å­˜ç©ºé—´çš„æ˜ å°„</strong>ï¼Œé‚£ä¹ˆ</p>
<ol>
<li>å…±äº«å˜é‡æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</li>
<li>æ·±æµ…æ‹·è´åˆæ˜¯æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<h4 id="1-èµ‹å€¼ä¸æ·±æµ…æ‹·è´"><a href="#1-èµ‹å€¼ä¸æ·±æµ…æ‹·è´" class="headerlink" title="1. èµ‹å€¼ä¸æ·±æµ…æ‹·è´"></a>1. èµ‹å€¼ä¸æ·±æµ…æ‹·è´</h4><p>ğŸ¤” æ€è€ƒå¦‚ä¸‹ä»£ç ï¼Œ<code>aã€bã€cã€x</code>å››è€…åœ¨<code>x = x + [3, 4]</code>å‰åçš„åœ°å€æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line">c = <span class="number">1</span></span><br><span class="line"><span class="comment"># print(" a: %s \n b: %s \n c: %s" % (id(a), id(b), id(c)))</span></span><br><span class="line"><span class="comment"># print(" -----")</span></span><br><span class="line">x = [a, b, c]</span><br><span class="line"><span class="comment"># print(" x: %s \n ------ \n x[0]: %s \n x[1]: %s \n x[2]: %s" % (id(x), id(x[0]), id(x[1]), id(x[2])))</span></span><br><span class="line">x = x + [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># print(" -----")</span></span><br><span class="line"><span class="comment"># print(" x: %s \n ------ \n x[0]: %s \n x[1]: %s \n x[2]: %s" % (id(x), id(x[0]), id(x[1]), id(x[2])))</span></span><br><span class="line">a = <span class="number">3</span></span><br><span class="line"><span class="comment"># print(" a: %s" % (id(a)))</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a: <span class="number">4323184656</span></span><br><span class="line">b: <span class="number">4323184688</span></span><br><span class="line">c: <span class="number">4323184656</span></span><br><span class="line">-----</span><br><span class="line">x: <span class="number">4324441928</span></span><br><span class="line">------</span><br><span class="line">x[<span class="number">0</span>]: <span class="number">4323184656</span></span><br><span class="line">x[<span class="number">1</span>]: <span class="number">4323184688</span></span><br><span class="line">x[<span class="number">2</span>]: <span class="number">4323184656</span></span><br><span class="line">-----</span><br><span class="line">x: <span class="number">4324441928</span>, y: <span class="number">4324441928</span></span><br><span class="line">-----</span><br><span class="line">x: <span class="number">4326634696</span></span><br><span class="line">------</span><br><span class="line">x[<span class="number">0</span>]: <span class="number">4323184656</span></span><br><span class="line">x[<span class="number">1</span>]: <span class="number">4323184688</span></span><br><span class="line">x[<span class="number">2</span>]: <span class="number">4323184656</span></span><br><span class="line">a: <span class="number">4323184720</span></span><br></pre></td></tr></table></figure>

<p><img data-src="01.jpg" alt="å››ç§æƒ…å†µ"></p>
<ol>
<li>å°½é‡ç”¨<code>+=</code>,<code>-=</code>ä¹‹ç±»å¤åˆç¬¦å·çš„ï¼Œå› ä¸ºæ— éœ€å¼€è¾Ÿæ–°çš„ï¼Œ+=ä¼šè‡ªåŠ¨è°ƒç”¨ extend æ–¹æ³•è¿›è¡Œåˆå¹¶è¿ç®—, å…±äº«å¼•ç”¨ï¼›</li>
<li><strong>ã€ä¸å¯å˜å¯¹è±¡ã€‘</strong>ï¼šå¦‚æ‰“å°ç»“æœä¸­çš„<code>å¼€å§‹å’Œç»“æŸ</code>çš„<code>a</code>,åœ°å€æ˜¯ä¸åŒçš„ï¼Œé‡æ–°ç”³è¯·åœ°å€ï¼›</li>
<li><strong>ã€å¯å˜å¯¹è±¡ã€‘</strong>ï¼šæ— éœ€é‡æ–°ç”³è¯·åœ°å€ï¼Œä½†åŒºåŸŸå¯é•¿å¯çŸ­ï¼›</li>
</ol>
<h4 id="2-æµ…æ‹·è´"><a href="#2-æµ…æ‹·è´" class="headerlink" title="2. æµ…æ‹·è´"></a>2. æµ…æ‹·è´</h4><p>ä¸ç®¡å¤šä¹ˆå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œæµ…æ‹·è´éƒ½åªä¼š copy ä¸€å±‚ï¼›å¦‚éœ€<strong>å®Œæ•´æ‹·è´ï¼Œè¯·å‚è€ƒæ·±æ‹·è´</strong>ï¼Œè¿˜è®°å¾—è¿™ä¸ªå›¾ä¹ˆï¼Ÿ</p>
<p><img data-src="7.jpg" alt="æµ…å¤åˆ¶"></p>
<h4 id="3-æ·±æ‹·è´"><a href="#3-æ·±æ‹·è´" class="headerlink" title="3. æ·±æ‹·è´"></a>3. æ·±æ‹·è´</h4><p>æ·±æ‹·è´â€”â€”å³ python çš„ copy æ¨¡å—æä¾›çš„å¦ä¸€ä¸ª deepcopy æ–¹æ³•ã€‚æ·±æ‹·è´ä¼šå®Œå…¨å¤åˆ¶åŸå˜é‡ç›¸å…³çš„æ‰€æœ‰æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€å¥—å®Œå…¨ä¸€æ ·çš„å†…å®¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯¹è¿™ä¸¤ä¸ªå˜é‡ä¸­çš„ä¸€ä¸ªè¿›è¡Œ<strong>ä»»æ„ä¿®æ”¹éƒ½ä¸ä¼šå½±å“å…¶ä»–å˜é‡</strong>ã€‚</p>
<p><img data-src="9.jpg" alt="æ·±å¤åˆ¶"></p>
<h3 id="ç¬¬äºŒéƒ¨åˆ†"><a href="#ç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†"></a>ç¬¬äºŒéƒ¨åˆ†</h3><h4 id="1-æ‰“å°-Print"><a href="#1-æ‰“å°-Print" class="headerlink" title="1. æ‰“å° Print"></a>1. æ‰“å° Print</h4><p>æ—¥å¸¸è°ƒè¯•ï¼Œè¿˜æ˜¯ç¦»ä¸å¼€æ‰“å°çš„ï¼Œå¤§æ¦‚äº†è§£ä¸‹å¦‚ä½•æ‰“å°ï¼Œæœ‰ä¸¤ç§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. %</span><br><span class="line">2. format</span><br></pre></td></tr></table></figure>

<p>ä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">" x: %s, y: %s"</span> % (id(x), id(y)))</span><br><span class="line"></span><br><span class="line">print(<span class="string">"&#123;&#125; &#123;&#125;"</span>.format(<span class="string">"hello"</span>, <span class="string">"world"</span>))</span><br><span class="line">print(<span class="string">"&#123;1&#125; &#123;0&#125;"</span>.format(<span class="string">"hello"</span>, <span class="string">"world"</span>))</span><br></pre></td></tr></table></figure>

<p><strong>è¡¨æ ¼</strong>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%s    å­—ç¬¦ä¸² (é‡‡ç”¨str()çš„æ˜¾ç¤º)</span><br><span class="line">%r    å­—ç¬¦ä¸² (é‡‡ç”¨repr()çš„æ˜¾ç¤º)</span><br><span class="line">%c    å•ä¸ªå­—ç¬¦</span><br><span class="line">%b    äºŒè¿›åˆ¶æ•´æ•°</span><br><span class="line">%d    åè¿›åˆ¶æ•´æ•°</span><br><span class="line">%i    åè¿›åˆ¶æ•´æ•°</span><br><span class="line">%o    å…«è¿›åˆ¶æ•´æ•°</span><br><span class="line">%x    åå…­è¿›åˆ¶æ•´æ•°</span><br><span class="line">%e    æŒ‡æ•° (åŸºåº•å†™ä¸ºe)</span><br><span class="line">%E    æŒ‡æ•° (åŸºåº•å†™ä¸ºE)</span><br><span class="line">%f    æµ®ç‚¹æ•°</span><br><span class="line">%F    æµ®ç‚¹æ•°ï¼Œä¸ä¸Šç›¸åŒ</span><br><span class="line">%g    æŒ‡æ•°(e)æˆ–æµ®ç‚¹æ•° (æ ¹æ®æ˜¾ç¤ºé•¿åº¦)</span><br><span class="line">%G    æŒ‡æ•°(E)æˆ–æµ®ç‚¹æ•° (æ ¹æ®æ˜¾ç¤ºé•¿åº¦)</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸‰éƒ¨åˆ†-å‰æœŸçŸ¥è¯†æ±‡æ€»"><a href="#ç¬¬ä¸‰éƒ¨åˆ†-å‰æœŸçŸ¥è¯†æ±‡æ€»" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ† å‰æœŸçŸ¥è¯†æ±‡æ€»"></a>ç¬¬ä¸‰éƒ¨åˆ† å‰æœŸçŸ¥è¯†æ±‡æ€»</h3><p><img data-src="Python%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt="PythonåŸºç¡€æ•°æ®ç±»å‹"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Howard</p>
  <div class="site-description" itemprop="description">è®°å½•ç‚¹æ»´ã€åˆ†äº«æ‰€å¾—</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">63</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">62</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/simuty" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;simuty" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Howard</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">196k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">2:58</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey   : 'AIzaSyAw-MAkCIHtrUzbfhgfXaE2q2QCCJDTbAY',
      projectId: 'blog-bcc62'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  

  


</body>
</html>
